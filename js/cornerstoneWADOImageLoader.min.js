<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="description" content="The CDN for everything on npm"/><link rel="icon" type="image/jpeg" href="/favicon.jpg"/><link rel="stylesheet" href="https://app.unpkg.com/_assets/styles-D6XP7YEC.css"/><link rel="stylesheet" href="https://app.unpkg.com/_assets/code-light-B2LHUSJR.css"/><script type="importmap">{"imports":{"preact":"https://unpkg.com/preact@10.25.4/dist/preact.module.js","preact/hooks":"https://unpkg.com/preact@10.25.4/hooks/dist/hooks.module.js","preact/jsx-runtime":"https://unpkg.com/preact@10.25.4/jsx-runtime/dist/jsxRuntime.module.js"}}</script><script type="module" src="https://app.unpkg.com/_assets/scripts-5LWG6LQM.js" defer></script><title>UNPKG</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-140352188-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-140352188-1');</script></head><body><header class="border-b border-slate-300 bg-slate-100 text-slate-950"><div class="p-4 mx-auto flex justify-between items-center lg:max-w-screen-xl"><h1 class="text-2xl font-bold inline-block"><a href="https://unpkg.com">UNPKG</a></h1><span class="inline-block h-full"><a href="https://github.com/unpkg"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg></a></span></div></header><main class="px-4 pb-24 mx-auto lg:max-w-screen-xl lg:pb-44"><header class="pt-6 pb-4 lg:pt-16"><div class="mb-6 flex justify-between items-center"><h1 class="text-black text-3xl leading-tight font-semibold">cornerstone-wado-image-loader</h1><div class="text-right w-48"><span>Version: </span><span data-hydrate="{&quot;key&quot;:&quot;VersionSelector&quot;,&quot;props&quot;:{&quot;availableTags&quot;:{&quot;latest&quot;:&quot;4.13.2&quot;,&quot;next&quot;:&quot;4.0.0-rc3&quot;,&quot;major-2&quot;:&quot;2.2.4&quot;},&quot;availableVersions&quot;:[&quot;4.13.2&quot;,&quot;4.13.1&quot;,&quot;4.13.0&quot;,&quot;4.10.2&quot;,&quot;4.10.1&quot;,&quot;4.10.0&quot;,&quot;4.9.1&quot;,&quot;4.9.0&quot;,&quot;4.8.0&quot;,&quot;4.7.0&quot;,&quot;4.6.1&quot;,&quot;4.6.0&quot;,&quot;4.5.2&quot;,&quot;4.5.1&quot;,&quot;4.5.0&quot;,&quot;4.4.0&quot;,&quot;4.3.0&quot;,&quot;4.2.1&quot;,&quot;4.2.0&quot;,&quot;4.1.5&quot;,&quot;4.1.4&quot;,&quot;4.1.3&quot;,&quot;4.1.2&quot;,&quot;4.1.1&quot;,&quot;4.1.0&quot;,&quot;4.0.4&quot;,&quot;4.0.3&quot;,&quot;4.0.3-rc1&quot;,&quot;4.0.2&quot;,&quot;4.0.1&quot;,&quot;4.0.0&quot;,&quot;4.0.0-rc3&quot;,&quot;4.0.0-rc2&quot;,&quot;4.0.0-rc1&quot;,&quot;4.0.0-rc&quot;,&quot;3.3.2&quot;,&quot;3.3.1&quot;,&quot;3.3.0&quot;,&quot;3.2.0&quot;,&quot;3.1.2&quot;,&quot;3.1.1&quot;,&quot;3.1.0&quot;,&quot;3.0.6&quot;,&quot;3.0.5&quot;,&quot;3.0.4&quot;,&quot;3.0.3&quot;,&quot;3.0.2&quot;,&quot;3.0.1&quot;,&quot;3.0.0&quot;,&quot;2.2.4&quot;,&quot;2.2.3&quot;,&quot;2.2.3-testflag.1&quot;,&quot;2.2.3-testflag&quot;,&quot;2.2.2&quot;,&quot;2.2.1&quot;,&quot;2.2.0&quot;,&quot;2.1.4&quot;,&quot;2.1.3&quot;,&quot;2.1.2&quot;,&quot;2.1.1&quot;,&quot;2.1.0&quot;,&quot;2.0.0&quot;,&quot;1.0.5&quot;,&quot;1.0.4&quot;,&quot;1.0.3&quot;,&quot;1.0.2&quot;,&quot;1.0.1&quot;,&quot;1.0.0&quot;,&quot;0.15.0&quot;,&quot;0.14.7&quot;,&quot;0.14.6&quot;,&quot;0.14.5&quot;,&quot;0.14.4&quot;,&quot;0.5.0&quot;],&quot;currentVersion&quot;:&quot;2.2.4&quot;,&quot;pathnameFormat&quot;:&quot;/cornerstone-wado-image-loader@%s/files/dist/cornerstoneWADOImageLoader.min.js&quot;,&quot;class&quot;:&quot;w-28 p-1 border border-slate-300 bg-slate-100 text-sm&quot;}}"><select name="version" class="w-28 p-1 border border-slate-300 bg-slate-100 text-sm"><optgroup label="Tags"><option value="4.13.2">latest (4.13.2)</option><option selected value="2.2.4">major-2 (2.2.4)</option><option value="4.0.0-rc3">next (4.0.0-rc3)</option></optgroup><optgroup label="Versions"><option value="4.13.2">4.13.2</option><option value="4.13.1">4.13.1</option><option value="4.13.0">4.13.0</option><option value="4.10.2">4.10.2</option><option value="4.10.1">4.10.1</option><option value="4.10.0">4.10.0</option><option value="4.9.1">4.9.1</option><option value="4.9.0">4.9.0</option><option value="4.8.0">4.8.0</option><option value="4.7.0">4.7.0</option><option value="4.6.1">4.6.1</option><option value="4.6.0">4.6.0</option><option value="4.5.2">4.5.2</option><option value="4.5.1">4.5.1</option><option value="4.5.0">4.5.0</option><option value="4.4.0">4.4.0</option><option value="4.3.0">4.3.0</option><option value="4.2.1">4.2.1</option><option value="4.2.0">4.2.0</option><option value="4.1.5">4.1.5</option><option value="4.1.4">4.1.4</option><option value="4.1.3">4.1.3</option><option value="4.1.2">4.1.2</option><option value="4.1.1">4.1.1</option><option value="4.1.0">4.1.0</option><option value="4.0.4">4.0.4</option><option value="4.0.3">4.0.3</option><option value="4.0.3-rc1">4.0.3-rc1</option><option value="4.0.2">4.0.2</option><option value="4.0.1">4.0.1</option><option value="4.0.0">4.0.0</option><option value="4.0.0-rc3">4.0.0-rc3</option><option value="4.0.0-rc2">4.0.0-rc2</option><option value="4.0.0-rc1">4.0.0-rc1</option><option value="4.0.0-rc">4.0.0-rc</option><option value="3.3.2">3.3.2</option><option value="3.3.1">3.3.1</option><option value="3.3.0">3.3.0</option><option value="3.2.0">3.2.0</option><option value="3.1.2">3.1.2</option><option value="3.1.1">3.1.1</option><option value="3.1.0">3.1.0</option><option value="3.0.6">3.0.6</option><option value="3.0.5">3.0.5</option><option value="3.0.4">3.0.4</option><option value="3.0.3">3.0.3</option><option value="3.0.2">3.0.2</option><option value="3.0.1">3.0.1</option><option value="3.0.0">3.0.0</option><option selected value="2.2.4">2.2.4</option><option value="2.2.3">2.2.3</option><option value="2.2.3-testflag.1">2.2.3-testflag.1</option><option value="2.2.3-testflag">2.2.3-testflag</option><option value="2.2.2">2.2.2</option><option value="2.2.1">2.2.1</option><option value="2.2.0">2.2.0</option><option value="2.1.4">2.1.4</option><option value="2.1.3">2.1.3</option><option value="2.1.2">2.1.2</option><option value="2.1.1">2.1.1</option><option value="2.1.0">2.1.0</option><option value="2.0.0">2.0.0</option><option value="1.0.5">1.0.5</option><option value="1.0.4">1.0.4</option><option value="1.0.3">1.0.3</option><option value="1.0.2">1.0.2</option><option value="1.0.1">1.0.1</option><option value="1.0.0">1.0.0</option><option value="0.15.0">0.15.0</option><option value="0.14.7">0.14.7</option><option value="0.14.6">0.14.6</option><option value="0.14.5">0.14.5</option><option value="0.14.4">0.14.4</option><option value="0.5.0">0.5.0</option></optgroup></select></span></div></div><div class="mt-2"><p class="mb-3 leading-tight"><span>Cornerstone ImageLoader for DICOM WADO-URI</span></p><div class="lg:hidden"><p class="mt-1 text-sm leading-4"><a href="https://github.com/cornerstonejs/cornerstoneWADOImageLoader" title="Visit the cornerstone-wado-image-loader website" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" class="w-6 h-6"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.213 9.787a3.391 3.391 0 0 0-4.795 0l-3.425 3.426a3.39 3.39 0 0 0 4.795 4.794l.321-.304m-.321-4.49a3.39 3.39 0 0 0 4.795 0l3.424-3.426a3.39 3.39 0 0 0-4.794-4.795l-1.028.961"></path></svg><span class="ml-1">github.com/cornerstonejs/cornerstoneWADOImageLoader</span></a></p><p class="mt-1 text-sm leading-4"><a href="https://github.com/cornerstonejs/cornerstoneWADOImageLoader" title="View the cornerstone-wado-image-loader repository on GitHub" class="inline-flex items-center hover:text-slate-950 hover:underline"><svg aria-hidden="true" fill="currentColor" viewBox="0 0 24 24" class="w-6 h-6"><path fill-rule="evenodd" d="M12.006 2a9.847 9.847 0 0 0-6.484 2.44 10.32 10.32 0 0 0-3.393 6.17 10.48 10.48 0 0 0 1.317 6.955 10.045 10.045 0 0 0 5.4 4.418c.504.095.683-.223.683-.494 0-.245-.01-1.052-.014-1.908-2.78.62-3.366-1.21-3.366-1.21a2.711 2.711 0 0 0-1.11-1.5c-.907-.637.07-.621.07-.621.317.044.62.163.885.346.266.183.487.426.647.71.135.253.318.476.538.655a2.079 2.079 0 0 0 2.37.196c.045-.52.27-1.006.635-1.37-2.219-.259-4.554-1.138-4.554-5.07a4.022 4.022 0 0 1 1.031-2.75 3.77 3.77 0 0 1 .096-2.713s.839-.275 2.749 1.05a9.26 9.26 0 0 1 5.004 0c1.906-1.325 2.74-1.05 2.74-1.05.37.858.406 1.828.101 2.713a4.017 4.017 0 0 1 1.029 2.75c0 3.939-2.339 4.805-4.564 5.058a2.471 2.471 0 0 1 .679 1.897c0 1.372-.012 2.477-.012 2.814 0 .272.18.592.687.492a10.05 10.05 0 0 0 5.388-4.421 10.473 10.473 0 0 0 1.313-6.948 10.32 10.32 0 0 0-3.39-6.165A9.847 9.847 0 0 0 12.007 2Z" clip-rule="evenodd"></path></svg><span class="ml-1">cornerstonejs/cornerstoneWADOImageLoader</span></a></p></div></div></header><nav class="py-2"><span><a href="https://app.unpkg.com/cornerstone-wado-image-loader@2.2.4" class="text-blue-600 hover:underline">cornerstone-wado-image-loader</a></span><span> / </span><span><a href="https://app.unpkg.com/cornerstone-wado-image-loader@2.2.4/files/dist" class="text-blue-600 hover:underline">dist</a></span><span> / </span><span>cornerstoneWADOImageLoader.min.js</span></nav><div class="p-3 border border-slate-300 bg-slate-100 text-sm flex justify-between select-none"><div class="w-64"><span><span>3 lines </span><span>• </span></span><span>40 kB</span></div><div class="hidden flex-grow sm:block text-center">JavaScript</div><div class="w-64 hidden sm:block text-right"><a href="https://unpkg.com/cornerstone-wado-image-loader@2.2.4/dist/cornerstoneWADOImageLoader.min.js" class="py-1 px-2 border border-slate-300 bg-slate-100 hover:bg-slate-200 rounded-sm">View Raw</a></div></div><div data-hydrate="{&quot;key&quot;:&quot;CodeViewer&quot;,&quot;props&quot;:{&quot;html&quot;:&quot;&lt;span class=\&quot;hljs-comment\&quot;>/*! cornerstone-wado-image-loader - 2.2.4 - 2019-09-05 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstoneWADOImageLoader */&lt;/span>\n!&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-built_in\&quot;>exports&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>module&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>exports&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>():&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;function&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> define&amp;amp;&amp;amp;define.&lt;span class=\&quot;hljs-property\&quot;>amd&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>define&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneWADOImageLoader&amp;quot;&lt;/span>,[],t):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-built_in\&quot;>exports&lt;/span>?&lt;span class=\&quot;hljs-built_in\&quot;>exports&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cornerstoneWADOImageLoader&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>():e.&lt;span class=\&quot;hljs-property\&quot;>cornerstoneWADOImageLoader&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>()}(&lt;span class=\&quot;hljs-variable language_\&quot;>this&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a={};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(a[e])&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a[e].&lt;span class=\&quot;hljs-property\&quot;>exports&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=a[e]={&lt;span class=\&quot;hljs-attr\&quot;>i&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>l&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>exports&lt;/span>:{}};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r[e].&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>exports&lt;/span>,t,t.&lt;span class=\&quot;hljs-property\&quot;>exports&lt;/span>,n),t.&lt;span class=\&quot;hljs-property\&quot;>l&lt;/span>=!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>exports&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> n.&lt;span class=\&quot;hljs-property\&quot;>m&lt;/span>=r,n.&lt;span class=\&quot;hljs-property\&quot;>c&lt;/span>=a,n.&lt;span class=\&quot;hljs-property\&quot;>d&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){n.&lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(e,t)||&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>defineProperty&lt;/span>(e,t,{&lt;span class=\&quot;hljs-attr\&quot;>enumerable&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>get&lt;/span>:r})},n.&lt;span class=\&quot;hljs-property\&quot;>r&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;undefined&amp;quot;&lt;/span>!=&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Symbol&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title class_\&quot;>Symbol&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>toStringTag&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>defineProperty&lt;/span>(e,&lt;span class=\&quot;hljs-title class_\&quot;>Symbol&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>toStringTag&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>value&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;Module&amp;quot;&lt;/span>}),&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>defineProperty&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;__esModule&amp;quot;&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>value&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>})},n.&lt;span class=\&quot;hljs-property\&quot;>t&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>t,e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;e&amp;amp;&amp;amp;(t=&lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(t)),&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>&amp;amp;e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>&amp;amp;e&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;object&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> t&amp;amp;&amp;amp;t&amp;amp;&amp;amp;t.&lt;span class=\&quot;hljs-property\&quot;>__esModule&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>create&lt;/span>(&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(n.&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(r),&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>defineProperty&lt;/span>(r,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;default&amp;quot;&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>enumerable&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>value&lt;/span>:t}),&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;amp;e&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;string&amp;quot;&lt;/span>!=&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> t)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a &lt;span class=\&quot;hljs-keyword\&quot;>in&lt;/span> t)n.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(r,a,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t[e]}.&lt;span class=\&quot;hljs-title function_\&quot;>bind&lt;/span>(&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,a));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r},n.&lt;span class=\&quot;hljs-property\&quot;>n&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=e&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>__esModule&lt;/span>?&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>default&lt;/span>}:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> n.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;a&amp;quot;&lt;/span>,t),t},n.&lt;span class=\&quot;hljs-property\&quot;>o&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>hasOwnProperty&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>call&lt;/span>(e,t)},n.&lt;span class=\&quot;hljs-property\&quot;>p&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(n.&lt;span class=\&quot;hljs-property\&quot;>s&lt;/span>=&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>)}([&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;t.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r=e[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>],a=e[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>],n=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,o=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>;o&amp;lt;n;o++)t=e[o],r=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>min&lt;/span>(r,t),a=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>max&lt;/span>(a,t);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>min&lt;/span>:r,&lt;span class=\&quot;hljs-attr\&quot;>max&lt;/span>:a}}},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;undefined&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>CharLS&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;No JPEG-LS decoder loaded&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!(m||(m=&lt;span class=\&quot;hljs-title class_\&quot;>CharLS&lt;/span>())&amp;amp;&amp;amp;m.&lt;span class=\&quot;hljs-property\&quot;>_jpegls_decode&lt;/span>))&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;JPEG-LS failed to initialize&amp;quot;&lt;/span>)}r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;b&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}),t.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>);m.&lt;span class=\&quot;hljs-title function_\&quot;>writeArrayToMemory&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),n=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),o=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),i=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),l=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),s=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),u=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),c=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),f=m.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),d={&lt;span class=\&quot;hljs-attr\&quot;>result&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>ccall&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;jpegls_decode&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>],[r,e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,a,n,o,i,l,s,c,u,f]),&lt;span class=\&quot;hljs-attr\&quot;>width&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(o,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>height&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(i,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>bitsPerSample&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(l,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>stride&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(s,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>components&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(c,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>allowedLossyError&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(u,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>interleaveMode&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(f,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>pixelData&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>},p=m.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(a,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;*&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> d.&lt;span class=\&quot;hljs-property\&quot;>bitsPerSample&lt;/span>&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>?(d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(d.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>components&lt;/span>),d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>set&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(m.&lt;span class=\&quot;hljs-property\&quot;>HEAP8&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,p,d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>))):t?(d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(d.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>components&lt;/span>),d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>set&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(m.&lt;span class=\&quot;hljs-property\&quot;>HEAP16&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,p,d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>))):(d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(d.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>*d.&lt;span class=\&quot;hljs-property\&quot;>components&lt;/span>),d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>set&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(m.&lt;span class=\&quot;hljs-property\&quot;>HEAP16&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,p,d.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>))),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(r),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(p),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(a),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(n),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(o),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(i),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(l),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(s),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(c),m.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(f),d}(t,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==r.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>!==r.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;JPEG-LS decoder failed to decode frame (error code &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;)&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,e}},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> h;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>);h.&lt;span class=\&quot;hljs-title function_\&quot;>writeArrayToMemory&lt;/span>(e,a);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),o=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),i=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),l=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),s=h.&lt;span class=\&quot;hljs-title function_\&quot;>_malloc&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),u=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==h.&lt;span class=\&quot;hljs-title function_\&quot;>ccall&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;jp2_decode&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>],[a,e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,n,o,i,l,s]))&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-variable language_\&quot;>console&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>log&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;[opj_decode] decoding failed!&amp;quot;&lt;/span>),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(a),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;*&amp;quot;&lt;/span>)),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(i),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(l),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(o),&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(s);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> c=h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;*&amp;quot;&lt;/span>),f={&lt;span class=\&quot;hljs-attr\&quot;>length&lt;/span>:h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(o,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>sx&lt;/span>:h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(i,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>sy&lt;/span>:h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(l,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>nbChannels&lt;/span>:h.&lt;span class=\&quot;hljs-title function_\&quot;>getValue&lt;/span>(s,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;i32&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>perf_timetodecode&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>pixelData&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>},d=f.&lt;span class=\&quot;hljs-property\&quot;>sx&lt;/span>*f.&lt;span class=\&quot;hljs-property\&quot;>sy&lt;/span>*f.&lt;span class=\&quot;hljs-property\&quot;>nbChannels&lt;/span>,p=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int32Array&lt;/span>(h.&lt;span class=\&quot;hljs-property\&quot;>HEAP32&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,c,d);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===t)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>from&lt;/span>)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>from&lt;/span>(p);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(d);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;m&amp;lt;d;m++)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[m]=p[m]}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(r)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>from&lt;/span>)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>from&lt;/span>(p);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(d);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> g=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;g&amp;lt;d;g++)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[g]=p[g]}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>from&lt;/span>)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>from&lt;/span>(p);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(d);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;v&amp;lt;d;v++)f.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[v]=p[v]}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> x=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> f.&lt;span class=\&quot;hljs-property\&quot;>perf_timetodecode&lt;/span>=x-u,h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(a),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(n),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(c),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(o),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(i),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(l),h.&lt;span class=\&quot;hljs-title function_\&quot;>_free&lt;/span>(s),f}(t,e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>sx&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>sy&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;r.&lt;span class=\&quot;hljs-property\&quot;>nbChannels&lt;/span>&amp;amp;&amp;amp;(e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;RGB&amp;quot;&lt;/span>),e}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!e.&lt;span class=\&quot;hljs-property\&quot;>usePDFJS&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;undefined&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>OpenJPEG&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;OpenJPEG decoder not loaded&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!(h||(h=&lt;span class=\&quot;hljs-title class_\&quot;>OpenJPEG&lt;/span>())&amp;amp;&amp;amp;h.&lt;span class=\&quot;hljs-property\&quot;>_jp2_decode&lt;/span>))&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;OpenJPEG failed to initialize&amp;quot;&lt;/span>)}r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;b&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> o}),t.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]:{};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(r),a.&lt;span class=\&quot;hljs-property\&quot;>usePDFJS&lt;/span>||r.&lt;span class=\&quot;hljs-property\&quot;>usePDFJS&lt;/span>?&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>JpxImage&lt;/span>;r.&lt;span class=\&quot;hljs-title function_\&quot;>parse&lt;/span>(t);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=r.&lt;span class=\&quot;hljs-property\&quot;>tiles&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>!==a)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;JPEG2000 decoder returned a tileCount of &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(a,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;, when 1 is expected&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>tiles&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>items&lt;/span>,e}(e,t):&lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(e,t)}},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;t.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;2.2.4&amp;quot;&lt;/span>},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;a&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a});&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=!(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>])||&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>],r=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(n.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>),a=!(&lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>)&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>));!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==t||a?(e.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>=r.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>):(e.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>!==r.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-variable language_\&quot;>console&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>warn&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably.&amp;quot;&lt;/span>),e.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>!==r.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-variable language_\&quot;>console&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>warn&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably.&amp;quot;&lt;/span>))}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;number&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> e}},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> c=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,a=t.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>,n=t.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?(a%&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;amp;&amp;amp;(r=r.&lt;span class=\&quot;hljs-title function_\&quot;>slice&lt;/span>(a),a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(r,a,n/&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>):e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(r,a,n/&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>)):&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>||&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-attr\&quot;>t&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>32&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>&amp;amp;&amp;amp;(a%&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;amp;&amp;amp;(r=r.&lt;span class=\&quot;hljs-title function_\&quot;>slice&lt;/span>(a),a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Float32Array&lt;/span>(r,a,n/&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>)),e};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,a=t.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>,n=t.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;a%&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;amp;&amp;amp;(r=r.&lt;span class=\&quot;hljs-title function_\&quot;>slice&lt;/span>(a),a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(r,a,n/&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>):e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(r,a,n/&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;o&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;o++)e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[o]=(&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>&amp;amp;(i=e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[o]))&amp;lt;&amp;lt;&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>|i&amp;gt;&amp;gt;&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>&amp;amp;&amp;amp;(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=t);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> i;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> d=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>planarConfiguration&lt;/span>?&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t,a=e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>*e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,n=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>ArrayBuffer&lt;/span>(a*e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>),o=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>DataView&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),i=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),l=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(n),s=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,u=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),c=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;c&amp;lt;u;++c){s=c*a;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(c+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),d=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(c+&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===d&amp;amp;&amp;amp;(d=r.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=a*u;f&amp;lt;d;){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=i[f++];&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;=m&amp;amp;&amp;amp;m&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> g=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;g&amp;lt;m+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;s&amp;lt;p;++g)l[s]=i[f++],s++;&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(m&amp;lt;=-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;-&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>&amp;lt;=m)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=i[f++],x=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;x&amp;lt;&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>-m&amp;amp;&amp;amp;s&amp;lt;p;++x)l[s]=v,s++}}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(n),e}(e,t):&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t,a=e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>*e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,n=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>ArrayBuffer&lt;/span>(a*e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>),o=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>DataView&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),i=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),l=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(n),s=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,u=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),c=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;c&amp;lt;u;++c){s=c;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(c+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),d=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(c+&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===d&amp;amp;&amp;amp;(d=r.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=a*u;f&amp;lt;d;){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=i[f++];&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;=m&amp;amp;&amp;amp;m&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> g=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;g&amp;lt;m+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;s&amp;lt;p;++g)l[s]=i[f++],s+=e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(m&amp;lt;=-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;-&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>&amp;lt;=m)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=i[f++],x=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;x&amp;lt;&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>-m&amp;amp;&amp;amp;s&amp;lt;p;++x)l[s]=v,s+=e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>}}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(n),e}(e,t);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t,a=e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>*e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,n=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>ArrayBuffer&lt;/span>(a*e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>*&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),o=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>DataView&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),i=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>),l=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int8Array&lt;/span>(n),s=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),u=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;u&amp;lt;s;++u){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> c=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,f=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===u?&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,d=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(u+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),p=o.&lt;span class=\&quot;hljs-title function_\&quot;>getInt32&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*(u+&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===p&amp;amp;&amp;amp;(p=r.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>);d&amp;lt;p;){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=i[d++];&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;=m&amp;amp;&amp;amp;m&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> g=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;g&amp;lt;m+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;c&amp;lt;a;++g)l[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>*c+f]=i[d++],c++;&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(m&amp;lt;=-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;amp;&amp;amp;-&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>&amp;lt;=m)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=i[d++],x=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;x&amp;lt;&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>-m&amp;amp;&amp;amp;c&amp;lt;a;++x)l[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>*c+f]=v,c++}}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(n):e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(n),e}(e,t);&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;unsupported pixel format for RLE&amp;quot;&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;undefined&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>JpegImage&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;No JPEG Baseline decoder loaded&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>JpegImage&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r.&lt;span class=\&quot;hljs-title function_\&quot;>parse&lt;/span>(t),r.&lt;span class=\&quot;hljs-property\&quot;>colorTransform&lt;/span>=!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=r.&lt;span class=\&quot;hljs-title function_\&quot;>getData&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>),e):&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=r.&lt;span class=\&quot;hljs-title function_\&quot;>getData16&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>),e):&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;undefined&amp;quot;&lt;/span>==&lt;span class=\&quot;hljs-keyword\&quot;>typeof&lt;/span> jpeg||&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===jpeg.&lt;span class=\&quot;hljs-property\&quot;>lossless&lt;/span>||&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===jpeg.&lt;span class=\&quot;hljs-property\&quot;>lossless&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>Decoder&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;No JPEG Lossless decoder loaded&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>&amp;lt;=&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>,a=t.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,n=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> jpeg.&lt;span class=\&quot;hljs-property\&quot;>lossless&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>Decoder&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>decode&lt;/span>(a,t.&lt;span class=\&quot;hljs-property\&quot;>byteOffset&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,r);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(n.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>):e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(n.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>):e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(n.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>),e},g=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),v=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>);t.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r,a,n&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>c&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.1&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>c&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.2&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>f&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.1.99&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>c&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.5&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.50&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.51&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.57&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.70&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.80&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(g.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.81&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(g.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e,r);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.90&amp;quot;&lt;/span>===t)e=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(v.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e,r,a,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.91&amp;quot;&lt;/span>!==t)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;no decoder for transfer syntax &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(t));e=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(v.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e,r,a,n)}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> i=&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>,l=i&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>bitsStored&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>32&lt;/span>-e.&lt;span class=\&quot;hljs-property\&quot;>bitsStored&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(i&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==l)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> s=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;s&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;s++)e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[s]=e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>[s]&amp;lt;&amp;lt;l&amp;gt;&amp;gt;l;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> u=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>decodeTimeInMS&lt;/span>=u-o,e}},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;use strict&amp;quot;&lt;/span>;r.&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(t);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: rgbBuffer must not be undefined&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>%&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>!=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: rgbBuffer length must be divisible by 3&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>/&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>,a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,o=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;o&amp;lt;r;o++)t[n++]=e[a++],t[n++]=e[a++],t[n++]=e[a++],t[n++]=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>},n=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: rgbBuffer must not be undefined&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>%&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>!=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: rgbBuffer length must be divisible by 3&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>/&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>,a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,o=r,i=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>*r,l=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;l&amp;lt;r;l++)t[a++]=e[n++],t[a++]=e[o++],t[a++]=e[i++],t[a++]=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>},o=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: ybrBuffer must not be undefined&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>%&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>!=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: ybrBuffer length must be divisble by 3&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>/&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>,a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,o=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;o&amp;lt;r;o++){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> i=e[a++],l=e[a++],s=e[a++];t[n++]=i+&lt;span class=\&quot;hljs-number\&quot;>1.402&lt;/span>*(s-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[n++]=i-&lt;span class=\&quot;hljs-number\&quot;>.34414&lt;/span>*(l-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>)-&lt;span class=\&quot;hljs-number\&quot;>.71414&lt;/span>*(s-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[n++]=i+&lt;span class=\&quot;hljs-number\&quot;>1.772&lt;/span>*(l-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[n++]=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>}},i=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: ybrBuffer must not be undefined&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>%&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>!=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeRGB: ybrBuffer length must be divisble by 3&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>/&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>,a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,o=r,i=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>*r,l=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;l&amp;lt;r;l++){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> s=e[n++],u=e[o++],c=e[i++];t[a++]=s+&lt;span class=\&quot;hljs-number\&quot;>1.402&lt;/span>*(c-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[a++]=s-&lt;span class=\&quot;hljs-number\&quot;>.34414&lt;/span>*(u-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>)-&lt;span class=\&quot;hljs-number\&quot;>.71414&lt;/span>*(c-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[a++]=s+&lt;span class=\&quot;hljs-number\&quot;>1.772&lt;/span>*(u-&lt;span class=\&quot;hljs-number\&quot;>128&lt;/span>),t[a++]=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>}};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>x&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,a=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8ClampedArray&lt;/span>(r),n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;n&amp;lt;r;++n)a[n]=e[n]&amp;gt;&amp;gt;t;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> l=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>*e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,a=e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,n=e.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableData&lt;/span>,o=e.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableData&lt;/span>,i=e.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableData&lt;/span>,l=e.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,s=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,u=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,c=e.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>],f=&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>,d=&lt;span class=\&quot;hljs-title function_\&quot;>x&lt;/span>(n,f),p=&lt;span class=\&quot;hljs-title function_\&quot;>x&lt;/span>(o,f),m=&lt;span class=\&quot;hljs-title function_\&quot;>x&lt;/span>(i,f),g=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;g&amp;lt;r;++g){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=a[s++];v&amp;lt;c?v=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>:c+l-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;v?v=l-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:v-=c,t[u++]=d[v],t[u++]=p[v],t[u++]=m[v],t[u++]=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>}};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>s&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>[t]&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>[t].&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>[e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(t,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(t,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(t,&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>)]}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=[],n=e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>[t],o=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;o&amp;lt;r[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>];o++)&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===r[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?a[o]=e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(t,o):a[o]=e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>[o+n.&lt;span class=\&quot;hljs-property\&quot;>dataOffset&lt;/span>];&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> g=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r,a,n={&lt;span class=\&quot;hljs-attr\&quot;>samplesPerPixel&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280002&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>photometricInterpretation&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280004&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280010&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280011&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>bitsAllocated&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280100&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>bitsStored&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280101&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>highBit&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280102&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>pixelRepresentation&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280103&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>planarConfiguration&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280006&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>pixelAspectRatio&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280034&amp;quot;&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r=n,a=(t=e).&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280103&amp;quot;&lt;/span>),r.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===a?(r.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>=t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280106&amp;quot;&lt;/span>),t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280107&amp;quot;&lt;/span>)):(r.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>=t.&lt;span class=\&quot;hljs-title function_\&quot;>int16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280106&amp;quot;&lt;/span>),t.&lt;span class=\&quot;hljs-title function_\&quot;>int16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280107&amp;quot;&lt;/span>)),&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PALETTE COLOR&amp;quot;&lt;/span>===n.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00281101&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>s&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281101&amp;quot;&lt;/span>),t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>s&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281102&amp;quot;&lt;/span>),t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>s&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281103&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]&amp;amp;&amp;amp;(t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]=&lt;span class=\&quot;hljs-number\&quot;>65536&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]=&lt;span class=\&quot;hljs-number\&quot;>65536&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]=&lt;span class=\&quot;hljs-number\&quot;>65536&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>],a=e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00281201&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>===r?&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>;t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]!==a&amp;amp;&amp;amp;(t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]=a,t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]=a,t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]=a),t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableData&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281201&amp;quot;&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>),t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableData&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281202&amp;quot;&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>),t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableData&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(e,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281203&amp;quot;&lt;/span>,t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>)}(e,n),n};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>c&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283002&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===r&amp;amp;&amp;amp;(r=&lt;span class=\&quot;hljs-number\&quot;>65535&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a={&lt;span class=\&quot;hljs-attr\&quot;>id&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>firstValueMapped&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e?t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283002&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>):t.&lt;span class=\&quot;hljs-title function_\&quot;>int16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283002&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>numBitsPerEntry&lt;/span>:t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283002&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>lut&lt;/span>:[]},n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;n&amp;lt;r;n++)a.&lt;span class=\&quot;hljs-property\&quot;>lut&lt;/span>[n]=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e?t.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283006&amp;quot;&lt;/span>,n):t.&lt;span class=\&quot;hljs-title function_\&quot;>int16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00283006&amp;quot;&lt;/span>,n);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> v=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(t&amp;amp;&amp;amp;t.&lt;span class=\&quot;hljs-property\&quot;>items&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=[],a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;a&amp;lt;t.&lt;span class=\&quot;hljs-property\&quot;>items&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;a++){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-title function_\&quot;>c&lt;/span>(e,t.&lt;span class=\&quot;hljs-property\&quot;>items&lt;/span>[a].&lt;span class=\&quot;hljs-property\&quot;>dataSet&lt;/span>);n&amp;amp;&amp;amp;r.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(n)}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> h=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=e.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080016&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.5.1.4.1.1.2&amp;quot;&lt;/span>===t||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.5.1.4.1.1.2.1&amp;quot;&lt;/span>===t)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r,a,n,o=e.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281052&amp;quot;&lt;/span>),i=e.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281053&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===o||&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===i?e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00283000&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00283000&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280103&amp;quot;&lt;/span>):(a=(r=e).&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280103&amp;quot;&lt;/span>),n=r.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280101&amp;quot;&lt;/span>),(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===a?&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>:-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&amp;lt;n-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)*i+o&amp;lt;&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> w=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=[],n=e.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(t);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(n){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=n.&lt;span class=\&quot;hljs-title function_\&quot;>split&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;\\\\&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!(r&amp;amp;&amp;amp;o.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;lt;r)){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> i=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;i&amp;lt;o.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;i++)a.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[i]));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> d=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t=t||&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,e&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>?e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;lt;=t?&lt;span class=\&quot;hljs-attr\&quot;>r&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>[t]:r};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(e,t,r);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==a)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(a)};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(e,t);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==r)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(r)};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>&amp;amp;&amp;amp;!(t&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;lt;t)){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=[],a=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;a&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;a++)r.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>Value&lt;/span>[a]));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r}},b=[];&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> y={&lt;span class=\&quot;hljs-attr\&quot;>add&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){b[e]=t},&lt;span class=\&quot;hljs-attr\&quot;>get&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> b[e]},&lt;span class=\&quot;hljs-attr\&quot;>remove&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){b[e]=&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>},&lt;span class=\&quot;hljs-attr\&quot;>purge&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){b=[]}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> P=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=fe.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>,a=y.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(t);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(a){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;generalSeriesModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>modality&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00080060&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>seriesInstanceUID&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;0020000e&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>seriesNumber&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00200011&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>studyInstanceUID&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;0020000d&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>seriesDate&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseDA&lt;/span>(&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00080021&amp;quot;&lt;/span>])),&lt;span class=\&quot;hljs-attr\&quot;>seriesTime&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseTM&lt;/span>(&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00080031&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>))};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;patientStudyModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>patientAge&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00101010&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>patientSize&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00101020&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>patientWeight&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00101030&amp;quot;&lt;/span>])};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePlaneModule&amp;quot;&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00200037&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>),o=&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00200032&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>),i=&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280030&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),l=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,s=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;i&amp;amp;&amp;amp;(s=i[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>],l=i[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> u=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,c=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> n&amp;amp;&amp;amp;(u=[&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>])],c=[&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(n[&lt;span class=\&quot;hljs-number\&quot;>5&lt;/span>])]),{&lt;span class=\&quot;hljs-attr\&quot;>frameOfReferenceUID&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00200052&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280010&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280011&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>imageOrientationPatient&lt;/span>:n,&lt;span class=\&quot;hljs-attr\&quot;>rowCosines&lt;/span>:u,&lt;span class=\&quot;hljs-attr\&quot;>columnCosines&lt;/span>:c,&lt;span class=\&quot;hljs-attr\&quot;>imagePositionPatient&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>sliceThickness&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00180050&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>sliceLocation&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00201041&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>pixelSpacing&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>rowPixelSpacing&lt;/span>:s,&lt;span class=\&quot;hljs-attr\&quot;>columnPixelSpacing&lt;/span>:l}}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePixelModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>samplesPerPixel&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280002&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>photometricInterpretation&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280004&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280010&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280011&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>bitsAllocated&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280100&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>bitsStored&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280101&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>highBit&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280102&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>pixelRepresentation&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280103&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>planarConfiguration&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280006&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>pixelAspectRatio&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280034&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>smallestPixelValue&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280106&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>largestPixelValue&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00280107&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281101&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281102&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281103&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>redPaletteColorLookupTableData&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281201&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>greenPaletteColorLookupTableData&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281202&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>bluePaletteColorLookupTableData&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281203&amp;quot;&lt;/span>])};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;voiLutModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>windowCenter&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281050&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>windowWidth&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>m&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281051&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;modalityLutModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>rescaleIntercept&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281052&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>rescaleSlope&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281053&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>rescaleType&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00281054&amp;quot;&lt;/span>])};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;sopCommonModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>sopClassUID&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00080016&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>sopInstanceUID&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00080018&amp;quot;&lt;/span>])};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;petIsotopeModule&amp;quot;&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00540016&amp;quot;&lt;/span>]);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===f)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>radiopharmaceuticalInfo&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>radiopharmaceuticalStartTime&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseTM&lt;/span>(&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(f[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00181072&amp;quot;&lt;/span>],&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>)),&lt;span class=\&quot;hljs-attr\&quot;>radionuclideTotalDose&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(f[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00181074&amp;quot;&lt;/span>]),&lt;span class=\&quot;hljs-attr\&quot;>radionuclideHalfLife&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>p&lt;/span>(f[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;00181075&amp;quot;&lt;/span>])}}}}};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>D&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(r+e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;gt;t.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=r,n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;n&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;n++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e[n]!==t[a++])&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> I=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){r=r||&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>),r=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,a=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;r&amp;lt;a;r++)t[r]=e.&lt;span class=\&quot;hljs-title function_\&quot;>charCodeAt&lt;/span>(r);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t}(t),n=r;n&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;n++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(a[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]===e[n]&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title function_\&quot;>D&lt;/span>(a,e,n))&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> n;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>},T={&lt;span class=\&quot;hljs-attr\&quot;>beforeSend&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){},&lt;span class=\&quot;hljs-attr\&quot;>imageCreated&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){},&lt;span class=\&quot;hljs-attr\&quot;>strict&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>useWebWorkers&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>decodeConfig&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>usePDFJS&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>}};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>C&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){T=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>assign&lt;/span>(T,e)}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>k&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> T}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> A=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>o,i&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:{},l=&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]:{},s=fe.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>,u=&lt;span class=\&quot;hljs-title function_\&quot;>k&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>XMLHttpRequest&lt;/span>;a.&lt;span class=\&quot;hljs-title function_\&quot;>open&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;get&amp;quot;&lt;/span>,o,!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),a.&lt;span class=\&quot;hljs-property\&quot;>responseType&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;arraybuffer&amp;quot;&lt;/span>,u.&lt;span class=\&quot;hljs-title function_\&quot;>beforeSend&lt;/span>(a,i,n,l),&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>keys&lt;/span>(n).&lt;span class=\&quot;hljs-title function_\&quot;>forEach&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){a.&lt;span class=\&quot;hljs-title function_\&quot;>setRequestHeader&lt;/span>(e,n[e])}),l.&lt;span class=\&quot;hljs-property\&quot;>deferred&lt;/span>={&lt;span class=\&quot;hljs-attr\&quot;>resolve&lt;/span>:t,&lt;span class=\&quot;hljs-attr\&quot;>reject&lt;/span>:r},l.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>=o,l.&lt;span class=\&quot;hljs-property\&quot;>imageId&lt;/span>=i,a.&lt;span class=\&quot;hljs-property\&quot;>onloadstart&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){u.&lt;span class=\&quot;hljs-property\&quot;>onloadstart&lt;/span>&amp;amp;&amp;amp;u.&lt;span class=\&quot;hljs-title function_\&quot;>onloadstart&lt;/span>(e,l);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t={&lt;span class=\&quot;hljs-attr\&quot;>url&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>imageId&lt;/span>:i};s.&lt;span class=\&quot;hljs-title function_\&quot;>triggerEvent&lt;/span>(s.&lt;span class=\&quot;hljs-property\&quot;>events&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneimageloadstart&amp;quot;&lt;/span>,t)},a.&lt;span class=\&quot;hljs-property\&quot;>onloadend&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){u.&lt;span class=\&quot;hljs-property\&quot;>onloadend&lt;/span>&amp;amp;&amp;amp;u.&lt;span class=\&quot;hljs-title function_\&quot;>onloadend&lt;/span>(e,l);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t={&lt;span class=\&quot;hljs-attr\&quot;>url&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>imageId&lt;/span>:i};s.&lt;span class=\&quot;hljs-title function_\&quot;>triggerEvent&lt;/span>(s.&lt;span class=\&quot;hljs-property\&quot;>events&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneimageloadend&amp;quot;&lt;/span>,t)},a.&lt;span class=\&quot;hljs-property\&quot;>onreadystatechange&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){u.&lt;span class=\&quot;hljs-property\&quot;>onreadystatechange&lt;/span>?u.&lt;span class=\&quot;hljs-title function_\&quot;>onreadystatechange&lt;/span>(e,l):&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>===a.&lt;span class=\&quot;hljs-property\&quot;>readyState&lt;/span>&amp;amp;&amp;amp;(&lt;span class=\&quot;hljs-number\&quot;>200&lt;/span>===a.&lt;span class=\&quot;hljs-property\&quot;>status&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>(a.&lt;span class=\&quot;hljs-property\&quot;>response&lt;/span>,a):&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(a))},a.&lt;span class=\&quot;hljs-property\&quot;>onprogress&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r,a=e.&lt;span class=\&quot;hljs-property\&quot;>loaded&lt;/span>;e.&lt;span class=\&quot;hljs-property\&quot;>lengthComputable&lt;/span>&amp;amp;&amp;amp;(t=e.&lt;span class=\&quot;hljs-property\&quot;>total&lt;/span>,r=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>round&lt;/span>(a/t*&lt;span class=\&quot;hljs-number\&quot;>100&lt;/span>)),u.&lt;span class=\&quot;hljs-property\&quot;>onprogress&lt;/span>&amp;amp;&amp;amp;u.&lt;span class=\&quot;hljs-title function_\&quot;>onprogress&lt;/span>(e,l);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n={&lt;span class=\&quot;hljs-attr\&quot;>url&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>imageId&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>loaded&lt;/span>:a,&lt;span class=\&quot;hljs-attr\&quot;>total&lt;/span>:t,&lt;span class=\&quot;hljs-attr\&quot;>percentComplete&lt;/span>:r};s.&lt;span class=\&quot;hljs-title function_\&quot;>triggerEvent&lt;/span>(s.&lt;span class=\&quot;hljs-property\&quot;>events&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneimageloadprogress&amp;quot;&lt;/span>,n)},a.&lt;span class=\&quot;hljs-property\&quot;>onerror&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(a)},a.&lt;span class=\&quot;hljs-property\&quot;>onabort&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(a)},a.&lt;span class=\&quot;hljs-title function_\&quot;>send&lt;/span>()})},L={&lt;span class=\&quot;hljs-attr\&quot;>xhrRequest&lt;/span>:A,&lt;span class=\&quot;hljs-attr\&quot;>setOptions&lt;/span>:C,&lt;span class=\&quot;hljs-attr\&quot;>getOptions&lt;/span>:k};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> S=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r={&lt;span class=\&quot;hljs-attr\&quot;>accept&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;application/octet-stream&amp;quot;&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>s,u&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>A&lt;/span>(e,t,r).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e),r=&lt;span class=\&quot;hljs-title function_\&quot;>I&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;\\r\\n\\r\\n&amp;quot;&lt;/span>);-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===r&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;invalid response - no multipart mime header&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){t=t||&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r=r||e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>-t;&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>,n=t;n&amp;lt;t+r;n++)a+=&lt;span class=\&quot;hljs-title class_\&quot;>String&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>fromCharCode&lt;/span>(e[n]);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}(t,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r).&lt;span class=\&quot;hljs-title function_\&quot;>split&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;\\r\\n&amp;quot;&lt;/span>),n=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;t&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;t++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;--&amp;quot;&lt;/span>===e[t].&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>))&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e[t]}(a);n||&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;invalid response - no boundary marker&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=r+&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>,i=&lt;span class=\&quot;hljs-title function_\&quot;>I&lt;/span>(t,n,o);-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===i&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title function_\&quot;>u&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;invalid response - terminating boundary not found&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> l=i-o-&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>;&lt;span class=\&quot;hljs-title function_\&quot;>s&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>contentType&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;t&amp;lt;e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;t++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;Content-Type:&amp;quot;&lt;/span>===e[t].&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>13&lt;/span>))&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e[t].&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>13&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>trim&lt;/span>()}(a),&lt;span class=\&quot;hljs-attr\&quot;>imageFrame&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>pixelData&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e,o,l)}})},u)})};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> E,O=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=fe.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePixelModule&amp;quot;&lt;/span>,e);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>samplesPerPixel&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>photometricInterpretation&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>planarConfiguration&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>planarConfiguration&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>bitsAllocated&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>bitsStored&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>bitsStored&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>pixelRepresentation&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>smallestPixelValue&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>largestPixelValue&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableDescriptor&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableDescriptor&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableDescriptor&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>redPaletteColorLookupTableData&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>redPaletteColorLookupTableData&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>greenPaletteColorLookupTableData&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>greenPaletteColorLookupTableData&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>bluePaletteColorLookupTableData&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>bluePaletteColorLookupTableData&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>pixelData&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}},M=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,B=[],R=[],_=&lt;span class=\&quot;hljs-title function_\&quot;>k&lt;/span>(),W={&lt;span class=\&quot;hljs-attr\&quot;>maxWebWorkers&lt;/span>:navigator.&lt;span class=\&quot;hljs-property\&quot;>hardwareConcurrency&lt;/span>||&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>startWebWorkersOnDemand&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>webWorkerPath&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;../../dist/cornerstoneWADOImageLoaderWebWorker.js&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>webWorkerTaskPaths&lt;/span>:[],&lt;span class=\&quot;hljs-attr\&quot;>taskConfiguration&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>decodeTask&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>loadCodecsOnStartup&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>initializeCodecsOnStartup&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>codecsPath&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;../dist/cornerstoneWADOImageLoaderCodecs.js&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>usePDFJS&lt;/span>:!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>strict&lt;/span>:_.&lt;span class=\&quot;hljs-property\&quot;>strict&lt;/span>}}},U={&lt;span class=\&quot;hljs-attr\&quot;>maxWebWorkers&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>numWebWorkers&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>numTasksQueued&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>numTasksExecuting&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>numTasksCompleted&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>totalTaskTimeInMS&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>totalTimeDelayedInMS&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>V&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;e&amp;lt;R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;e++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ready&amp;quot;&lt;/span>===R[e].&lt;span class=\&quot;hljs-property\&quot;>status&lt;/span>){R[e].&lt;span class=\&quot;hljs-property\&quot;>status&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;busy&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=B.&lt;span class=\&quot;hljs-title function_\&quot;>shift&lt;/span>();t.&lt;span class=\&quot;hljs-property\&quot;>start&lt;/span>=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> U.&lt;span class=\&quot;hljs-property\&quot;>totalTimeDelayedInMS&lt;/span>+=r-t.&lt;span class=\&quot;hljs-property\&quot;>added&lt;/span>,R[e].&lt;span class=\&quot;hljs-property\&quot;>task&lt;/span>=t,R[e].&lt;span class=\&quot;hljs-property\&quot;>worker&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>taskType&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>taskType&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>workerIndex&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>data&lt;/span>:t.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>},t.&lt;span class=\&quot;hljs-property\&quot;>transferList&lt;/span>),&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> U.&lt;span class=\&quot;hljs-property\&quot;>numTasksExecuting&lt;/span>++}R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;lt;E.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-title function_\&quot;>j&lt;/span>()}}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>F&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;initialize&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>taskType&lt;/span>)R[e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>workerIndex&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>status&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ready&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-title function_\&quot;>V&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=R[e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>workerIndex&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>task&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>start&lt;/span>;R[e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>workerIndex&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>task&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>deferred&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>resolve&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>),R[e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>workerIndex&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>task&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,U.&lt;span class=\&quot;hljs-property\&quot;>numTasksExecuting&lt;/span>--,R[e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>workerIndex&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>status&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ready&amp;quot;&lt;/span>,U.&lt;span class=\&quot;hljs-property\&quot;>numTasksCompleted&lt;/span>++;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();U.&lt;span class=\&quot;hljs-property\&quot;>totalTaskTimeInMS&lt;/span>+=r-t,&lt;span class=\&quot;hljs-title function_\&quot;>V&lt;/span>()}}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>j&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!(R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;gt;=E.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>)){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Worker&lt;/span>(E.&lt;span class=\&quot;hljs-property\&quot;>webWorkerPath&lt;/span>);R.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>worker&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>status&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;initializing&amp;quot;&lt;/span>}),e.&lt;span class=\&quot;hljs-title function_\&quot;>addEventListener&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;message&amp;quot;&lt;/span>,F),e.&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>taskType&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;initialize&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>workerIndex&lt;/span>:R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>config&lt;/span>:E})}}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>G&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e=e||W,E)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;WebWorkerManager already initialized&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((E=e).&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>=E.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>||navigator.&lt;span class=\&quot;hljs-property\&quot;>hardwareConcurrency&lt;/span>||&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,!E.&lt;span class=\&quot;hljs-property\&quot;>startWebWorkersOnDemand&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;t&amp;lt;E.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>;t++)&lt;span class=\&quot;hljs-title function_\&quot;>j&lt;/span>()}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> J={&lt;span class=\&quot;hljs-attr\&quot;>initialize&lt;/span>:G,&lt;span class=\&quot;hljs-attr\&quot;>loadWebWorkerTask&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){E.&lt;span class=\&quot;hljs-property\&quot;>webWorkerTaskPaths&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(e),t&amp;amp;&amp;amp;(E.&lt;span class=\&quot;hljs-property\&quot;>taskConfiguration&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>assign&lt;/span>(E.&lt;span class=\&quot;hljs-property\&quot;>taskConfiguration&lt;/span>,t));&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;r&amp;lt;R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;r++)R[r].&lt;span class=\&quot;hljs-property\&quot;>worker&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>postMessage&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>taskType&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;loadWebWorkerTask&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>workerIndex&lt;/span>:R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>sourcePath&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>config&lt;/span>:E})},&lt;span class=\&quot;hljs-attr\&quot;>addTask&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,a=&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;E||&lt;span class=\&quot;hljs-title function_\&quot;>G&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n,o={},i=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){o={&lt;span class=\&quot;hljs-attr\&quot;>resolve&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>reject&lt;/span>:t}});&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;n&amp;lt;B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;!(B[n].&lt;span class=\&quot;hljs-property\&quot;>priority&lt;/span>&amp;lt;r);n++);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> l=M++;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> B.&lt;span class=\&quot;hljs-title function_\&quot;>splice&lt;/span>(n,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>taskId&lt;/span>:l,&lt;span class=\&quot;hljs-attr\&quot;>taskType&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>status&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;ready&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>added&lt;/span>:(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>(),&lt;span class=\&quot;hljs-attr\&quot;>data&lt;/span>:t,&lt;span class=\&quot;hljs-attr\&quot;>deferred&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>priority&lt;/span>:r,&lt;span class=\&quot;hljs-attr\&quot;>transferList&lt;/span>:a}),&lt;span class=\&quot;hljs-title function_\&quot;>V&lt;/span>(),{&lt;span class=\&quot;hljs-attr\&quot;>taskId&lt;/span>:l,&lt;span class=\&quot;hljs-attr\&quot;>promise&lt;/span>:i}},&lt;span class=\&quot;hljs-attr\&quot;>getStatistics&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> U.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>=E.&lt;span class=\&quot;hljs-property\&quot;>maxWebWorkers&lt;/span>,U.&lt;span class=\&quot;hljs-property\&quot;>numWebWorkers&lt;/span>=R.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,U.&lt;span class=\&quot;hljs-property\&quot;>numTasksQueued&lt;/span>=B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,U},&lt;span class=\&quot;hljs-attr\&quot;>setTaskPriority&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;r&amp;lt;B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;r++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(B[r].&lt;span class=\&quot;hljs-property\&quot;>taskId&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=B.&lt;span class=\&quot;hljs-title function_\&quot;>splice&lt;/span>(r,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>];&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(a.&lt;span class=\&quot;hljs-property\&quot;>priority&lt;/span>=t,r=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;r&amp;lt;B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;!(B[r].&lt;span class=\&quot;hljs-property\&quot;>priority&lt;/span>&amp;lt;t);r++);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> B.&lt;span class=\&quot;hljs-title function_\&quot;>splice&lt;/span>(r,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,a),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>},&lt;span class=\&quot;hljs-attr\&quot;>cancelTask&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;r&amp;lt;B.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>;r++)&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(B[r].&lt;span class=\&quot;hljs-property\&quot;>taskId&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> B.&lt;span class=\&quot;hljs-title function_\&quot;>splice&lt;/span>(r,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>).&lt;span class=\&quot;hljs-property\&quot;>deferred&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>reject&lt;/span>(t),!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>}},z=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>q&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r;&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-built_in\&quot;>decodeURIComponent&lt;/span>(&lt;span class=\&quot;hljs-built_in\&quot;>escape&lt;/span>(t))}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(e){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=e)&lt;span class=\&quot;hljs-keyword\&quot;>instanceof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>URIError&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t;&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> r}}(&lt;span class=\&quot;hljs-title class_\&quot;>String&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>fromCharCode&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>apply&lt;/span>(&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Array&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>&lt;span class=\&quot;hljs-keyword\&quot;>prototype&lt;/span>&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>slice&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>apply&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e))))}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> Y=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>i,e,l&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> s=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>(),r=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Blob&lt;/span>([e],{&lt;span class=\&quot;hljs-attr\&quot;>type&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/jpeg&amp;quot;&lt;/span>});&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>o,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>FileReader&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>readAsBinaryString&lt;/span>?e.&lt;span class=\&quot;hljs-title function_\&quot;>readAsArrayBuffer&lt;/span>(r):e.&lt;span class=\&quot;hljs-title function_\&quot;>readAsBinaryString&lt;/span>(r),e.&lt;span class=\&quot;hljs-property\&quot;>onload&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Image&lt;/span>;n.&lt;span class=\&quot;hljs-property\&quot;>onload&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){l.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>=n.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>,l.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>=n.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>,i.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>=n.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>,i.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>=n.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=l.&lt;span class=\&quot;hljs-title function_\&quot;>getContext&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;2d&amp;quot;&lt;/span>);e.&lt;span class=\&quot;hljs-title function_\&quot;>drawImage&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>this&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=e.&lt;span class=\&quot;hljs-title function_\&quot;>getImageData&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>,n.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>),r=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();i.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=t.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>,i.&lt;span class=\&quot;hljs-property\&quot;>imageData&lt;/span>=t,i.&lt;span class=\&quot;hljs-property\&quot;>decodeTimeInMS&lt;/span>=r-s;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(z.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(i.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>);i.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>=a.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>,i.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>=a.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>,&lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(i)},n.&lt;span class=\&quot;hljs-property\&quot;>onerror&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>(e)},&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>readAsBinaryString&lt;/span>?n.&lt;span class=\&quot;hljs-property\&quot;>src&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;data:image/jpeg;base64,&amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>btoa&lt;/span>(&lt;span class=\&quot;hljs-title function_\&quot;>q&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>))):n.&lt;span class=\&quot;hljs-property\&quot;>src&lt;/span>=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;data:image/jpeg;base64,&amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>btoa&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>))},e.&lt;span class=\&quot;hljs-property\&quot;>onerror&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>(e)}})},N=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>5&lt;/span>),H=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>),K=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),Q=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),X=!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>n,o,i,l&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=l.&lt;span class=\&quot;hljs-property\&quot;>priority&lt;/span>||&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,t=l.&lt;span class=\&quot;hljs-property\&quot;>transferPixelData&lt;/span>?[i.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r=&lt;span class=\&quot;hljs-title function_\&quot;>k&lt;/span>(),s=r.&lt;span class=\&quot;hljs-property\&quot;>strict&lt;/span>,u=r.&lt;span class=\&quot;hljs-property\&quot;>decodeConfig&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===r.&lt;span class=\&quot;hljs-property\&quot;>useWebWorkers&lt;/span>?(!&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===X&amp;amp;&amp;amp;(&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(K.&lt;span class=\&quot;hljs-property\&quot;>b&lt;/span>)(u),&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(Q.&lt;span class=\&quot;hljs-property\&quot;>b&lt;/span>)(u),X=!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=[n,o,i,u,l],a=N.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>apply&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r);&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(H.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(a,s),&lt;span class=\&quot;hljs-title function_\&quot;>e&lt;/span>(a)}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(e){&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>(e)}})):J.&lt;span class=\&quot;hljs-title function_\&quot;>addTask&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeTask&amp;quot;&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>imageFrame&lt;/span>:n,&lt;span class=\&quot;hljs-attr\&quot;>transferSyntax&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>pixelData&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>options&lt;/span>:l},e,t).&lt;span class=\&quot;hljs-property\&quot;>promise&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> $=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,r,t,a&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]:{};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.1&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.2&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.1.99&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.5&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.50&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>||&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-title function_\&quot;>Y&lt;/span>(e,t,a):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.51&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.57&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.70&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.80&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.81&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.90&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.91&amp;quot;&lt;/span>===r?&lt;span class=\&quot;hljs-title function_\&quot;>Z&lt;/span>(e,r,t,n):&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;No decoder for transfer syntax &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(r)))})},ee=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;RGB&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PALETTE COLOR&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_FULL&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_FULL_422&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_PARTIAL_422&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_PARTIAL_420&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_RCT&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_ICT&amp;quot;&lt;/span>===e};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>te&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>planarConfiguration&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,t):&lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,t)}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>re&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r,a,n=t.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;RGB&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-title function_\&quot;>te&lt;/span>(e,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_RCT&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-title function_\&quot;>te&lt;/span>(e,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_ICT&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-title function_\&quot;>te&lt;/span>(e,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;PALETTE COLOR&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-title function_\&quot;>l&lt;/span>(e,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_FULL_422&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-title function_\&quot;>te&lt;/span>(e,n);&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;YBR_FULL&amp;quot;&lt;/span>!==e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;No color space conversion for photometric interpretation &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>));a=n,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===(r=e).&lt;span class=\&quot;hljs-property\&quot;>planarConfiguration&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>o&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,a):&lt;span class=\&quot;hljs-title function_\&quot;>i&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,a)}}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> ae=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(t=t||e.&lt;span class=\&quot;hljs-property\&quot;>transferSyntax&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.50&amp;quot;&lt;/span>===t&amp;amp;&amp;amp;(&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>||&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>samplesPerPixel&lt;/span>))&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>!&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>},ne=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> oe=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>v,e,x,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!e||!e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>reject&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;The file does not contain image data.&amp;quot;&lt;/span>));&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> h=fe.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>,w=&lt;span class=\&quot;hljs-variable language_\&quot;>document&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>createElement&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;canvas&amp;quot;&lt;/span>),r=&lt;span class=\&quot;hljs-title function_\&quot;>O&lt;/span>(v),a=$(r,x,e,w,t);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>g,e&lt;/span>){a.&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r=h.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePlaneModule&amp;quot;&lt;/span>,v)||{},a=h.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;voiLutModule&amp;quot;&lt;/span>,v)||{},n=h.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;modalityLutModule&amp;quot;&lt;/span>,v)||{},o=h.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;sopCommonModule&amp;quot;&lt;/span>,v)||{},i=&lt;span class=\&quot;hljs-title function_\&quot;>ee&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!&lt;span class=\&quot;hljs-title function_\&quot;>ae&lt;/span>(e,x)&amp;amp;&amp;amp;(&lt;span class=\&quot;hljs-number\&quot;>32&lt;/span>===(t=e).&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Float32Array&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>):&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===t.&lt;span class=\&quot;hljs-property\&quot;>bitsAllocated&lt;/span>?&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===t.&lt;span class=\&quot;hljs-property\&quot;>pixelRepresentation&lt;/span>?t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>):t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Int16Array&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>):t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>),i)){w.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>=e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,w.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>=e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> l=w.&lt;span class=\&quot;hljs-title function_\&quot;>getContext&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;2d&amp;quot;&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>createImageData&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>);&lt;span class=\&quot;hljs-title function_\&quot;>re&lt;/span>(e,l),e.&lt;span class=\&quot;hljs-property\&quot;>imageData&lt;/span>=l,e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>=l.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> s=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(z.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>);e.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>=s.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>,e.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>=s.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> u,c={&lt;span class=\&quot;hljs-attr\&quot;>imageId&lt;/span>:v,&lt;span class=\&quot;hljs-attr\&quot;>color&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>columnPixelSpacing&lt;/span>:r.&lt;span class=\&quot;hljs-property\&quot;>columnPixelSpacing&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>height&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>intercept&lt;/span>:n.&lt;span class=\&quot;hljs-property\&quot;>rescaleIntercept&lt;/span>?n.&lt;span class=\&quot;hljs-property\&quot;>rescaleIntercept&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>invert&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;MONOCHROME1&amp;quot;&lt;/span>===e.&lt;span class=\&quot;hljs-property\&quot;>photometricInterpretation&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>minPixelValue&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>smallestPixelValue&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>maxPixelValue&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>largestPixelValue&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>rowPixelSpacing&lt;/span>:r.&lt;span class=\&quot;hljs-property\&quot;>rowPixelSpacing&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>sizeInBytes&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>slope&lt;/span>:n.&lt;span class=\&quot;hljs-property\&quot;>rescaleSlope&lt;/span>?n.&lt;span class=\&quot;hljs-property\&quot;>rescaleSlope&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>width&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>windowCenter&lt;/span>:a.&lt;span class=\&quot;hljs-property\&quot;>windowCenter&lt;/span>?a.&lt;span class=\&quot;hljs-property\&quot;>windowCenter&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>windowWidth&lt;/span>:a.&lt;span class=\&quot;hljs-property\&quot;>windowWidth&lt;/span>?a.&lt;span class=\&quot;hljs-property\&quot;>windowWidth&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>decodeTimeInMS&lt;/span>:e.&lt;span class=\&quot;hljs-property\&quot;>decodeTimeInMS&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>floatPixelData&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>instanceof&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Float32Array&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> f=e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>,d=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>(z.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>)(e),r=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>abs&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>-t.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>)/&lt;span class=\&quot;hljs-number\&quot;>65535&lt;/span>,a=t.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>,n=e.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,o=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint16Array&lt;/span>(n),i=&lt;span class=\&quot;hljs-number\&quot;>65535&lt;/span>,l=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,s=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;s&amp;lt;n;s++){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> u=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>floor&lt;/span>((e[s]-a)/r);o[s]=u,i=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>min&lt;/span>(i,u),l=&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>max&lt;/span>(l,u)}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>min&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>max&lt;/span>:l,&lt;span class=\&quot;hljs-attr\&quot;>intPixelData&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>slope&lt;/span>:r,&lt;span class=\&quot;hljs-attr\&quot;>intercept&lt;/span>:a}}(f);c.&lt;span class=\&quot;hljs-property\&quot;>minPixelValue&lt;/span>=d.&lt;span class=\&quot;hljs-property\&quot;>min&lt;/span>,c.&lt;span class=\&quot;hljs-property\&quot;>maxPixelValue&lt;/span>=d.&lt;span class=\&quot;hljs-property\&quot;>max&lt;/span>,c.&lt;span class=\&quot;hljs-property\&quot;>slope&lt;/span>=d.&lt;span class=\&quot;hljs-property\&quot;>slope&lt;/span>,c.&lt;span class=\&quot;hljs-property\&quot;>intercept&lt;/span>=d.&lt;span class=\&quot;hljs-property\&quot;>intercept&lt;/span>,c.&lt;span class=\&quot;hljs-property\&quot;>floatPixelData&lt;/span>=f,c.&lt;span class=\&quot;hljs-property\&quot;>getPixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> d.&lt;span class=\&quot;hljs-property\&quot;>intPixelData&lt;/span>}}&lt;span class=\&quot;hljs-keyword\&quot;>else&lt;/span> c.&lt;span class=\&quot;hljs-property\&quot;>getPixelData&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> e.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(c.&lt;span class=\&quot;hljs-property\&quot;>color&lt;/span>&amp;amp;&amp;amp;(c.&lt;span class=\&quot;hljs-property\&quot;>getCanvas&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> ne===v||(w.&lt;span class=\&quot;hljs-property\&quot;>height&lt;/span>=c.&lt;span class=\&quot;hljs-property\&quot;>rows&lt;/span>,w.&lt;span class=\&quot;hljs-property\&quot;>width&lt;/span>=c.&lt;span class=\&quot;hljs-property\&quot;>columns&lt;/span>,w.&lt;span class=\&quot;hljs-title function_\&quot;>getContext&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;2d&amp;quot;&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>putImageData&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>imageData&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>),ne=v),w}),n.&lt;span class=\&quot;hljs-property\&quot;>modalityLUTSequence&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;n.&lt;span class=\&quot;hljs-property\&quot;>modalityLUTSequence&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.5.1.4.1.1.12.1&amp;quot;&lt;/span>!==(u=o.&lt;span class=\&quot;hljs-property\&quot;>sopClassUID&lt;/span>)&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.5.1.4.1.1.12.2.1&amp;quot;&lt;/span>!==u&amp;amp;&amp;amp;(c.&lt;span class=\&quot;hljs-property\&quot;>modalityLUT&lt;/span>=n.&lt;span class=\&quot;hljs-property\&quot;>modalityLUTSequence&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]),a.&lt;span class=\&quot;hljs-property\&quot;>voiLUTSequence&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>&amp;lt;a.&lt;span class=\&quot;hljs-property\&quot;>voiLUTSequence&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;(c.&lt;span class=\&quot;hljs-property\&quot;>voiLUT&lt;/span>=a.&lt;span class=\&quot;hljs-property\&quot;>voiLUTSequence&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]),c.&lt;span class=\&quot;hljs-property\&quot;>color&lt;/span>&amp;amp;&amp;amp;(c.&lt;span class=\&quot;hljs-property\&quot;>windowWidth&lt;/span>=&lt;span class=\&quot;hljs-number\&quot;>255&lt;/span>,c.&lt;span class=\&quot;hljs-property\&quot;>windowCenter&lt;/span>=&lt;span class=\&quot;hljs-number\&quot;>127&lt;/span>),&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===c.&lt;span class=\&quot;hljs-property\&quot;>windowCenter&lt;/span>||&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===c.&lt;span class=\&quot;hljs-property\&quot;>windowWidth&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=c.&lt;span class=\&quot;hljs-property\&quot;>maxPixelValue&lt;/span>*c.&lt;span class=\&quot;hljs-property\&quot;>slope&lt;/span>+c.&lt;span class=\&quot;hljs-property\&quot;>intercept&lt;/span>,m=c.&lt;span class=\&quot;hljs-property\&quot;>minPixelValue&lt;/span>*c.&lt;span class=\&quot;hljs-property\&quot;>slope&lt;/span>+c.&lt;span class=\&quot;hljs-property\&quot;>intercept&lt;/span>;c.&lt;span class=\&quot;hljs-property\&quot;>windowWidth&lt;/span>=p-m,c.&lt;span class=\&quot;hljs-property\&quot;>windowCenter&lt;/span>=(p+m)/&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>}&lt;span class=\&quot;hljs-title function_\&quot;>g&lt;/span>(c)},e)})};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> ie=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>o,i&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> l=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>(),t=o.&lt;span class=\&quot;hljs-title function_\&quot;>substring&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>7&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>promise&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>a,n&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===y.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(o)){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;no metadata for imageId &amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(o));&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(e)}&lt;span class=\&quot;hljs-title function_\&quot;>S&lt;/span>(t,o,&lt;span class=\&quot;hljs-string\&quot;>&amp;#x27;multipart/related; type=&amp;quot;application/octet-stream&amp;quot;&amp;#x27;&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2&amp;quot;&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> t;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=e.&lt;span class=\&quot;hljs-title function_\&quot;>split&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;;&amp;quot;&lt;/span>),a={};r.&lt;span class=\&quot;hljs-title function_\&quot;>forEach&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=e.&lt;span class=\&quot;hljs-title function_\&quot;>split&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;=&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>===t.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=t[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>trim&lt;/span>().&lt;span class=\&quot;hljs-title function_\&quot;>replace&lt;/span>(&lt;span class=\&quot;hljs-regexp\&quot;>/&amp;quot;/g&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>);a[t[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>].&lt;span class=\&quot;hljs-title function_\&quot;>trim&lt;/span>()]=r}});&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n={&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/jpeg&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.70&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/x-dicom-rle&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.5&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/x-jls&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.80&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/jp2&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.90&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;image/jpx&amp;quot;&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;1.2.840.10008.1.2.4.92&amp;quot;&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;transfer-syntax&amp;quot;&lt;/span>]?a[&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;transfer-syntax&amp;quot;&lt;/span>]:e&amp;amp;&amp;amp;!&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>keys&lt;/span>(a).&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;n[e]?n[e]:a.&lt;span class=\&quot;hljs-property\&quot;>type&lt;/span>&amp;amp;&amp;amp;n[a.&lt;span class=\&quot;hljs-property\&quot;>type&lt;/span>]?n[a.&lt;span class=\&quot;hljs-property\&quot;>type&lt;/span>]:t}(e.&lt;span class=\&quot;hljs-property\&quot;>contentType&lt;/span>),r=e.&lt;span class=\&quot;hljs-property\&quot;>imageFrame&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>pixelData&lt;/span>;&lt;span class=\&quot;hljs-title function_\&quot;>oe&lt;/span>(o,r,t,i).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();e.&lt;span class=\&quot;hljs-property\&quot;>loadTimeInMS&lt;/span>=t-l,&lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>(e)},n)},n).&lt;span class=\&quot;hljs-title function_\&quot;>catch&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(e)})}),&lt;span class=\&quot;hljs-attr\&quot;>cancelFn&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}},le={&lt;span class=\&quot;hljs-attr\&quot;>metaData&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>getNumberString&lt;/span>:f,&lt;span class=\&quot;hljs-attr\&quot;>getNumberValue&lt;/span>:p,&lt;span class=\&quot;hljs-attr\&quot;>getNumberValues&lt;/span>:m,&lt;span class=\&quot;hljs-attr\&quot;>getValue&lt;/span>:d,&lt;span class=\&quot;hljs-attr\&quot;>metaDataProvider&lt;/span>:P},&lt;span class=\&quot;hljs-attr\&quot;>findIndexOfString&lt;/span>:I,&lt;span class=\&quot;hljs-attr\&quot;>getPixelData&lt;/span>:S,&lt;span class=\&quot;hljs-attr\&quot;>loadImage&lt;/span>:ie,&lt;span class=\&quot;hljs-attr\&quot;>metaDataManager&lt;/span>:y,&lt;span class=\&quot;hljs-attr\&quot;>register&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){e.&lt;span class=\&quot;hljs-title function_\&quot;>registerImageLoader&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wadors&amp;quot;&lt;/span>,ie),e.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>addProvider&lt;/span>(P)}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> se,ue,ce=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){le.&lt;span class=\&quot;hljs-title function_\&quot;>register&lt;/span>(e),&lt;span class=\&quot;hljs-title class_\&quot;>Le&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>register&lt;/span>(e)},fe={&lt;span class=\&quot;hljs-keyword\&quot;>set&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>cornerstone&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>ce&lt;/span>(se=e)},&lt;span class=\&quot;hljs-keyword\&quot;>get&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>cornerstone&lt;/span>(){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!se){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>||!&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.&amp;quot;&lt;/span>);se=&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>,&lt;span class=\&quot;hljs-title function_\&quot;>ce&lt;/span>(se)}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> se},&lt;span class=\&quot;hljs-keyword\&quot;>set&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>dicomParser&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){ue=e},&lt;span class=\&quot;hljs-keyword\&quot;>get&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>dicomParser&lt;/span>(){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!ue){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(!&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>||!&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.&amp;quot;&lt;/span>);ue=&lt;span class=\&quot;hljs-variable language_\&quot;>window&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> ue}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> de=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r=e.&lt;span class=\&quot;hljs-title function_\&quot;>indexOf&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;:&amp;quot;&lt;/span>),a=e.&lt;span class=\&quot;hljs-title function_\&quot;>substring&lt;/span>(r+&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),n=a.&lt;span class=\&quot;hljs-title function_\&quot;>indexOf&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;frame=&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>!==n){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=a.&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(n+&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>);t=&lt;span class=\&quot;hljs-built_in\&quot;>parseInt&lt;/span>(o,&lt;span class=\&quot;hljs-number\&quot;>10&lt;/span>),a=a.&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,n-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>scheme&lt;/span>:e.&lt;span class=\&quot;hljs-title function_\&quot;>substr&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r),&lt;span class=\&quot;hljs-attr\&quot;>url&lt;/span>:a,&lt;span class=\&quot;hljs-attr\&quot;>frame&lt;/span>:t}},pe=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,me={},ge={};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>ve&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>cacheSizeInBytes&lt;/span>:pe,&lt;span class=\&quot;hljs-attr\&quot;>numberOfDataSetsCached&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>keys&lt;/span>(me).&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>}}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> xe={&lt;span class=\&quot;hljs-attr\&quot;>isLoaded&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==me[e]},&lt;span class=\&quot;hljs-attr\&quot;>load&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>o&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]:A,t=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,i=fe.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>,l=fe.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(me[o])&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){me[o].&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>++,&lt;span class=\&quot;hljs-title function_\&quot;>e&lt;/span>(me[o].&lt;span class=\&quot;hljs-property\&quot;>dataSet&lt;/span>)});&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(ge[o])&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> ge[o].&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>++,ge[o];&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=&lt;span class=\&quot;hljs-title function_\&quot;>e&lt;/span>(o,t),s=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>a,n&lt;/span>){r.&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,r=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e);&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{t=l.&lt;span class=\&quot;hljs-title function_\&quot;>parseDicom&lt;/span>(r)}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(e){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>n&lt;/span>(e)}me[o]={&lt;span class=\&quot;hljs-attr\&quot;>dataSet&lt;/span>:t,&lt;span class=\&quot;hljs-attr\&quot;>cacheCount&lt;/span>:s.&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>},pe+=t.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,&lt;span class=\&quot;hljs-title function_\&quot;>a&lt;/span>(t),i.&lt;span class=\&quot;hljs-title function_\&quot;>triggerEvent&lt;/span>(i.&lt;span class=\&quot;hljs-property\&quot;>events&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;datasetscachechanged&amp;quot;&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>uri&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>action&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;loaded&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>cacheInfo&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>ve&lt;/span>()})},n).&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>delete&lt;/span> ge[o]},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>delete&lt;/span> ge[o]})});&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> s.&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>,ge[o]=s},&lt;span class=\&quot;hljs-attr\&quot;>unload&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=fe.&lt;span class=\&quot;hljs-property\&quot;>cornerstone&lt;/span>;me[e]&amp;amp;&amp;amp;(me[e].&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>--,&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===me[e].&lt;span class=\&quot;hljs-property\&quot;>cacheCount&lt;/span>&amp;amp;&amp;amp;(pe-=me[e].&lt;span class=\&quot;hljs-property\&quot;>dataSet&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>delete&lt;/span> me[e],t.&lt;span class=\&quot;hljs-title function_\&quot;>triggerEvent&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>events&lt;/span>,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;datasetscachechanged&amp;quot;&lt;/span>,{&lt;span class=\&quot;hljs-attr\&quot;>uri&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>action&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;unloaded&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>cacheInfo&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>ve&lt;/span>()})))},&lt;span class=\&quot;hljs-attr\&quot;>getInfo&lt;/span>:ve,&lt;span class=\&quot;hljs-attr\&quot;>purge&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){me={},ge={}},&lt;span class=\&quot;hljs-attr\&quot;>get&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(me[e])&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> me[e].&lt;span class=\&quot;hljs-property\&quot;>dataSet&lt;/span>}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> he=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r=fe.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>,a=&lt;span class=\&quot;hljs-title function_\&quot;>de&lt;/span>(t),n=xe.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(a.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(n){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;generalSeriesModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>modality&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080060&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>seriesInstanceUID&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x0020000e&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>seriesNumber&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>intString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00200011&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>studyInstanceUID&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x0020000d&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>seriesDate&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseDA&lt;/span>(n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080021&amp;quot;&lt;/span>)),&lt;span class=\&quot;hljs-attr\&quot;>seriesTime&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseTM&lt;/span>(n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080031&amp;quot;&lt;/span>)||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;patientStudyModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>patientAge&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>intString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00101010&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>patientSize&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00101020&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>patientWeight&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00101030&amp;quot;&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePlaneModule&amp;quot;&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=&lt;span class=\&quot;hljs-title function_\&quot;>w&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00200037&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>6&lt;/span>),i=&lt;span class=\&quot;hljs-title function_\&quot;>w&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00200032&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>),l=&lt;span class=\&quot;hljs-title function_\&quot;>w&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280030&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>),s=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,u=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;l&amp;amp;&amp;amp;(u=l[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>],s=l[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> c=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>,f=&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> o&amp;amp;&amp;amp;(c=[&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>])],f=[&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]),&lt;span class=\&quot;hljs-built_in\&quot;>parseFloat&lt;/span>(o[&lt;span class=\&quot;hljs-number\&quot;>5&lt;/span>])]),{&lt;span class=\&quot;hljs-attr\&quot;>frameOfReferenceUID&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00200052&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>rows&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280010&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>columns&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280011&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>imageOrientationPatient&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>rowCosines&lt;/span>:c,&lt;span class=\&quot;hljs-attr\&quot;>columnCosines&lt;/span>:f,&lt;span class=\&quot;hljs-attr\&quot;>imagePositionPatient&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>sliceThickness&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00180050&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>sliceLocation&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00201041&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>pixelSpacing&lt;/span>:l,&lt;span class=\&quot;hljs-attr\&quot;>rowPixelSpacing&lt;/span>:u,&lt;span class=\&quot;hljs-attr\&quot;>columnPixelSpacing&lt;/span>:s}}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;imagePixelModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>g&lt;/span>(n);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;modalityLutModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>rescaleIntercept&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281052&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>rescaleSlope&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281053&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>rescaleType&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281054&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>modalityLUTSequence&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>v&lt;/span>(n.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280103&amp;quot;&lt;/span>),n.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00283000&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;voiLutModule&amp;quot;&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> d=&lt;span class=\&quot;hljs-title function_\&quot;>h&lt;/span>(n);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>windowCenter&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>w&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281050&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>windowWidth&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>w&lt;/span>(n,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00281051&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>voiLUTSequence&lt;/span>:&lt;span class=\&quot;hljs-title function_\&quot;>v&lt;/span>(d,n.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00283010&lt;/span>)}}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;sopCommonModule&amp;quot;&lt;/span>===e)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>sopClassUID&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080016&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>sopInstanceUID&lt;/span>:n.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00080018&amp;quot;&lt;/span>)};&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;petIsotopeModule&amp;quot;&lt;/span>===e){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> p=n.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x00540016&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===p)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> m=p.&lt;span class=\&quot;hljs-property\&quot;>items&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>].&lt;span class=\&quot;hljs-property\&quot;>dataSet&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>radiopharmaceuticalInfo&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>radiopharmaceuticalStartTime&lt;/span>:r.&lt;span class=\&quot;hljs-title function_\&quot;>parseTM&lt;/span>(m.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00181072&amp;quot;&lt;/span>)||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>radionuclideTotalDose&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00181074&amp;quot;&lt;/span>),&lt;span class=\&quot;hljs-attr\&quot;>radionuclideHalfLife&lt;/span>:m.&lt;span class=\&quot;hljs-title function_\&quot;>floatString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00181075&amp;quot;&lt;/span>)}}}}},we=[];&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> be={&lt;span class=\&quot;hljs-attr\&quot;>add&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=we.&lt;span class=\&quot;hljs-title function_\&quot;>push&lt;/span>(e);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;dicomfile:&amp;quot;&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>concat&lt;/span>(t-&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>)},&lt;span class=\&quot;hljs-attr\&quot;>get&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> we[e]},&lt;span class=\&quot;hljs-attr\&quot;>remove&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){we[e]=&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>},&lt;span class=\&quot;hljs-attr\&quot;>purge&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){we=[]}};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>ye&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r,a=fe.&lt;span class=\&quot;hljs-property\&quot;>dicomParser&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>&amp;amp;&amp;amp;e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>basicOffsetTable&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a.&lt;span class=\&quot;hljs-title function_\&quot;>readEncapsulatedImageFrame&lt;/span>(e,e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>,t);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=e).&lt;span class=\&quot;hljs-title function_\&quot;>intString&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280008&amp;quot;&lt;/span>)===r.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>fragments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a.&lt;span class=\&quot;hljs-title function_\&quot;>readEncapsulatedPixelDataFromFragments&lt;/span>(e,e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>,t);&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=a.&lt;span class=\&quot;hljs-title function_\&quot;>createJPEGBasicOffsetTable&lt;/span>(e,e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a.&lt;span class=\&quot;hljs-title function_\&quot;>readEncapsulatedImageFrame&lt;/span>(e,e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>,t,n)}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Pe&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t,r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>for&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> a=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(r),n=&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>;n&amp;lt;r;n++){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> o=e[&lt;span class=\&quot;hljs-title class_\&quot;>Math&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>floor&lt;/span>(n/&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>)+t],i=n%&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>;a[n]=o&amp;amp;&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&amp;lt;i?&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>De&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> r,a=e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>||e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00008&lt;/span>,n=e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280100&amp;quot;&lt;/span>),o=e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280010&amp;quot;&lt;/span>),i=e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280011&amp;quot;&lt;/span>),l=e.&lt;span class=\&quot;hljs-title function_\&quot;>uint16&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00280002&amp;quot;&lt;/span>),s=a.&lt;span class=\&quot;hljs-property\&quot;>dataOffset&lt;/span>,u=o*i*l;&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>8&lt;/span>===n){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=s+t*u)&amp;gt;=e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;frame exceeds size of pixelData&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r,u)}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>16&lt;/span>===n){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=s+t*u*&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>)&amp;gt;=e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;frame exceeds size of pixelData&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r,&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>*u)}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>===n){&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=s+t*u*&lt;span class=\&quot;hljs-number\&quot;>.125&lt;/span>)&amp;gt;=e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;frame exceeds size of pixelData&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Pe&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>,r,u)}&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>32&lt;/span>!==n)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;unsupported pixel format&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>if&lt;/span>((r=s+t*u*&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>)&amp;gt;=e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>)&lt;span class=\&quot;hljs-keyword\&quot;>throw&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Error&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;frame exceeds size of pixelData&amp;quot;&lt;/span>);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Uint8Array&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>byteArray&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>buffer&lt;/span>,r,&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>*u)};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Ie&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-title function_\&quot;>de&lt;/span>(e),r=&lt;span class=\&quot;hljs-built_in\&quot;>parseInt&lt;/span>(t.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>,&lt;span class=\&quot;hljs-number\&quot;>10&lt;/span>),a=be.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(r);&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>r,e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>FileReader&lt;/span>;t.&lt;span class=\&quot;hljs-property\&quot;>onload&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=e.&lt;span class=\&quot;hljs-property\&quot;>target&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>result&lt;/span>;&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(t)},t.&lt;span class=\&quot;hljs-property\&quot;>onerror&lt;/span>=e,t.&lt;span class=\&quot;hljs-title function_\&quot;>readAsArrayBuffer&lt;/span>(a)})};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Te&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,r=e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00010&lt;/span>||e.&lt;span class=\&quot;hljs-property\&quot;>elements&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>x7fe00008&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> r?r.&lt;span class=\&quot;hljs-property\&quot;>encapsulatedPixelData&lt;/span>?&lt;span class=\&quot;hljs-title function_\&quot;>ye&lt;/span>(e,t):&lt;span class=\&quot;hljs-title class_\&quot;>De&lt;/span>(e,t):&lt;span class=\&quot;hljs-literal\&quot;>null&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>Ce&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e,s&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> u=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,c=&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,f=&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,d=&lt;span class=\&quot;hljs-number\&quot;>5&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>5&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,p=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>(),m={&lt;span class=\&quot;hljs-attr\&quot;>cancelFn&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>};&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> m.&lt;span class=\&quot;hljs-property\&quot;>promise&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>i,l&lt;/span>){e.&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>r&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t,e=&lt;span class=\&quot;hljs-title class_\&quot;>Te&lt;/span>(r,u),a=r.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00020010&amp;quot;&lt;/span>),n=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>(),o=&lt;span class=\&quot;hljs-title function_\&quot;>oe&lt;/span>(s,e,a,f);t=s,m.&lt;span class=\&quot;hljs-property\&quot;>decache&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e=&lt;span class=\&quot;hljs-title function_\&quot;>de&lt;/span>(t);xe.&lt;span class=\&quot;hljs-title function_\&quot;>unload&lt;/span>(e.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>)},o.&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>=r,e.&lt;span class=\&quot;hljs-property\&quot;>sharedCacheKey&lt;/span>=c;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();e.&lt;span class=\&quot;hljs-property\&quot;>loadTimeInMS&lt;/span>=n-p,e.&lt;span class=\&quot;hljs-property\&quot;>totalTimeInMS&lt;/span>=t-p,&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==d&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==d.&lt;span class=\&quot;hljs-property\&quot;>imageDoneCallback&lt;/span>&amp;amp;&amp;amp;d.&lt;span class=\&quot;hljs-title function_\&quot;>imageDoneCallback&lt;/span>(e),&lt;span class=\&quot;hljs-title function_\&quot;>i&lt;/span>(e)},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>l&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>error&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>dataSet&lt;/span>:r})})},&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>l&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>error&lt;/span>:e})})}),m}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>ke&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;dicomweb&amp;quot;&lt;/span>===e||&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wadouri&amp;quot;&lt;/span>===e?&lt;span class=\&quot;hljs-attr\&quot;>A&lt;/span>:&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;dicomfile&amp;quot;&lt;/span>===e?&lt;span class=\&quot;hljs-title class_\&quot;>Ie&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>Ae&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>1&lt;/span>]:{},r=&lt;span class=\&quot;hljs-title function_\&quot;>de&lt;/span>(e),a=(t=&lt;span class=\&quot;hljs-title class_\&quot;>Object&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>assign&lt;/span>({},t)).&lt;span class=\&quot;hljs-property\&quot;>loader&lt;/span>;&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>===a?a=&lt;span class=\&quot;hljs-title function_\&quot;>ke&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>scheme&lt;/span>):&lt;span class=\&quot;hljs-keyword\&quot;>delete&lt;/span> t.&lt;span class=\&quot;hljs-property\&quot;>loader&lt;/span>,xe.&lt;span class=\&quot;hljs-title function_\&quot;>isLoaded&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>)?&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>i,l&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> s=&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>&amp;amp;&amp;amp;&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>!==&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>2&lt;/span>]:&lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,u=&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,c=&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>&amp;lt;&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>length&lt;/span>?&lt;span class=\&quot;hljs-variable language_\&quot;>arguments&lt;/span>[&lt;span class=\&quot;hljs-number\&quot;>4&lt;/span>]:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>,f=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span>{&lt;span class=\&quot;hljs-attr\&quot;>promise&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Promise&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>r,t&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> e,a=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();&lt;span class=\&quot;hljs-keyword\&quot;>try&lt;/span>{&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> n=&lt;span class=\&quot;hljs-title class_\&quot;>Te&lt;/span>(i,s),o=i.&lt;span class=\&quot;hljs-title function_\&quot;>string&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;x00020010&amp;quot;&lt;/span>);e=&lt;span class=\&quot;hljs-title function_\&quot;>oe&lt;/span>(l,n,o,c)}&lt;span class=\&quot;hljs-keyword\&quot;>catch&lt;/span>(e){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-title function_\&quot;>t&lt;/span>({&lt;span class=\&quot;hljs-attr\&quot;>error&lt;/span>:e,&lt;span class=\&quot;hljs-attr\&quot;>dataSet&lt;/span>:i})}e.&lt;span class=\&quot;hljs-title function_\&quot;>then&lt;/span>(&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){e.&lt;span class=\&quot;hljs-property\&quot;>data&lt;/span>=i,e.&lt;span class=\&quot;hljs-property\&quot;>sharedCacheKey&lt;/span>=u;&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> t=(&lt;span class=\&quot;hljs-keyword\&quot;>new&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Date&lt;/span>).&lt;span class=\&quot;hljs-title function_\&quot;>getTime&lt;/span>();e.&lt;span class=\&quot;hljs-property\&quot;>loadTimeInMS&lt;/span>=a-f,e.&lt;span class=\&quot;hljs-property\&quot;>totalTimeInMS&lt;/span>=t-f,&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(e)},t)}),&lt;span class=\&quot;hljs-attr\&quot;>cancelFn&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>void&lt;/span> &lt;span class=\&quot;hljs-number\&quot;>0&lt;/span>}}(xe.&lt;span class=\&quot;hljs-title function_\&quot;>get&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>,a,e),e,r.&lt;span class=\&quot;hljs-property\&quot;>frame&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>,t):&lt;span class=\&quot;hljs-title class_\&quot;>Ce&lt;/span>(xe.&lt;span class=\&quot;hljs-title function_\&quot;>load&lt;/span>(r.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>,a,e),e,r.&lt;span class=\&quot;hljs-property\&quot;>frame&lt;/span>,r.&lt;span class=\&quot;hljs-property\&quot;>url&lt;/span>,t)}&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Le&lt;/span>={&lt;span class=\&quot;hljs-attr\&quot;>metaData&lt;/span>:{&lt;span class=\&quot;hljs-attr\&quot;>getImagePixelModule&lt;/span>:g,&lt;span class=\&quot;hljs-attr\&quot;>getLUTs&lt;/span>:v,&lt;span class=\&quot;hljs-attr\&quot;>getModalityLUTOutputPixelRepresentation&lt;/span>:h,&lt;span class=\&quot;hljs-attr\&quot;>getNumberValues&lt;/span>:w,&lt;span class=\&quot;hljs-attr\&quot;>metaDataProvider&lt;/span>:he},&lt;span class=\&quot;hljs-attr\&quot;>dataSetCacheManager&lt;/span>:xe,&lt;span class=\&quot;hljs-attr\&quot;>fileManager&lt;/span>:be,&lt;span class=\&quot;hljs-attr\&quot;>getEncapsulatedImageFrame&lt;/span>:ye,&lt;span class=\&quot;hljs-attr\&quot;>getUncompressedImageFrame&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>De&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>loadFileRequest&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Ie&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>loadImageFromPromise&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Ce&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>getLoaderForScheme&lt;/span>:ke,&lt;span class=\&quot;hljs-attr\&quot;>loadImage&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Ae&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>parseImageId&lt;/span>:de,&lt;span class=\&quot;hljs-attr\&quot;>unpackBinaryFrame&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Pe&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>register&lt;/span>:&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){e.&lt;span class=\&quot;hljs-title function_\&quot;>registerImageLoader&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;dicomweb&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Ae&lt;/span>),e.&lt;span class=\&quot;hljs-title function_\&quot;>registerImageLoader&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wadouri&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Ae&lt;/span>),e.&lt;span class=\&quot;hljs-title function_\&quot;>registerImageLoader&lt;/span>(&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;dicomfile&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-title class_\&quot;>Ae&lt;/span>),e.&lt;span class=\&quot;hljs-property\&quot;>metaData&lt;/span>.&lt;span class=\&quot;hljs-title function_\&quot;>addProvider&lt;/span>(he)}};&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Se&lt;/span>=&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>e&lt;/span>){&lt;span class=\&quot;hljs-title function_\&quot;>C&lt;/span>(e)},&lt;span class=\&quot;hljs-title class_\&quot;>Ee&lt;/span>=&lt;span class=\&quot;hljs-title function_\&quot;>r&lt;/span>(&lt;span class=\&quot;hljs-number\&quot;>3&lt;/span>);r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertRGBColorByPixel&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> a}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertRGBColorByPlane&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> n}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertYBRFullByPixel&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> o}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertYBRFullByPlane&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> i}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertPALETTECOLOR&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> l}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wadouri&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Le&lt;/span>}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;wadors&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> le}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;configure&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Se&lt;/span>}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;convertColorSpace&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> re}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;createImage&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> oe}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeImageFrame&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> $}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;decodeJPEGBaseline8BitColor&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> Y}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;getImageFrame&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> O}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;getMinMax&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> z.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;isColorImage&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> ee}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;isJPEGBaseline8BitColor&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> ae}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;webWorkerManager&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> J}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;version&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Ee&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;internal&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> L}),r.&lt;span class=\&quot;hljs-title function_\&quot;>d&lt;/span>(t,&lt;span class=\&quot;hljs-string\&quot;>&amp;quot;external&amp;quot;&lt;/span>,&lt;span class=\&quot;hljs-keyword\&quot;>function&lt;/span>(&lt;span class=\&quot;hljs-params\&quot;>&lt;/span>){&lt;span class=\&quot;hljs-keyword\&quot;>return&lt;/span> fe});&lt;span class=\&quot;hljs-keyword\&quot;>var&lt;/span> &lt;span class=\&quot;hljs-title class_\&quot;>Oe&lt;/span>={&lt;span class=\&quot;hljs-attr\&quot;>convertRGBColorByPixel&lt;/span>:a,&lt;span class=\&quot;hljs-attr\&quot;>convertRGBColorByPlane&lt;/span>:n,&lt;span class=\&quot;hljs-attr\&quot;>convertYBRFullByPixel&lt;/span>:o,&lt;span class=\&quot;hljs-attr\&quot;>convertYBRFullByPlane&lt;/span>:i,&lt;span class=\&quot;hljs-attr\&quot;>convertPALETTECOLOR&lt;/span>:l,&lt;span class=\&quot;hljs-attr\&quot;>wadouri&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Le&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>wadors&lt;/span>:le,&lt;span class=\&quot;hljs-attr\&quot;>configure&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Se&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>convertColorSpace&lt;/span>:re,&lt;span class=\&quot;hljs-attr\&quot;>createImage&lt;/span>:oe,&lt;span class=\&quot;hljs-attr\&quot;>decodeImageFrame&lt;/span>:$,&lt;span class=\&quot;hljs-attr\&quot;>decodeJPEGBaseline8BitColor&lt;/span>:Y,&lt;span class=\&quot;hljs-attr\&quot;>getImageFrame&lt;/span>:O,&lt;span class=\&quot;hljs-attr\&quot;>getMinMax&lt;/span>:z.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>isColorImage&lt;/span>:ee,&lt;span class=\&quot;hljs-attr\&quot;>isJPEGBaseline8BitColor&lt;/span>:ae,&lt;span class=\&quot;hljs-attr\&quot;>webWorkerManager&lt;/span>:J,&lt;span class=\&quot;hljs-attr\&quot;>version&lt;/span>:&lt;span class=\&quot;hljs-title class_\&quot;>Ee&lt;/span>.&lt;span class=\&quot;hljs-property\&quot;>a&lt;/span>,&lt;span class=\&quot;hljs-attr\&quot;>internal&lt;/span>:L,&lt;span class=\&quot;hljs-attr\&quot;>external&lt;/span>:fe};t.&lt;span class=\&quot;hljs-property\&quot;>default&lt;/span>=&lt;span class=\&quot;hljs-title class_\&quot;>Oe&lt;/span>}])});\n&lt;span class=\&quot;hljs-comment\&quot;>//# sourceMappingURL=cornerstoneWADOImageLoader.min.js.map&lt;/span>&quot;,&quot;numLines&quot;:3}}"><div class="flex relative bg-white font-mono text-sm leading-6"><div class="py-4 border-b border-x border-slate-300 bg-slate-100 text-right select-none"><div><div class="relative"><a id="L1" href="#L1" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">1</a></div></div><div><div class="relative"><a id="L2" href="#L2" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">2</a></div></div><div><div class="relative"><a id="L3" href="#L3" class="inline-block w-full pl-4 sm:pl-6 pr-2 text-slate-600 hover:text-slate-950 outline-none">3</a></div></div></div><div class="py-4 pl-4 pr-6 relative border-b border-r border-slate-300 flex-grow whitespace-pre overflow-x-auto" style="tab-size:2;"><span class="hljs-comment">/*! cornerstone-wado-image-loader - 2.2.4 - 2019-09-05 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstoneWADOImageLoader */</span>
!<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">exports</span>&amp;&amp;<span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">module</span>?<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>=<span class="hljs-title function_">t</span>():<span class="hljs-string">&quot;function&quot;</span>==<span class="hljs-keyword">typeof</span> define&amp;&amp;define.<span class="hljs-property">amd</span>?<span class="hljs-title function_">define</span>(<span class="hljs-string">&quot;cornerstoneWADOImageLoader&quot;</span>,[],t):<span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">exports</span>?<span class="hljs-built_in">exports</span>.<span class="hljs-property">cornerstoneWADOImageLoader</span>=<span class="hljs-title function_">t</span>():e.<span class="hljs-property">cornerstoneWADOImageLoader</span>=<span class="hljs-title function_">t</span>()}(<span class="hljs-variable language_">this</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>){<span class="hljs-keyword">var</span> a={};<span class="hljs-keyword">function</span> <span class="hljs-title function_">n</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(a[e])<span class="hljs-keyword">return</span> a[e].<span class="hljs-property">exports</span>;<span class="hljs-keyword">var</span> t=a[e]={<span class="hljs-attr">i</span>:e,<span class="hljs-attr">l</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">exports</span>:{}};<span class="hljs-keyword">return</span> r[e].<span class="hljs-title function_">call</span>(t.<span class="hljs-property">exports</span>,t,t.<span class="hljs-property">exports</span>,n),t.<span class="hljs-property">l</span>=!<span class="hljs-number">0</span>,t.<span class="hljs-property">exports</span>}<span class="hljs-keyword">return</span> n.<span class="hljs-property">m</span>=r,n.<span class="hljs-property">c</span>=a,n.<span class="hljs-property">d</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){n.<span class="hljs-title function_">o</span>(e,t)||<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(e,t,{<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">get</span>:r})},n.<span class="hljs-property">r</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-string">&quot;undefined&quot;</span>!=<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span>&amp;&amp;<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toStringTag</span>&amp;&amp;<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(e,<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toStringTag</span>,{<span class="hljs-attr">value</span>:<span class="hljs-string">&quot;Module&quot;</span>}),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(e,<span class="hljs-string">&quot;__esModule&quot;</span>,{<span class="hljs-attr">value</span>:!<span class="hljs-number">0</span>})},n.<span class="hljs-property">t</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">t,e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>&amp;e&amp;&amp;(t=<span class="hljs-title function_">n</span>(t)),<span class="hljs-number">8</span>&amp;e)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">if</span>(<span class="hljs-number">4</span>&amp;e&amp;&amp;<span class="hljs-string">&quot;object&quot;</span>==<span class="hljs-keyword">typeof</span> t&amp;&amp;t&amp;&amp;t.<span class="hljs-property">__esModule</span>)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">var</span> r=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>);<span class="hljs-keyword">if</span>(n.<span class="hljs-title function_">r</span>(r),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(r,<span class="hljs-string">&quot;default&quot;</span>,{<span class="hljs-attr">enumerable</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">value</span>:t}),<span class="hljs-number">2</span>&amp;e&amp;&amp;<span class="hljs-string">&quot;string&quot;</span>!=<span class="hljs-keyword">typeof</span> t)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a <span class="hljs-keyword">in</span> t)n.<span class="hljs-title function_">d</span>(r,a,<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> t[e]}.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>,a));<span class="hljs-keyword">return</span> r},n.<span class="hljs-property">n</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=e&amp;&amp;e.<span class="hljs-property">__esModule</span>?<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> e.<span class="hljs-property">default</span>}:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> e};<span class="hljs-keyword">return</span> n.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;a&quot;</span>,t),t},n.<span class="hljs-property">o</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(e,t)},n.<span class="hljs-property">p</span>=<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-title function_">n</span>(n.<span class="hljs-property">s</span>=<span class="hljs-number">6</span>)}([<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;t.<span class="hljs-property">a</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t,r=e[<span class="hljs-number">0</span>],a=e[<span class="hljs-number">0</span>],n=e.<span class="hljs-property">length</span>,o=<span class="hljs-number">1</span>;o&lt;n;o++)t=e[o],r=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(r,t),a=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(a,t);<span class="hljs-keyword">return</span>{<span class="hljs-attr">min</span>:r,<span class="hljs-attr">max</span>:a}}},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> m;<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;undefined&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">CharLS</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;No JPEG-LS decoder loaded&quot;</span>);<span class="hljs-keyword">if</span>(!(m||(m=<span class="hljs-title class_">CharLS</span>())&amp;&amp;m.<span class="hljs-property">_jpegls_decode</span>))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;JPEG-LS failed to initialize&quot;</span>)}r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> a}),t.<span class="hljs-property">a</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-title function_">a</span>();<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=m.<span class="hljs-title function_">_malloc</span>(e.<span class="hljs-property">length</span>);m.<span class="hljs-title function_">writeArrayToMemory</span>(e,r);<span class="hljs-keyword">var</span> a=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),n=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),o=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),i=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),l=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),s=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),u=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),c=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),f=m.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),d={<span class="hljs-attr">result</span>:m.<span class="hljs-title function_">ccall</span>(<span class="hljs-string">&quot;jpegls_decode&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,[<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>],[r,e.<span class="hljs-property">length</span>,a,n,o,i,l,s,c,u,f]),<span class="hljs-attr">width</span>:m.<span class="hljs-title function_">getValue</span>(o,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">height</span>:m.<span class="hljs-title function_">getValue</span>(i,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">bitsPerSample</span>:m.<span class="hljs-title function_">getValue</span>(l,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">stride</span>:m.<span class="hljs-title function_">getValue</span>(s,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">components</span>:m.<span class="hljs-title function_">getValue</span>(c,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">allowedLossyError</span>:m.<span class="hljs-title function_">getValue</span>(u,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">interleaveMode</span>:m.<span class="hljs-title function_">getValue</span>(f,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">pixelData</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},p=m.<span class="hljs-title function_">getValue</span>(a,<span class="hljs-string">&quot;*&quot;</span>);<span class="hljs-keyword">return</span> d.<span class="hljs-property">bitsPerSample</span>&lt;=<span class="hljs-number">8</span>?(d.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(d.<span class="hljs-property">width</span>*d.<span class="hljs-property">height</span>*d.<span class="hljs-property">components</span>),d.<span class="hljs-property">pixelData</span>.<span class="hljs-title function_">set</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(m.<span class="hljs-property">HEAP8</span>.<span class="hljs-property">buffer</span>,p,d.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>))):t?(d.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(d.<span class="hljs-property">width</span>*d.<span class="hljs-property">height</span>*d.<span class="hljs-property">components</span>),d.<span class="hljs-property">pixelData</span>.<span class="hljs-title function_">set</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(m.<span class="hljs-property">HEAP16</span>.<span class="hljs-property">buffer</span>,p,d.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>))):(d.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(d.<span class="hljs-property">width</span>*d.<span class="hljs-property">height</span>*d.<span class="hljs-property">components</span>),d.<span class="hljs-property">pixelData</span>.<span class="hljs-title function_">set</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(m.<span class="hljs-property">HEAP16</span>.<span class="hljs-property">buffer</span>,p,d.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>))),m.<span class="hljs-title function_">_free</span>(r),m.<span class="hljs-title function_">_free</span>(p),m.<span class="hljs-title function_">_free</span>(a),m.<span class="hljs-title function_">_free</span>(n),m.<span class="hljs-title function_">_free</span>(o),m.<span class="hljs-title function_">_free</span>(i),m.<span class="hljs-title function_">_free</span>(l),m.<span class="hljs-title function_">_free</span>(s),m.<span class="hljs-title function_">_free</span>(c),m.<span class="hljs-title function_">_free</span>(f),d}(t,<span class="hljs-number">1</span>===e.<span class="hljs-property">pixelRepresentation</span>);<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==r.<span class="hljs-property">result</span>&amp;&amp;<span class="hljs-number">6</span>!==r.<span class="hljs-property">result</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;JPEG-LS decoder failed to decode frame (error code &quot;</span>.<span class="hljs-title function_">concat</span>(r.<span class="hljs-property">result</span>,<span class="hljs-string">&quot;)&quot;</span>));<span class="hljs-keyword">return</span> e.<span class="hljs-property">columns</span>=r.<span class="hljs-property">width</span>,e.<span class="hljs-property">rows</span>=r.<span class="hljs-property">height</span>,e.<span class="hljs-property">pixelData</span>=r.<span class="hljs-property">pixelData</span>,e}},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> h;<span class="hljs-keyword">function</span> <span class="hljs-title function_">n</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">var</span> a=h.<span class="hljs-title function_">_malloc</span>(e.<span class="hljs-property">length</span>);h.<span class="hljs-title function_">writeArrayToMemory</span>(e,a);<span class="hljs-keyword">var</span> n=h.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),o=h.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),i=h.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),l=h.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),s=h.<span class="hljs-title function_">_malloc</span>(<span class="hljs-number">4</span>),u=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>!==h.<span class="hljs-title function_">ccall</span>(<span class="hljs-string">&quot;jp2_decode&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,[<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>,<span class="hljs-string">&quot;number&quot;</span>],[a,e.<span class="hljs-property">length</span>,n,o,i,l,s]))<span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;[opj_decode] decoding failed!&quot;</span>),h.<span class="hljs-title function_">_free</span>(a),h.<span class="hljs-title function_">_free</span>(h.<span class="hljs-title function_">getValue</span>(n,<span class="hljs-string">&quot;*&quot;</span>)),h.<span class="hljs-title function_">_free</span>(i),h.<span class="hljs-title function_">_free</span>(l),h.<span class="hljs-title function_">_free</span>(o),<span class="hljs-keyword">void</span> h.<span class="hljs-title function_">_free</span>(s);<span class="hljs-keyword">var</span> c=h.<span class="hljs-title function_">getValue</span>(n,<span class="hljs-string">&quot;*&quot;</span>),f={<span class="hljs-attr">length</span>:h.<span class="hljs-title function_">getValue</span>(o,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">sx</span>:h.<span class="hljs-title function_">getValue</span>(i,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">sy</span>:h.<span class="hljs-title function_">getValue</span>(l,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">nbChannels</span>:h.<span class="hljs-title function_">getValue</span>(s,<span class="hljs-string">&quot;i32&quot;</span>),<span class="hljs-attr">perf_timetodecode</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">pixelData</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},d=f.<span class="hljs-property">sx</span>*f.<span class="hljs-property">sy</span>*f.<span class="hljs-property">nbChannels</span>,p=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int32Array</span>(h.<span class="hljs-property">HEAP32</span>.<span class="hljs-property">buffer</span>,c,d);<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>===t)<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Uint8Array</span>.<span class="hljs-property">from</span>)f.<span class="hljs-property">pixelData</span>=<span class="hljs-title class_">Uint8Array</span>.<span class="hljs-title function_">from</span>(p);<span class="hljs-keyword">else</span>{f.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(d);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> m=<span class="hljs-number">0</span>;m&lt;d;m++)f.<span class="hljs-property">pixelData</span>[m]=p[m]}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(r)<span class="hljs-keyword">if</span>(<span class="hljs-title class_">Int16Array</span>.<span class="hljs-property">from</span>)f.<span class="hljs-property">pixelData</span>=<span class="hljs-title class_">Int16Array</span>.<span class="hljs-title function_">from</span>(p);<span class="hljs-keyword">else</span>{f.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(d);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> g=<span class="hljs-number">0</span>;g&lt;d;g++)f.<span class="hljs-property">pixelData</span>[g]=p[g]}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Uint16Array</span>.<span class="hljs-property">from</span>)f.<span class="hljs-property">pixelData</span>=<span class="hljs-title class_">Uint16Array</span>.<span class="hljs-title function_">from</span>(p);<span class="hljs-keyword">else</span>{f.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(d);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v=<span class="hljs-number">0</span>;v&lt;d;v++)f.<span class="hljs-property">pixelData</span>[v]=p[v]}<span class="hljs-keyword">var</span> x=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">return</span> f.<span class="hljs-property">perf_timetodecode</span>=x-u,h.<span class="hljs-title function_">_free</span>(a),h.<span class="hljs-title function_">_free</span>(n),h.<span class="hljs-title function_">_free</span>(c),h.<span class="hljs-title function_">_free</span>(o),h.<span class="hljs-title function_">_free</span>(i),h.<span class="hljs-title function_">_free</span>(l),h.<span class="hljs-title function_">_free</span>(s),f}(t,e.<span class="hljs-property">bitsAllocated</span>&lt;=<span class="hljs-number">8</span>?<span class="hljs-number">1</span>:<span class="hljs-number">2</span>,<span class="hljs-number">1</span>===e.<span class="hljs-property">pixelRepresentation</span>);<span class="hljs-keyword">return</span> e.<span class="hljs-property">columns</span>=r.<span class="hljs-property">sx</span>,e.<span class="hljs-property">rows</span>=r.<span class="hljs-property">sy</span>,e.<span class="hljs-property">pixelData</span>=r.<span class="hljs-property">pixelData</span>,<span class="hljs-number">1</span>&lt;r.<span class="hljs-property">nbChannels</span>&amp;&amp;(e.<span class="hljs-property">photometricInterpretation</span>=<span class="hljs-string">&quot;RGB&quot;</span>),e}<span class="hljs-keyword">function</span> <span class="hljs-title function_">o</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(!e.<span class="hljs-property">usePDFJS</span>&amp;&amp;<span class="hljs-string">&quot;undefined&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">OpenJPEG</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;OpenJPEG decoder not loaded&quot;</span>);<span class="hljs-keyword">if</span>(!(h||(h=<span class="hljs-title class_">OpenJPEG</span>())&amp;&amp;h.<span class="hljs-property">_jp2_decode</span>))<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;OpenJPEG failed to initialize&quot;</span>)}r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;b&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> o}),t.<span class="hljs-property">a</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">var</span> a=<span class="hljs-number">3</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]:{};<span class="hljs-keyword">return</span> <span class="hljs-title function_">o</span>(r),a.<span class="hljs-property">usePDFJS</span>||r.<span class="hljs-property">usePDFJS</span>?<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">JpxImage</span>;r.<span class="hljs-title function_">parse</span>(t);<span class="hljs-keyword">var</span> a=r.<span class="hljs-property">tiles</span>.<span class="hljs-property">length</span>;<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>!==a)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;JPEG2000 decoder returned a tileCount of &quot;</span>.<span class="hljs-title function_">concat</span>(a,<span class="hljs-string">&quot;, when 1 is expected&quot;</span>));<span class="hljs-keyword">return</span> e.<span class="hljs-property">columns</span>=r.<span class="hljs-property">width</span>,e.<span class="hljs-property">rows</span>=r.<span class="hljs-property">height</span>,e.<span class="hljs-property">pixelData</span>=r.<span class="hljs-property">tiles</span>[<span class="hljs-number">0</span>].<span class="hljs-property">items</span>,e}(e,t):<span class="hljs-title function_">n</span>(e,t)}},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;t.<span class="hljs-property">a</span>=<span class="hljs-string">&quot;2.2.4&quot;</span>},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;a&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> a});<span class="hljs-keyword">var</span> n=<span class="hljs-title function_">r</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=!(<span class="hljs-number">1</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>])||<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>],r=<span class="hljs-title class_">Object</span>(n.<span class="hljs-property">a</span>)(e.<span class="hljs-property">pixelData</span>),a=!(<span class="hljs-title function_">o</span>(e.<span class="hljs-property">smallestPixelValue</span>)&amp;&amp;<span class="hljs-title function_">o</span>(e.<span class="hljs-property">largestPixelValue</span>));!<span class="hljs-number">0</span>!==t||a?(e.<span class="hljs-property">smallestPixelValue</span>=r.<span class="hljs-property">min</span>,e.<span class="hljs-property">largestPixelValue</span>=r.<span class="hljs-property">max</span>):(e.<span class="hljs-property">smallestPixelValue</span>!==r.<span class="hljs-property">min</span>&amp;&amp;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably.&quot;</span>),e.<span class="hljs-property">largestPixelValue</span>!==r.<span class="hljs-property">max</span>&amp;&amp;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&quot;Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably.&quot;</span>))}<span class="hljs-keyword">function</span> <span class="hljs-title function_">o</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span><span class="hljs-string">&quot;number&quot;</span>==<span class="hljs-keyword">typeof</span> e}},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;<span class="hljs-keyword">var</span> c=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=t.<span class="hljs-property">buffer</span>,a=t.<span class="hljs-property">byteOffset</span>,n=t.<span class="hljs-property">length</span>;<span class="hljs-keyword">return</span> <span class="hljs-number">16</span>===e.<span class="hljs-property">bitsAllocated</span>?(a%<span class="hljs-number">2</span>&amp;&amp;(r=r.<span class="hljs-title function_">slice</span>(a),a=<span class="hljs-number">0</span>),<span class="hljs-number">0</span>===e.<span class="hljs-property">pixelRepresentation</span>?e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(r,a,n/<span class="hljs-number">2</span>):e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(r,a,n/<span class="hljs-number">2</span>)):<span class="hljs-number">8</span>===e.<span class="hljs-property">bitsAllocated</span>||<span class="hljs-number">1</span>===e.<span class="hljs-property">bitsAllocated</span>?e.<span class="hljs-property">pixelData</span>=<span class="hljs-attr">t</span>:<span class="hljs-number">32</span>===e.<span class="hljs-property">bitsAllocated</span>&amp;&amp;(a%<span class="hljs-number">2</span>&amp;&amp;(r=r.<span class="hljs-title function_">slice</span>(a),a=<span class="hljs-number">0</span>),e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(r,a,n/<span class="hljs-number">4</span>)),e};<span class="hljs-keyword">var</span> f=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-number">16</span>===e.<span class="hljs-property">bitsAllocated</span>){<span class="hljs-keyword">var</span> r=t.<span class="hljs-property">buffer</span>,a=t.<span class="hljs-property">byteOffset</span>,n=t.<span class="hljs-property">length</span>;a%<span class="hljs-number">2</span>&amp;&amp;(r=r.<span class="hljs-title function_">slice</span>(a),a=<span class="hljs-number">0</span>),<span class="hljs-number">0</span>===e.<span class="hljs-property">pixelRepresentation</span>?e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(r,a,n/<span class="hljs-number">2</span>):e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(r,a,n/<span class="hljs-number">2</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> o=<span class="hljs-number">0</span>;o&lt;e.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>;o++)e.<span class="hljs-property">pixelData</span>[o]=(<span class="hljs-number">255</span>&amp;(i=e.<span class="hljs-property">pixelData</span>[o]))&lt;&lt;<span class="hljs-number">8</span>|i&gt;&gt;<span class="hljs-number">8</span>&amp;<span class="hljs-number">255</span>}<span class="hljs-keyword">else</span> <span class="hljs-number">8</span>===e.<span class="hljs-property">bitsAllocated</span>&amp;&amp;(e.<span class="hljs-property">pixelData</span>=t);<span class="hljs-keyword">var</span> i;<span class="hljs-keyword">return</span> e};<span class="hljs-keyword">var</span> d=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-number">8</span>===e.<span class="hljs-property">bitsAllocated</span>)<span class="hljs-keyword">return</span> e.<span class="hljs-property">planarConfiguration</span>?<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=t,a=e.<span class="hljs-property">rows</span>*e.<span class="hljs-property">columns</span>,n=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(a*e.<span class="hljs-property">samplesPerPixel</span>),o=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),l=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(n),s=<span class="hljs-number">0</span>,u=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">0</span>,!<span class="hljs-number">0</span>),c=<span class="hljs-number">0</span>;c&lt;u;++c){s=c*a;<span class="hljs-keyword">var</span> f=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(c+<span class="hljs-number">1</span>),!<span class="hljs-number">0</span>),d=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(c+<span class="hljs-number">2</span>),!<span class="hljs-number">0</span>);<span class="hljs-number">0</span>===d&amp;&amp;(d=r.<span class="hljs-property">length</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> p=a*u;f&lt;d;){<span class="hljs-keyword">var</span> m=i[f++];<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>&lt;=m&amp;&amp;m&lt;=<span class="hljs-number">127</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> g=<span class="hljs-number">0</span>;g&lt;m+<span class="hljs-number">1</span>&amp;&amp;s&lt;p;++g)l[s]=i[f++],s++;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(m&lt;=-<span class="hljs-number">1</span>&amp;&amp;-<span class="hljs-number">127</span>&lt;=m)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v=i[f++],x=<span class="hljs-number">0</span>;x&lt;<span class="hljs-number">1</span>-m&amp;&amp;s&lt;p;++x)l[s]=v,s++}}<span class="hljs-keyword">return</span> e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(n),e}(e,t):<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=t,a=e.<span class="hljs-property">rows</span>*e.<span class="hljs-property">columns</span>,n=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(a*e.<span class="hljs-property">samplesPerPixel</span>),o=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),l=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(n),s=<span class="hljs-number">0</span>,u=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">0</span>,!<span class="hljs-number">0</span>),c=<span class="hljs-number">0</span>;c&lt;u;++c){s=c;<span class="hljs-keyword">var</span> f=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(c+<span class="hljs-number">1</span>),!<span class="hljs-number">0</span>),d=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(c+<span class="hljs-number">2</span>),!<span class="hljs-number">0</span>);<span class="hljs-number">0</span>===d&amp;&amp;(d=r.<span class="hljs-property">length</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> p=a*u;f&lt;d;){<span class="hljs-keyword">var</span> m=i[f++];<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>&lt;=m&amp;&amp;m&lt;=<span class="hljs-number">127</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> g=<span class="hljs-number">0</span>;g&lt;m+<span class="hljs-number">1</span>&amp;&amp;s&lt;p;++g)l[s]=i[f++],s+=e.<span class="hljs-property">samplesPerPixel</span>;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(m&lt;=-<span class="hljs-number">1</span>&amp;&amp;-<span class="hljs-number">127</span>&lt;=m)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v=i[f++],x=<span class="hljs-number">0</span>;x&lt;<span class="hljs-number">1</span>-m&amp;&amp;s&lt;p;++x)l[s]=v,s+=e.<span class="hljs-property">samplesPerPixel</span>}}<span class="hljs-keyword">return</span> e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(n),e}(e,t);<span class="hljs-keyword">if</span>(<span class="hljs-number">16</span>===e.<span class="hljs-property">bitsAllocated</span>)<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=t,a=e.<span class="hljs-property">rows</span>*e.<span class="hljs-property">columns</span>,n=<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(a*e.<span class="hljs-property">samplesPerPixel</span>*<span class="hljs-number">2</span>),o=<span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(r.<span class="hljs-property">buffer</span>,r.<span class="hljs-property">byteOffset</span>),l=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int8Array</span>(n),s=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">0</span>,!<span class="hljs-number">0</span>),u=<span class="hljs-number">0</span>;u&lt;s;++u){<span class="hljs-keyword">var</span> c=<span class="hljs-number">0</span>,f=<span class="hljs-number">0</span>===u?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>,d=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(u+<span class="hljs-number">1</span>),!<span class="hljs-number">0</span>),p=o.<span class="hljs-title function_">getInt32</span>(<span class="hljs-number">4</span>*(u+<span class="hljs-number">2</span>),!<span class="hljs-number">0</span>);<span class="hljs-keyword">for</span>(<span class="hljs-number">0</span>===p&amp;&amp;(p=r.<span class="hljs-property">length</span>);d&lt;p;){<span class="hljs-keyword">var</span> m=i[d++];<span class="hljs-keyword">if</span>(<span class="hljs-number">0</span>&lt;=m&amp;&amp;m&lt;=<span class="hljs-number">127</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> g=<span class="hljs-number">0</span>;g&lt;m+<span class="hljs-number">1</span>&amp;&amp;c&lt;a;++g)l[<span class="hljs-number">2</span>*c+f]=i[d++],c++;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(m&lt;=-<span class="hljs-number">1</span>&amp;&amp;-<span class="hljs-number">127</span>&lt;=m)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> v=i[d++],x=<span class="hljs-number">0</span>;x&lt;<span class="hljs-number">1</span>-m&amp;&amp;c&lt;a;++x)l[<span class="hljs-number">2</span>*c+f]=v,c++}}<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===e.<span class="hljs-property">pixelRepresentation</span>?e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(n):e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(n),e}(e,t);<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;unsupported pixel format for RLE&quot;</span>)};<span class="hljs-keyword">var</span> p=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;undefined&quot;</span>==<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">JpegImage</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;No JPEG Baseline decoder loaded&quot;</span>);<span class="hljs-keyword">var</span> r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">JpegImage</span>;<span class="hljs-keyword">return</span> r.<span class="hljs-title function_">parse</span>(t),r.<span class="hljs-property">colorTransform</span>=!<span class="hljs-number">1</span>,<span class="hljs-number">8</span>===e.<span class="hljs-property">bitsAllocated</span>?(e.<span class="hljs-property">pixelData</span>=r.<span class="hljs-title function_">getData</span>(e.<span class="hljs-property">columns</span>,e.<span class="hljs-property">rows</span>),e):<span class="hljs-number">16</span>===e.<span class="hljs-property">bitsAllocated</span>?(e.<span class="hljs-property">pixelData</span>=r.<span class="hljs-title function_">getData16</span>(e.<span class="hljs-property">columns</span>,e.<span class="hljs-property">rows</span>),e):<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>};<span class="hljs-keyword">var</span> m=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;undefined&quot;</span>==<span class="hljs-keyword">typeof</span> jpeg||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===jpeg.<span class="hljs-property">lossless</span>||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===jpeg.<span class="hljs-property">lossless</span>.<span class="hljs-property">Decoder</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;No JPEG Lossless decoder loaded&quot;</span>);<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">bitsAllocated</span>&lt;=<span class="hljs-number">8</span>?<span class="hljs-number">1</span>:<span class="hljs-number">2</span>,a=t.<span class="hljs-property">buffer</span>,n=(<span class="hljs-keyword">new</span> jpeg.<span class="hljs-property">lossless</span>.<span class="hljs-property">Decoder</span>).<span class="hljs-title function_">decode</span>(a,t.<span class="hljs-property">byteOffset</span>,t.<span class="hljs-property">length</span>,r);<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>===e.<span class="hljs-property">pixelRepresentation</span>?<span class="hljs-number">16</span>===e.<span class="hljs-property">bitsAllocated</span>?e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(n.<span class="hljs-property">buffer</span>):e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(n.<span class="hljs-property">buffer</span>):e.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(n.<span class="hljs-property">buffer</span>),e},g=<span class="hljs-title function_">r</span>(<span class="hljs-number">1</span>),v=<span class="hljs-title function_">r</span>(<span class="hljs-number">2</span>);t.<span class="hljs-property">a</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r,a,n</span>){<span class="hljs-keyword">var</span> o=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2&quot;</span>===t)e=<span class="hljs-title function_">c</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.1&quot;</span>===t)e=<span class="hljs-title function_">c</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.2&quot;</span>===t)e=<span class="hljs-title function_">f</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.1.99&quot;</span>===t)e=<span class="hljs-title function_">c</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.5&quot;</span>===t)e=<span class="hljs-title function_">d</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.50&quot;</span>===t)e=<span class="hljs-title function_">p</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.51&quot;</span>===t)e=<span class="hljs-title function_">p</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.57&quot;</span>===t)e=<span class="hljs-title function_">m</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.70&quot;</span>===t)e=<span class="hljs-title function_">m</span>(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.80&quot;</span>===t)e=<span class="hljs-title class_">Object</span>(g.<span class="hljs-property">a</span>)(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.81&quot;</span>===t)e=<span class="hljs-title class_">Object</span>(g.<span class="hljs-property">a</span>)(e,r);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.90&quot;</span>===t)e=<span class="hljs-title class_">Object</span>(v.<span class="hljs-property">a</span>)(e,r,a,n);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.1.2.4.91&quot;</span>!==t)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;no decoder for transfer syntax &quot;</span>.<span class="hljs-title function_">concat</span>(t));e=<span class="hljs-title class_">Object</span>(v.<span class="hljs-property">a</span>)(e,r,a,n)}<span class="hljs-keyword">var</span> i=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==e.<span class="hljs-property">pixelRepresentation</span>&amp;&amp;<span class="hljs-number">1</span>===e.<span class="hljs-property">pixelRepresentation</span>,l=i&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==e.<span class="hljs-property">bitsStored</span>?<span class="hljs-number">32</span>-e.<span class="hljs-property">bitsStored</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;<span class="hljs-keyword">if</span>(i&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==l)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> s=<span class="hljs-number">0</span>;s&lt;e.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>;s++)e.<span class="hljs-property">pixelData</span>[s]=e.<span class="hljs-property">pixelData</span>[s]&lt;&lt;l&gt;&gt;l;<span class="hljs-keyword">var</span> u=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">return</span> e.<span class="hljs-property">decodeTimeInMS</span>=u-o,e}},<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-string">&quot;use strict&quot;</span>;r.<span class="hljs-title function_">r</span>(t);<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: rgbBuffer must not be undefined&quot;</span>);<span class="hljs-keyword">if</span>(e.<span class="hljs-property">length</span>%<span class="hljs-number">3</span>!=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: rgbBuffer length must be divisible by 3&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">length</span>/<span class="hljs-number">3</span>,a=<span class="hljs-number">0</span>,n=<span class="hljs-number">0</span>,o=<span class="hljs-number">0</span>;o&lt;r;o++)t[n++]=e[a++],t[n++]=e[a++],t[n++]=e[a++],t[n++]=<span class="hljs-number">255</span>},n=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: rgbBuffer must not be undefined&quot;</span>);<span class="hljs-keyword">if</span>(e.<span class="hljs-property">length</span>%<span class="hljs-number">3</span>!=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: rgbBuffer length must be divisible by 3&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">length</span>/<span class="hljs-number">3</span>,a=<span class="hljs-number">0</span>,n=<span class="hljs-number">0</span>,o=r,i=<span class="hljs-number">2</span>*r,l=<span class="hljs-number">0</span>;l&lt;r;l++)t[a++]=e[n++],t[a++]=e[o++],t[a++]=e[i++],t[a++]=<span class="hljs-number">255</span>},o=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: ybrBuffer must not be undefined&quot;</span>);<span class="hljs-keyword">if</span>(e.<span class="hljs-property">length</span>%<span class="hljs-number">3</span>!=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: ybrBuffer length must be divisble by 3&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">length</span>/<span class="hljs-number">3</span>,a=<span class="hljs-number">0</span>,n=<span class="hljs-number">0</span>,o=<span class="hljs-number">0</span>;o&lt;r;o++){<span class="hljs-keyword">var</span> i=e[a++],l=e[a++],s=e[a++];t[n++]=i+<span class="hljs-number">1.402</span>*(s-<span class="hljs-number">128</span>),t[n++]=i-<span class="hljs-number">.34414</span>*(l-<span class="hljs-number">128</span>)-<span class="hljs-number">.71414</span>*(s-<span class="hljs-number">128</span>),t[n++]=i+<span class="hljs-number">1.772</span>*(l-<span class="hljs-number">128</span>),t[n++]=<span class="hljs-number">255</span>}},i=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: ybrBuffer must not be undefined&quot;</span>);<span class="hljs-keyword">if</span>(e.<span class="hljs-property">length</span>%<span class="hljs-number">3</span>!=<span class="hljs-number">0</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;decodeRGB: ybrBuffer length must be divisble by 3&quot;</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">length</span>/<span class="hljs-number">3</span>,a=<span class="hljs-number">0</span>,n=<span class="hljs-number">0</span>,o=r,i=<span class="hljs-number">2</span>*r,l=<span class="hljs-number">0</span>;l&lt;r;l++){<span class="hljs-keyword">var</span> s=e[n++],u=e[o++],c=e[i++];t[a++]=s+<span class="hljs-number">1.402</span>*(c-<span class="hljs-number">128</span>),t[a++]=s-<span class="hljs-number">.34414</span>*(u-<span class="hljs-number">128</span>)-<span class="hljs-number">.71414</span>*(c-<span class="hljs-number">128</span>),t[a++]=s+<span class="hljs-number">1.772</span>*(u-<span class="hljs-number">128</span>),t[a++]=<span class="hljs-number">255</span>}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">x</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">length</span>,a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8ClampedArray</span>(r),n=<span class="hljs-number">0</span>;n&lt;r;++n)a[n]=e[n]&gt;&gt;t;<span class="hljs-keyword">return</span> a}<span class="hljs-keyword">var</span> l=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=e.<span class="hljs-property">columns</span>*e.<span class="hljs-property">rows</span>,a=e.<span class="hljs-property">pixelData</span>,n=e.<span class="hljs-property">redPaletteColorLookupTableData</span>,o=e.<span class="hljs-property">greenPaletteColorLookupTableData</span>,i=e.<span class="hljs-property">bluePaletteColorLookupTableData</span>,l=e.<span class="hljs-property">redPaletteColorLookupTableData</span>.<span class="hljs-property">length</span>,s=<span class="hljs-number">0</span>,u=<span class="hljs-number">0</span>,c=e.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">1</span>],f=<span class="hljs-number">8</span>===e.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">2</span>]?<span class="hljs-number">0</span>:<span class="hljs-number">8</span>,d=<span class="hljs-title function_">x</span>(n,f),p=<span class="hljs-title function_">x</span>(o,f),m=<span class="hljs-title function_">x</span>(i,f),g=<span class="hljs-number">0</span>;g&lt;r;++g){<span class="hljs-keyword">var</span> v=a[s++];v&lt;c?v=<span class="hljs-number">0</span>:c+l-<span class="hljs-number">1</span>&lt;v?v=l-<span class="hljs-number">1</span>:v-=c,t[u++]=d[v],t[u++]=p[v],t[u++]=m[v],t[u++]=<span class="hljs-number">255</span>}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">s</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(e.<span class="hljs-property">elements</span>[t]&amp;&amp;<span class="hljs-number">6</span>===e.<span class="hljs-property">elements</span>[t].<span class="hljs-property">length</span>)<span class="hljs-keyword">return</span>[e.<span class="hljs-title function_">uint16</span>(t,<span class="hljs-number">0</span>),e.<span class="hljs-title function_">uint16</span>(t,<span class="hljs-number">1</span>),e.<span class="hljs-title function_">uint16</span>(t,<span class="hljs-number">2</span>)]}<span class="hljs-keyword">function</span> <span class="hljs-title function_">u</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=[],n=e.<span class="hljs-property">elements</span>[t],o=<span class="hljs-number">0</span>;o&lt;r[<span class="hljs-number">0</span>];o++)<span class="hljs-number">16</span>===r[<span class="hljs-number">2</span>]?a[o]=e.<span class="hljs-title function_">uint16</span>(t,o):a[o]=e.<span class="hljs-property">byteArray</span>[o+n.<span class="hljs-property">dataOffset</span>];<span class="hljs-keyword">return</span> a}<span class="hljs-keyword">var</span> g=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t,r,a,n={<span class="hljs-attr">samplesPerPixel</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280002&quot;</span>),<span class="hljs-attr">photometricInterpretation</span>:e.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00280004&quot;</span>),<span class="hljs-attr">rows</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280010&quot;</span>),<span class="hljs-attr">columns</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280011&quot;</span>),<span class="hljs-attr">bitsAllocated</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280100&quot;</span>),<span class="hljs-attr">bitsStored</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280101&quot;</span>),<span class="hljs-attr">highBit</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280102&quot;</span>),<span class="hljs-attr">pixelRepresentation</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280103&quot;</span>),<span class="hljs-attr">planarConfiguration</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280006&quot;</span>),<span class="hljs-attr">pixelAspectRatio</span>:e.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00280034&quot;</span>)};<span class="hljs-keyword">return</span> r=n,a=(t=e).<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280103&quot;</span>),r.<span class="hljs-property">largestPixelValue</span>=<span class="hljs-number">0</span>===a?(r.<span class="hljs-property">smallestPixelValue</span>=t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280106&quot;</span>),t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280107&quot;</span>)):(r.<span class="hljs-property">smallestPixelValue</span>=t.<span class="hljs-title function_">int16</span>(<span class="hljs-string">&quot;x00280106&quot;</span>),t.<span class="hljs-title function_">int16</span>(<span class="hljs-string">&quot;x00280107&quot;</span>)),<span class="hljs-string">&quot;PALETTE COLOR&quot;</span>===n.<span class="hljs-property">photometricInterpretation</span>&amp;&amp;e.<span class="hljs-property">elements</span>.<span class="hljs-property">x00281101</span>&amp;&amp;<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>=<span class="hljs-title function_">s</span>(e,<span class="hljs-string">&quot;x00281101&quot;</span>),t.<span class="hljs-property">greenPaletteColorLookupTableDescriptor</span>=<span class="hljs-title function_">s</span>(e,<span class="hljs-string">&quot;x00281102&quot;</span>),t.<span class="hljs-property">bluePaletteColorLookupTableDescriptor</span>=<span class="hljs-title function_">s</span>(e,<span class="hljs-string">&quot;x00281103&quot;</span>),<span class="hljs-number">0</span>===t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">0</span>]&amp;&amp;(t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">0</span>]=<span class="hljs-number">65536</span>,t.<span class="hljs-property">greenPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">0</span>]=<span class="hljs-number">65536</span>,t.<span class="hljs-property">bluePaletteColorLookupTableDescriptor</span>[<span class="hljs-number">0</span>]=<span class="hljs-number">65536</span>);<span class="hljs-keyword">var</span> r=t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">0</span>],a=e.<span class="hljs-property">elements</span>.<span class="hljs-property">x00281201</span>.<span class="hljs-property">length</span>===r?<span class="hljs-number">8</span>:<span class="hljs-number">16</span>;t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">2</span>]!==a&amp;&amp;(t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">2</span>]=a,t.<span class="hljs-property">greenPaletteColorLookupTableDescriptor</span>[<span class="hljs-number">2</span>]=a,t.<span class="hljs-property">bluePaletteColorLookupTableDescriptor</span>[<span class="hljs-number">2</span>]=a),t.<span class="hljs-property">redPaletteColorLookupTableData</span>=<span class="hljs-title function_">u</span>(e,<span class="hljs-string">&quot;x00281201&quot;</span>,t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>),t.<span class="hljs-property">greenPaletteColorLookupTableData</span>=<span class="hljs-title function_">u</span>(e,<span class="hljs-string">&quot;x00281202&quot;</span>,t.<span class="hljs-property">greenPaletteColorLookupTableDescriptor</span>),t.<span class="hljs-property">bluePaletteColorLookupTableData</span>=<span class="hljs-title function_">u</span>(e,<span class="hljs-string">&quot;x00281203&quot;</span>,t.<span class="hljs-property">bluePaletteColorLookupTableDescriptor</span>)}(e,n),n};<span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00283002&quot;</span>,<span class="hljs-number">0</span>);<span class="hljs-number">0</span>===r&amp;&amp;(r=<span class="hljs-number">65535</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a={<span class="hljs-attr">id</span>:<span class="hljs-string">&quot;1&quot;</span>,<span class="hljs-attr">firstValueMapped</span>:<span class="hljs-number">0</span>===e?t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00283002&quot;</span>,<span class="hljs-number">1</span>):t.<span class="hljs-title function_">int16</span>(<span class="hljs-string">&quot;x00283002&quot;</span>,<span class="hljs-number">1</span>),<span class="hljs-attr">numBitsPerEntry</span>:t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00283002&quot;</span>,<span class="hljs-number">2</span>),<span class="hljs-attr">lut</span>:[]},n=<span class="hljs-number">0</span>;n&lt;r;n++)a.<span class="hljs-property">lut</span>[n]=<span class="hljs-number">0</span>===e?t.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00283006&quot;</span>,n):t.<span class="hljs-title function_">int16</span>(<span class="hljs-string">&quot;x00283006&quot;</span>,n);<span class="hljs-keyword">return</span> a}<span class="hljs-keyword">var</span> v=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(t&amp;&amp;t.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=[],a=<span class="hljs-number">0</span>;a&lt;t.<span class="hljs-property">items</span>.<span class="hljs-property">length</span>;a++){<span class="hljs-keyword">var</span> n=<span class="hljs-title function_">c</span>(e,t.<span class="hljs-property">items</span>[a].<span class="hljs-property">dataSet</span>);n&amp;&amp;r.<span class="hljs-title function_">push</span>(n)}<span class="hljs-keyword">return</span> r}};<span class="hljs-keyword">var</span> h=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=e.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080016&quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;1.2.840.10008.5.1.4.1.1.2&quot;</span>===t||<span class="hljs-string">&quot;1.2.840.10008.5.1.4.1.1.2.1&quot;</span>===t)<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<span class="hljs-keyword">var</span> r,a,n,o=e.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00281052&quot;</span>),i=e.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00281053&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===o||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===i?e.<span class="hljs-property">elements</span>.<span class="hljs-property">x00283000</span>&amp;&amp;<span class="hljs-number">0</span>&lt;e.<span class="hljs-property">elements</span>.<span class="hljs-property">x00283000</span>.<span class="hljs-property">length</span>?<span class="hljs-number">0</span>:e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280103&quot;</span>):(a=(r=e).<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280103&quot;</span>),n=r.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280101&quot;</span>),(<span class="hljs-number">0</span>===a?<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>&lt;&lt;n-<span class="hljs-number">1</span>)*i+o&lt;<span class="hljs-number">0</span>?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>)};<span class="hljs-keyword">var</span> w=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">var</span> a=[],n=e.<span class="hljs-title function_">string</span>(t);<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">var</span> o=n.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;\\&quot;</span>);<span class="hljs-keyword">if</span>(!(r&amp;&amp;o.<span class="hljs-property">length</span>&lt;r)){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;o.<span class="hljs-property">length</span>;i++)a.<span class="hljs-title function_">push</span>(<span class="hljs-built_in">parseFloat</span>(o[i]));<span class="hljs-keyword">return</span> a}}};<span class="hljs-keyword">var</span> d=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">return</span> t=t||<span class="hljs-number">0</span>,e&amp;&amp;e.<span class="hljs-property">Value</span>?e.<span class="hljs-property">Value</span>.<span class="hljs-property">length</span>&lt;=t?<span class="hljs-attr">r</span>:e.<span class="hljs-property">Value</span>[t]:r};<span class="hljs-keyword">var</span> f=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">var</span> a=<span class="hljs-title function_">d</span>(e,t,r);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==a)<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(a)};<span class="hljs-keyword">var</span> p=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-title function_">d</span>(e,t);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==r)<span class="hljs-keyword">return</span> <span class="hljs-built_in">parseFloat</span>(r)};<span class="hljs-keyword">var</span> m=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(e&amp;&amp;e.<span class="hljs-property">Value</span>&amp;&amp;!(t&amp;&amp;e.<span class="hljs-property">Value</span>.<span class="hljs-property">length</span>&lt;t)){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=[],a=<span class="hljs-number">0</span>;a&lt;e.<span class="hljs-property">Value</span>.<span class="hljs-property">length</span>;a++)r.<span class="hljs-title function_">push</span>(<span class="hljs-built_in">parseFloat</span>(e.<span class="hljs-property">Value</span>[a]));<span class="hljs-keyword">return</span> r}},b=[];<span class="hljs-keyword">var</span> y={<span class="hljs-attr">add</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){b[e]=t},<span class="hljs-attr">get</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> b[e]},<span class="hljs-attr">remove</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){b[e]=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">purge</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){b=[]}};<span class="hljs-keyword">var</span> P=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=fe.<span class="hljs-property">dicomParser</span>,a=y.<span class="hljs-title function_">get</span>(t);<span class="hljs-keyword">if</span>(a){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;generalSeriesModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">modality</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00080060&quot;</span>]),<span class="hljs-attr">seriesInstanceUID</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;0020000e&quot;</span>]),<span class="hljs-attr">seriesNumber</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00200011&quot;</span>]),<span class="hljs-attr">studyInstanceUID</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;0020000d&quot;</span>]),<span class="hljs-attr">seriesDate</span>:r.<span class="hljs-title function_">parseDA</span>(<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00080021&quot;</span>])),<span class="hljs-attr">seriesTime</span>:r.<span class="hljs-title function_">parseTM</span>(<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00080031&quot;</span>],<span class="hljs-number">0</span>,<span class="hljs-string">&quot;&quot;</span>))};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;patientStudyModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">patientAge</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00101010&quot;</span>]),<span class="hljs-attr">patientSize</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00101020&quot;</span>]),<span class="hljs-attr">patientWeight</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00101030&quot;</span>])};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;imagePlaneModule&quot;</span>===e){<span class="hljs-keyword">var</span> n=<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00200037&quot;</span>],<span class="hljs-number">6</span>),o=<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00200032&quot;</span>],<span class="hljs-number">3</span>),i=<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00280030&quot;</span>],<span class="hljs-number">2</span>),l=<span class="hljs-literal">null</span>,s=<span class="hljs-literal">null</span>;i&amp;&amp;(s=i[<span class="hljs-number">0</span>],l=i[<span class="hljs-number">1</span>]);<span class="hljs-keyword">var</span> u=<span class="hljs-literal">null</span>,c=<span class="hljs-literal">null</span>;<span class="hljs-keyword">return</span> n&amp;&amp;(u=[<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">0</span>]),<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">1</span>]),<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">2</span>])],c=[<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">3</span>]),<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">4</span>]),<span class="hljs-built_in">parseFloat</span>(n[<span class="hljs-number">5</span>])]),{<span class="hljs-attr">frameOfReferenceUID</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00200052&quot;</span>]),<span class="hljs-attr">rows</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280010&quot;</span>]),<span class="hljs-attr">columns</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280011&quot;</span>]),<span class="hljs-attr">imageOrientationPatient</span>:n,<span class="hljs-attr">rowCosines</span>:u,<span class="hljs-attr">columnCosines</span>:c,<span class="hljs-attr">imagePositionPatient</span>:o,<span class="hljs-attr">sliceThickness</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00180050&quot;</span>]),<span class="hljs-attr">sliceLocation</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00201041&quot;</span>]),<span class="hljs-attr">pixelSpacing</span>:i,<span class="hljs-attr">rowPixelSpacing</span>:s,<span class="hljs-attr">columnPixelSpacing</span>:l}}<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;imagePixelModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">samplesPerPixel</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280002&quot;</span>]),<span class="hljs-attr">photometricInterpretation</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00280004&quot;</span>]),<span class="hljs-attr">rows</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280010&quot;</span>]),<span class="hljs-attr">columns</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280011&quot;</span>]),<span class="hljs-attr">bitsAllocated</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280100&quot;</span>]),<span class="hljs-attr">bitsStored</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280101&quot;</span>]),<span class="hljs-attr">highBit</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00280102&quot;</span>]),<span class="hljs-attr">pixelRepresentation</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280103&quot;</span>]),<span class="hljs-attr">planarConfiguration</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280006&quot;</span>]),<span class="hljs-attr">pixelAspectRatio</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00280034&quot;</span>]),<span class="hljs-attr">smallestPixelValue</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280106&quot;</span>]),<span class="hljs-attr">largestPixelValue</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00280107&quot;</span>]),<span class="hljs-attr">redPaletteColorLookupTableDescriptor</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281101&quot;</span>]),<span class="hljs-attr">greenPaletteColorLookupTableDescriptor</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281102&quot;</span>]),<span class="hljs-attr">bluePaletteColorLookupTableDescriptor</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281103&quot;</span>]),<span class="hljs-attr">redPaletteColorLookupTableData</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281201&quot;</span>]),<span class="hljs-attr">greenPaletteColorLookupTableData</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281202&quot;</span>]),<span class="hljs-attr">bluePaletteColorLookupTableData</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281203&quot;</span>])};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;voiLutModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">windowCenter</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281050&quot;</span>],<span class="hljs-number">1</span>),<span class="hljs-attr">windowWidth</span>:<span class="hljs-title function_">m</span>(a[<span class="hljs-string">&quot;00281051&quot;</span>],<span class="hljs-number">1</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;modalityLutModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">rescaleIntercept</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00281052&quot;</span>]),<span class="hljs-attr">rescaleSlope</span>:<span class="hljs-title function_">p</span>(a[<span class="hljs-string">&quot;00281053&quot;</span>]),<span class="hljs-attr">rescaleType</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00281054&quot;</span>])};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;sopCommonModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">sopClassUID</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00080016&quot;</span>]),<span class="hljs-attr">sopInstanceUID</span>:<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00080018&quot;</span>])};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;petIsotopeModule&quot;</span>===e){<span class="hljs-keyword">var</span> f=<span class="hljs-title function_">d</span>(a[<span class="hljs-string">&quot;00540016&quot;</span>]);<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===f)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">return</span>{<span class="hljs-attr">radiopharmaceuticalInfo</span>:{<span class="hljs-attr">radiopharmaceuticalStartTime</span>:r.<span class="hljs-title function_">parseTM</span>(<span class="hljs-title function_">d</span>(f[<span class="hljs-string">&quot;00181072&quot;</span>],<span class="hljs-number">0</span>,<span class="hljs-string">&quot;&quot;</span>)),<span class="hljs-attr">radionuclideTotalDose</span>:<span class="hljs-title function_">p</span>(f[<span class="hljs-string">&quot;00181074&quot;</span>]),<span class="hljs-attr">radionuclideHalfLife</span>:<span class="hljs-title function_">p</span>(f[<span class="hljs-string">&quot;00181075&quot;</span>])}}}}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">D</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">if</span>(r+e.<span class="hljs-property">length</span>&gt;t.<span class="hljs-property">length</span>)<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=r,n=<span class="hljs-number">0</span>;n&lt;e.<span class="hljs-property">length</span>;n++)<span class="hljs-keyword">if</span>(e[n]!==t[a++])<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>}<span class="hljs-keyword">var</span> I=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){r=r||<span class="hljs-number">0</span>;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e.<span class="hljs-property">length</span>),r=<span class="hljs-number">0</span>,a=e.<span class="hljs-property">length</span>;r&lt;a;r++)t[r]=e.<span class="hljs-title function_">charCodeAt</span>(r);<span class="hljs-keyword">return</span> t}(t),n=r;n&lt;e.<span class="hljs-property">length</span>;n++)<span class="hljs-keyword">if</span>(a[<span class="hljs-number">0</span>]===e[n]&amp;&amp;<span class="hljs-title function_">D</span>(a,e,n))<span class="hljs-keyword">return</span> n;<span class="hljs-keyword">return</span>-<span class="hljs-number">1</span>},T={<span class="hljs-attr">beforeSend</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<span class="hljs-attr">imageCreated</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){},<span class="hljs-attr">strict</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">useWebWorkers</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">decodeConfig</span>:{<span class="hljs-attr">usePDFJS</span>:!<span class="hljs-number">1</span>}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">C</span>(<span class="hljs-params">e</span>){T=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(T,e)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">k</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> T}<span class="hljs-keyword">var</span> A=<span class="hljs-keyword">function</span>(<span class="hljs-params">o,i</span>){<span class="hljs-keyword">var</span> n=<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:{},l=<span class="hljs-number">3</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]:{},s=fe.<span class="hljs-property">cornerstone</span>,u=<span class="hljs-title function_">k</span>();<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">t,r</span>){<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>;a.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;get&quot;</span>,o,!<span class="hljs-number">0</span>),a.<span class="hljs-property">responseType</span>=<span class="hljs-string">&quot;arraybuffer&quot;</span>,u.<span class="hljs-title function_">beforeSend</span>(a,i,n,l),<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(n).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){a.<span class="hljs-title function_">setRequestHeader</span>(e,n[e])}),l.<span class="hljs-property">deferred</span>={<span class="hljs-attr">resolve</span>:t,<span class="hljs-attr">reject</span>:r},l.<span class="hljs-property">url</span>=o,l.<span class="hljs-property">imageId</span>=i,a.<span class="hljs-property">onloadstart</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){u.<span class="hljs-property">onloadstart</span>&amp;&amp;u.<span class="hljs-title function_">onloadstart</span>(e,l);<span class="hljs-keyword">var</span> t={<span class="hljs-attr">url</span>:o,<span class="hljs-attr">imageId</span>:i};s.<span class="hljs-title function_">triggerEvent</span>(s.<span class="hljs-property">events</span>,<span class="hljs-string">&quot;cornerstoneimageloadstart&quot;</span>,t)},a.<span class="hljs-property">onloadend</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){u.<span class="hljs-property">onloadend</span>&amp;&amp;u.<span class="hljs-title function_">onloadend</span>(e,l);<span class="hljs-keyword">var</span> t={<span class="hljs-attr">url</span>:o,<span class="hljs-attr">imageId</span>:i};s.<span class="hljs-title function_">triggerEvent</span>(s.<span class="hljs-property">events</span>,<span class="hljs-string">&quot;cornerstoneimageloadend&quot;</span>,t)},a.<span class="hljs-property">onreadystatechange</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){u.<span class="hljs-property">onreadystatechange</span>?u.<span class="hljs-title function_">onreadystatechange</span>(e,l):<span class="hljs-number">4</span>===a.<span class="hljs-property">readyState</span>&amp;&amp;(<span class="hljs-number">200</span>===a.<span class="hljs-property">status</span>?<span class="hljs-title function_">t</span>(a.<span class="hljs-property">response</span>,a):<span class="hljs-title function_">r</span>(a))},a.<span class="hljs-property">onprogress</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t,r,a=e.<span class="hljs-property">loaded</span>;e.<span class="hljs-property">lengthComputable</span>&amp;&amp;(t=e.<span class="hljs-property">total</span>,r=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(a/t*<span class="hljs-number">100</span>)),u.<span class="hljs-property">onprogress</span>&amp;&amp;u.<span class="hljs-title function_">onprogress</span>(e,l);<span class="hljs-keyword">var</span> n={<span class="hljs-attr">url</span>:o,<span class="hljs-attr">imageId</span>:i,<span class="hljs-attr">loaded</span>:a,<span class="hljs-attr">total</span>:t,<span class="hljs-attr">percentComplete</span>:r};s.<span class="hljs-title function_">triggerEvent</span>(s.<span class="hljs-property">events</span>,<span class="hljs-string">&quot;cornerstoneimageloadprogress&quot;</span>,n)},a.<span class="hljs-property">onerror</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-title function_">r</span>(a)},a.<span class="hljs-property">onabort</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-title function_">r</span>(a)},a.<span class="hljs-title function_">send</span>()})},L={<span class="hljs-attr">xhrRequest</span>:A,<span class="hljs-attr">setOptions</span>:C,<span class="hljs-attr">getOptions</span>:k};<span class="hljs-keyword">var</span> S=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r={<span class="hljs-attr">accept</span>:<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:<span class="hljs-string">&quot;application/octet-stream&quot;</span>};<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">s,u</span>){<span class="hljs-title function_">A</span>(e,t,r).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e),r=<span class="hljs-title function_">I</span>(t,<span class="hljs-string">&quot;\r\n\r\n&quot;</span>);-<span class="hljs-number">1</span>===r&amp;&amp;<span class="hljs-title function_">u</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;invalid response - no multipart mime header&quot;</span>));<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){t=t||<span class="hljs-number">0</span>,r=r||e.<span class="hljs-property">length</span>-t;<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=<span class="hljs-string">&quot;&quot;</span>,n=t;n&lt;t+r;n++)a+=<span class="hljs-title class_">String</span>.<span class="hljs-title function_">fromCharCode</span>(e[n]);<span class="hljs-keyword">return</span> a}(t,<span class="hljs-number">0</span>,r).<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;\r\n&quot;</span>),n=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>;t&lt;e.<span class="hljs-property">length</span>;t++)<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;--&quot;</span>===e[t].<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>,<span class="hljs-number">2</span>))<span class="hljs-keyword">return</span> e[t]}(a);n||<span class="hljs-title function_">u</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;invalid response - no boundary marker&quot;</span>));<span class="hljs-keyword">var</span> o=r+<span class="hljs-number">4</span>,i=<span class="hljs-title function_">I</span>(t,n,o);-<span class="hljs-number">1</span>===i&amp;&amp;<span class="hljs-title function_">u</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;invalid response - terminating boundary not found&quot;</span>));<span class="hljs-keyword">var</span> l=i-o-<span class="hljs-number">2</span>;<span class="hljs-title function_">s</span>({<span class="hljs-attr">contentType</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>;t&lt;e.<span class="hljs-property">length</span>;t++)<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;Content-Type:&quot;</span>===e[t].<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>,<span class="hljs-number">13</span>))<span class="hljs-keyword">return</span> e[t].<span class="hljs-title function_">substr</span>(<span class="hljs-number">13</span>).<span class="hljs-title function_">trim</span>()}(a),<span class="hljs-attr">imageFrame</span>:{<span class="hljs-attr">pixelData</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e,o,l)}})},u)})};<span class="hljs-keyword">var</span> E,O=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=fe.<span class="hljs-property">cornerstone</span>.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;imagePixelModule&quot;</span>,e);<span class="hljs-keyword">return</span>{<span class="hljs-attr">samplesPerPixel</span>:t.<span class="hljs-property">samplesPerPixel</span>,<span class="hljs-attr">photometricInterpretation</span>:t.<span class="hljs-property">photometricInterpretation</span>,<span class="hljs-attr">planarConfiguration</span>:t.<span class="hljs-property">planarConfiguration</span>,<span class="hljs-attr">rows</span>:t.<span class="hljs-property">rows</span>,<span class="hljs-attr">columns</span>:t.<span class="hljs-property">columns</span>,<span class="hljs-attr">bitsAllocated</span>:t.<span class="hljs-property">bitsAllocated</span>,<span class="hljs-attr">bitsStored</span>:t.<span class="hljs-property">bitsStored</span>,<span class="hljs-attr">pixelRepresentation</span>:t.<span class="hljs-property">pixelRepresentation</span>,<span class="hljs-attr">smallestPixelValue</span>:t.<span class="hljs-property">smallestPixelValue</span>,<span class="hljs-attr">largestPixelValue</span>:t.<span class="hljs-property">largestPixelValue</span>,<span class="hljs-attr">redPaletteColorLookupTableDescriptor</span>:t.<span class="hljs-property">redPaletteColorLookupTableDescriptor</span>,<span class="hljs-attr">greenPaletteColorLookupTableDescriptor</span>:t.<span class="hljs-property">greenPaletteColorLookupTableDescriptor</span>,<span class="hljs-attr">bluePaletteColorLookupTableDescriptor</span>:t.<span class="hljs-property">bluePaletteColorLookupTableDescriptor</span>,<span class="hljs-attr">redPaletteColorLookupTableData</span>:t.<span class="hljs-property">redPaletteColorLookupTableData</span>,<span class="hljs-attr">greenPaletteColorLookupTableData</span>:t.<span class="hljs-property">greenPaletteColorLookupTableData</span>,<span class="hljs-attr">bluePaletteColorLookupTableData</span>:t.<span class="hljs-property">bluePaletteColorLookupTableData</span>,<span class="hljs-attr">pixelData</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},M=<span class="hljs-number">0</span>,B=[],R=[],_=<span class="hljs-title function_">k</span>(),W={<span class="hljs-attr">maxWebWorkers</span>:navigator.<span class="hljs-property">hardwareConcurrency</span>||<span class="hljs-number">1</span>,<span class="hljs-attr">startWebWorkersOnDemand</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">webWorkerPath</span>:<span class="hljs-string">&quot;../../dist/cornerstoneWADOImageLoaderWebWorker.js&quot;</span>,<span class="hljs-attr">webWorkerTaskPaths</span>:[],<span class="hljs-attr">taskConfiguration</span>:{<span class="hljs-attr">decodeTask</span>:{<span class="hljs-attr">loadCodecsOnStartup</span>:!<span class="hljs-number">0</span>,<span class="hljs-attr">initializeCodecsOnStartup</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">codecsPath</span>:<span class="hljs-string">&quot;../dist/cornerstoneWADOImageLoaderCodecs.js&quot;</span>,<span class="hljs-attr">usePDFJS</span>:!<span class="hljs-number">1</span>,<span class="hljs-attr">strict</span>:_.<span class="hljs-property">strict</span>}}},U={<span class="hljs-attr">maxWebWorkers</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">numWebWorkers</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">numTasksQueued</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">numTasksExecuting</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">numTasksCompleted</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">totalTaskTimeInMS</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">totalTimeDelayedInMS</span>:<span class="hljs-number">0</span>};<span class="hljs-keyword">function</span> <span class="hljs-title function_">V</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">if</span>(B.<span class="hljs-property">length</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> e=<span class="hljs-number">0</span>;e&lt;R.<span class="hljs-property">length</span>;e++)<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;ready&quot;</span>===R[e].<span class="hljs-property">status</span>){R[e].<span class="hljs-property">status</span>=<span class="hljs-string">&quot;busy&quot;</span>;<span class="hljs-keyword">var</span> t=B.<span class="hljs-title function_">shift</span>();t.<span class="hljs-property">start</span>=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">var</span> r=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">return</span> U.<span class="hljs-property">totalTimeDelayedInMS</span>+=r-t.<span class="hljs-property">added</span>,R[e].<span class="hljs-property">task</span>=t,R[e].<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">taskType</span>:t.<span class="hljs-property">taskType</span>,<span class="hljs-attr">workerIndex</span>:e,<span class="hljs-attr">data</span>:t.<span class="hljs-property">data</span>},t.<span class="hljs-property">transferList</span>),<span class="hljs-keyword">void</span> U.<span class="hljs-property">numTasksExecuting</span>++}R.<span class="hljs-property">length</span>&lt;E.<span class="hljs-property">maxWebWorkers</span>&amp;&amp;<span class="hljs-title function_">j</span>()}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">F</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;initialize&quot;</span>===e.<span class="hljs-property">data</span>.<span class="hljs-property">taskType</span>)R[e.<span class="hljs-property">data</span>.<span class="hljs-property">workerIndex</span>].<span class="hljs-property">status</span>=<span class="hljs-string">&quot;ready&quot;</span>,<span class="hljs-title function_">V</span>();<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> t=R[e.<span class="hljs-property">data</span>.<span class="hljs-property">workerIndex</span>].<span class="hljs-property">task</span>.<span class="hljs-property">start</span>;R[e.<span class="hljs-property">data</span>.<span class="hljs-property">workerIndex</span>].<span class="hljs-property">task</span>.<span class="hljs-property">deferred</span>.<span class="hljs-title function_">resolve</span>(e.<span class="hljs-property">data</span>.<span class="hljs-property">result</span>),R[e.<span class="hljs-property">data</span>.<span class="hljs-property">workerIndex</span>].<span class="hljs-property">task</span>=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,U.<span class="hljs-property">numTasksExecuting</span>--,R[e.<span class="hljs-property">data</span>.<span class="hljs-property">workerIndex</span>].<span class="hljs-property">status</span>=<span class="hljs-string">&quot;ready&quot;</span>,U.<span class="hljs-property">numTasksCompleted</span>++;<span class="hljs-keyword">var</span> r=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();U.<span class="hljs-property">totalTaskTimeInMS</span>+=r-t,<span class="hljs-title function_">V</span>()}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">j</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">if</span>(!(R.<span class="hljs-property">length</span>&gt;=E.<span class="hljs-property">maxWebWorkers</span>)){<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(E.<span class="hljs-property">webWorkerPath</span>);R.<span class="hljs-title function_">push</span>({<span class="hljs-attr">worker</span>:e,<span class="hljs-attr">status</span>:<span class="hljs-string">&quot;initializing&quot;</span>}),e.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;message&quot;</span>,F),e.<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">taskType</span>:<span class="hljs-string">&quot;initialize&quot;</span>,<span class="hljs-attr">workerIndex</span>:R.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>,<span class="hljs-attr">config</span>:E})}}<span class="hljs-keyword">function</span> <span class="hljs-title function_">G</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(e=e||W,E)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;WebWorkerManager already initialized&quot;</span>);<span class="hljs-keyword">if</span>((E=e).<span class="hljs-property">maxWebWorkers</span>=E.<span class="hljs-property">maxWebWorkers</span>||navigator.<span class="hljs-property">hardwareConcurrency</span>||<span class="hljs-number">1</span>,!E.<span class="hljs-property">startWebWorkersOnDemand</span>)<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-number">0</span>;t&lt;E.<span class="hljs-property">maxWebWorkers</span>;t++)<span class="hljs-title function_">j</span>()}<span class="hljs-keyword">var</span> J={<span class="hljs-attr">initialize</span>:G,<span class="hljs-attr">loadWebWorkerTask</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){E.<span class="hljs-property">webWorkerTaskPaths</span>.<span class="hljs-title function_">push</span>(e),t&amp;&amp;(E.<span class="hljs-property">taskConfiguration</span>=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(E.<span class="hljs-property">taskConfiguration</span>,t));<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>;r&lt;R.<span class="hljs-property">length</span>;r++)R[r].<span class="hljs-property">worker</span>.<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">taskType</span>:<span class="hljs-string">&quot;loadWebWorkerTask&quot;</span>,<span class="hljs-attr">workerIndex</span>:R.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>,<span class="hljs-attr">sourcePath</span>:e,<span class="hljs-attr">config</span>:E})},<span class="hljs-attr">addTask</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:<span class="hljs-number">0</span>,a=<span class="hljs-number">3</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;E||<span class="hljs-title function_">G</span>();<span class="hljs-keyword">var</span> n,o={},i=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){o={<span class="hljs-attr">resolve</span>:e,<span class="hljs-attr">reject</span>:t}});<span class="hljs-keyword">for</span>(n=<span class="hljs-number">0</span>;n&lt;B.<span class="hljs-property">length</span>&amp;&amp;!(B[n].<span class="hljs-property">priority</span>&lt;r);n++);<span class="hljs-keyword">var</span> l=M++;<span class="hljs-keyword">return</span> B.<span class="hljs-title function_">splice</span>(n,<span class="hljs-number">0</span>,{<span class="hljs-attr">taskId</span>:l,<span class="hljs-attr">taskType</span>:e,<span class="hljs-attr">status</span>:<span class="hljs-string">&quot;ready&quot;</span>,<span class="hljs-attr">added</span>:(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>(),<span class="hljs-attr">data</span>:t,<span class="hljs-attr">deferred</span>:o,<span class="hljs-attr">priority</span>:r,<span class="hljs-attr">transferList</span>:a}),<span class="hljs-title function_">V</span>(),{<span class="hljs-attr">taskId</span>:l,<span class="hljs-attr">promise</span>:i}},<span class="hljs-attr">getStatistics</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> U.<span class="hljs-property">maxWebWorkers</span>=E.<span class="hljs-property">maxWebWorkers</span>,U.<span class="hljs-property">numWebWorkers</span>=R.<span class="hljs-property">length</span>,U.<span class="hljs-property">numTasksQueued</span>=B.<span class="hljs-property">length</span>,U},<span class="hljs-attr">setTaskPriority</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-number">1</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]:<span class="hljs-number">0</span>,r=<span class="hljs-number">0</span>;r&lt;B.<span class="hljs-property">length</span>;r++)<span class="hljs-keyword">if</span>(B[r].<span class="hljs-property">taskId</span>===e){<span class="hljs-keyword">var</span> a=B.<span class="hljs-title function_">splice</span>(r,<span class="hljs-number">1</span>)[<span class="hljs-number">0</span>];<span class="hljs-keyword">for</span>(a.<span class="hljs-property">priority</span>=t,r=<span class="hljs-number">0</span>;r&lt;B.<span class="hljs-property">length</span>&amp;&amp;!(B[r].<span class="hljs-property">priority</span>&lt;t);r++);<span class="hljs-keyword">return</span> B.<span class="hljs-title function_">splice</span>(r,<span class="hljs-number">0</span>,a),!<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>},<span class="hljs-attr">cancelTask</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> r=<span class="hljs-number">0</span>;r&lt;B.<span class="hljs-property">length</span>;r++)<span class="hljs-keyword">if</span>(B[r].<span class="hljs-property">taskId</span>===e)<span class="hljs-keyword">return</span> B.<span class="hljs-title function_">splice</span>(r,<span class="hljs-number">1</span>).<span class="hljs-property">deferred</span>.<span class="hljs-title function_">reject</span>(t),!<span class="hljs-number">0</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>}},z=<span class="hljs-title function_">r</span>(<span class="hljs-number">0</span>);<span class="hljs-keyword">function</span> <span class="hljs-title function_">q</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">t</span>){<span class="hljs-keyword">var</span> r;<span class="hljs-keyword">try</span>{<span class="hljs-keyword">return</span> <span class="hljs-built_in">decodeURIComponent</span>(<span class="hljs-built_in">escape</span>(t))}<span class="hljs-keyword">catch</span>(e){<span class="hljs-keyword">if</span>((r=e)<span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">URIError</span>)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">throw</span> r}}(<span class="hljs-title class_">String</span>.<span class="hljs-property">fromCharCode</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-literal">null</span>,<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">slice</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e))))}<span class="hljs-keyword">var</span> Y=<span class="hljs-keyword">function</span>(<span class="hljs-params">i,e,l</span>){<span class="hljs-keyword">var</span> s=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>(),r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>([e],{<span class="hljs-attr">type</span>:<span class="hljs-string">&quot;image/jpeg&quot;</span>});<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">o,t</span>){<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e.<span class="hljs-property">readAsBinaryString</span>?e.<span class="hljs-title function_">readAsArrayBuffer</span>(r):e.<span class="hljs-title function_">readAsBinaryString</span>(r),e.<span class="hljs-property">onload</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> n=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>;n.<span class="hljs-property">onload</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){l.<span class="hljs-property">height</span>=n.<span class="hljs-property">height</span>,l.<span class="hljs-property">width</span>=n.<span class="hljs-property">width</span>,i.<span class="hljs-property">rows</span>=n.<span class="hljs-property">height</span>,i.<span class="hljs-property">columns</span>=n.<span class="hljs-property">width</span>;<span class="hljs-keyword">var</span> e=l.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>);e.<span class="hljs-title function_">drawImage</span>(<span class="hljs-variable language_">this</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>);<span class="hljs-keyword">var</span> t=e.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,n.<span class="hljs-property">width</span>,n.<span class="hljs-property">height</span>),r=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();i.<span class="hljs-property">pixelData</span>=t.<span class="hljs-property">data</span>,i.<span class="hljs-property">imageData</span>=t,i.<span class="hljs-property">decodeTimeInMS</span>=r-s;<span class="hljs-keyword">var</span> a=<span class="hljs-title class_">Object</span>(z.<span class="hljs-property">a</span>)(i.<span class="hljs-property">pixelData</span>);i.<span class="hljs-property">smallestPixelValue</span>=a.<span class="hljs-property">min</span>,i.<span class="hljs-property">largestPixelValue</span>=a.<span class="hljs-property">max</span>,<span class="hljs-title function_">o</span>(i)},n.<span class="hljs-property">onerror</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">t</span>(e)},<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===e.<span class="hljs-property">readAsBinaryString</span>?n.<span class="hljs-property">src</span>=<span class="hljs-string">&quot;data:image/jpeg;base64,&quot;</span>.<span class="hljs-title function_">concat</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">btoa</span>(<span class="hljs-title function_">q</span>(e.<span class="hljs-property">result</span>))):n.<span class="hljs-property">src</span>=<span class="hljs-string">&quot;data:image/jpeg;base64,&quot;</span>.<span class="hljs-title function_">concat</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">btoa</span>(e.<span class="hljs-property">result</span>))},e.<span class="hljs-property">onerror</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">t</span>(e)}})},N=<span class="hljs-title function_">r</span>(<span class="hljs-number">5</span>),H=<span class="hljs-title function_">r</span>(<span class="hljs-number">4</span>),K=<span class="hljs-title function_">r</span>(<span class="hljs-number">2</span>),Q=<span class="hljs-title function_">r</span>(<span class="hljs-number">1</span>),X=!<span class="hljs-number">1</span>;<span class="hljs-keyword">function</span> <span class="hljs-title function_">Z</span>(<span class="hljs-params">n,o,i,l</span>){<span class="hljs-keyword">var</span> e=l.<span class="hljs-property">priority</span>||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,t=l.<span class="hljs-property">transferPixelData</span>?[i.<span class="hljs-property">buffer</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,r=<span class="hljs-title function_">k</span>(),s=r.<span class="hljs-property">strict</span>,u=r.<span class="hljs-property">decodeConfig</span>;<span class="hljs-keyword">return</span>!<span class="hljs-number">1</span>===r.<span class="hljs-property">useWebWorkers</span>?(!<span class="hljs-number">1</span>===X&amp;&amp;(<span class="hljs-title class_">Object</span>(K.<span class="hljs-property">b</span>)(u),<span class="hljs-title class_">Object</span>(Q.<span class="hljs-property">b</span>)(u),X=!<span class="hljs-number">0</span>),<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> r=[n,o,i,u,l],a=N.<span class="hljs-property">a</span>.<span class="hljs-title function_">apply</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,r);<span class="hljs-title class_">Object</span>(H.<span class="hljs-property">a</span>)(a,s),<span class="hljs-title function_">e</span>(a)}<span class="hljs-keyword">catch</span>(e){<span class="hljs-title function_">t</span>(e)}})):J.<span class="hljs-title function_">addTask</span>(<span class="hljs-string">&quot;decodeTask&quot;</span>,{<span class="hljs-attr">imageFrame</span>:n,<span class="hljs-attr">transferSyntax</span>:o,<span class="hljs-attr">pixelData</span>:i,<span class="hljs-attr">options</span>:l},e,t).<span class="hljs-property">promise</span>}<span class="hljs-keyword">var</span> $=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,r,t,a</span>){<span class="hljs-keyword">var</span> n=<span class="hljs-number">4</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">4</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">4</span>]:{};<span class="hljs-keyword">return</span><span class="hljs-string">&quot;1.2.840.10008.1.2&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.1&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.2&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.1.99&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.5&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.50&quot;</span>===r?<span class="hljs-number">8</span>!==e.<span class="hljs-property">bitsAllocated</span>||<span class="hljs-number">3</span>!==e.<span class="hljs-property">samplesPerPixel</span>&amp;&amp;<span class="hljs-number">4</span>!==e.<span class="hljs-property">samplesPerPixel</span>?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-title function_">Y</span>(e,t,a):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.51&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.57&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.70&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.80&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.81&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.90&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-string">&quot;1.2.840.10008.1.2.4.91&quot;</span>===r?<span class="hljs-title function_">Z</span>(e,r,t,n):<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-title function_">t</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;No decoder for transfer syntax &quot;</span>.<span class="hljs-title function_">concat</span>(r)))})},ee=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span><span class="hljs-string">&quot;RGB&quot;</span>===e||<span class="hljs-string">&quot;PALETTE COLOR&quot;</span>===e||<span class="hljs-string">&quot;YBR_FULL&quot;</span>===e||<span class="hljs-string">&quot;YBR_FULL_422&quot;</span>===e||<span class="hljs-string">&quot;YBR_PARTIAL_422&quot;</span>===e||<span class="hljs-string">&quot;YBR_PARTIAL_420&quot;</span>===e||<span class="hljs-string">&quot;YBR_RCT&quot;</span>===e||<span class="hljs-string">&quot;YBR_ICT&quot;</span>===e};<span class="hljs-keyword">function</span> <span class="hljs-title function_">te</span>(<span class="hljs-params">e,t</span>){<span class="hljs-number">0</span>===e.<span class="hljs-property">planarConfiguration</span>?<span class="hljs-title function_">a</span>(e.<span class="hljs-property">pixelData</span>,t):<span class="hljs-title function_">n</span>(e.<span class="hljs-property">pixelData</span>,t)}<span class="hljs-keyword">function</span> <span class="hljs-title function_">re</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r,a,n=t.<span class="hljs-property">data</span>;<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;RGB&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-title function_">te</span>(e,n);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;YBR_RCT&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-title function_">te</span>(e,n);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;YBR_ICT&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-title function_">te</span>(e,n);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;PALETTE COLOR&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-title function_">l</span>(e,n);<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;YBR_FULL_422&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-title function_">te</span>(e,n);<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;YBR_FULL&quot;</span>!==e.<span class="hljs-property">photometricInterpretation</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;No color space conversion for photometric interpretation &quot;</span>.<span class="hljs-title function_">concat</span>(e.<span class="hljs-property">photometricInterpretation</span>));a=n,<span class="hljs-number">0</span>===(r=e).<span class="hljs-property">planarConfiguration</span>?<span class="hljs-title function_">o</span>(r.<span class="hljs-property">pixelData</span>,a):<span class="hljs-title function_">i</span>(r.<span class="hljs-property">pixelData</span>,a)}}<span class="hljs-keyword">var</span> ae=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">if</span>(t=t||e.<span class="hljs-property">transferSyntax</span>,<span class="hljs-number">8</span>===e.<span class="hljs-property">bitsAllocated</span>&amp;&amp;<span class="hljs-string">&quot;1.2.840.10008.1.2.4.50&quot;</span>===t&amp;&amp;(<span class="hljs-number">3</span>===e.<span class="hljs-property">samplesPerPixel</span>||<span class="hljs-number">4</span>===e.<span class="hljs-property">samplesPerPixel</span>))<span class="hljs-keyword">return</span>!<span class="hljs-number">0</span>},ne=<span class="hljs-string">&quot;&quot;</span>;<span class="hljs-keyword">var</span> oe=<span class="hljs-keyword">function</span>(<span class="hljs-params">v,e,x,t</span>){<span class="hljs-keyword">if</span>(!e||!e.<span class="hljs-property">length</span>)<span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;The file does not contain image data.&quot;</span>));<span class="hljs-keyword">var</span> h=fe.<span class="hljs-property">cornerstone</span>,w=<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;canvas&quot;</span>),r=<span class="hljs-title function_">O</span>(v),a=$(r,x,e,w,t);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">g,e</span>){a.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t,r=h.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;imagePlaneModule&quot;</span>,v)||{},a=h.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;voiLutModule&quot;</span>,v)||{},n=h.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;modalityLutModule&quot;</span>,v)||{},o=h.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&quot;sopCommonModule&quot;</span>,v)||{},i=<span class="hljs-title function_">ee</span>(e.<span class="hljs-property">photometricInterpretation</span>);<span class="hljs-keyword">if</span>(!<span class="hljs-title function_">ae</span>(e,x)&amp;&amp;(<span class="hljs-number">32</span>===(t=e).<span class="hljs-property">bitsAllocated</span>?t.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Float32Array</span>(t.<span class="hljs-property">pixelData</span>):<span class="hljs-number">16</span>===t.<span class="hljs-property">bitsAllocated</span>?<span class="hljs-number">0</span>===t.<span class="hljs-property">pixelRepresentation</span>?t.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(t.<span class="hljs-property">pixelData</span>):t.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Int16Array</span>(t.<span class="hljs-property">pixelData</span>):t.<span class="hljs-property">pixelData</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(t.<span class="hljs-property">pixelData</span>),i)){w.<span class="hljs-property">height</span>=e.<span class="hljs-property">rows</span>,w.<span class="hljs-property">width</span>=e.<span class="hljs-property">columns</span>;<span class="hljs-keyword">var</span> l=w.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>).<span class="hljs-title function_">createImageData</span>(e.<span class="hljs-property">columns</span>,e.<span class="hljs-property">rows</span>);<span class="hljs-title function_">re</span>(e,l),e.<span class="hljs-property">imageData</span>=l,e.<span class="hljs-property">pixelData</span>=l.<span class="hljs-property">data</span>;<span class="hljs-keyword">var</span> s=<span class="hljs-title class_">Object</span>(z.<span class="hljs-property">a</span>)(e.<span class="hljs-property">pixelData</span>);e.<span class="hljs-property">smallestPixelValue</span>=s.<span class="hljs-property">min</span>,e.<span class="hljs-property">largestPixelValue</span>=s.<span class="hljs-property">max</span>}<span class="hljs-keyword">var</span> u,c={<span class="hljs-attr">imageId</span>:v,<span class="hljs-attr">color</span>:i,<span class="hljs-attr">columnPixelSpacing</span>:r.<span class="hljs-property">columnPixelSpacing</span>,<span class="hljs-attr">columns</span>:e.<span class="hljs-property">columns</span>,<span class="hljs-attr">height</span>:e.<span class="hljs-property">rows</span>,<span class="hljs-attr">intercept</span>:n.<span class="hljs-property">rescaleIntercept</span>?n.<span class="hljs-property">rescaleIntercept</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">invert</span>:<span class="hljs-string">&quot;MONOCHROME1&quot;</span>===e.<span class="hljs-property">photometricInterpretation</span>,<span class="hljs-attr">minPixelValue</span>:e.<span class="hljs-property">smallestPixelValue</span>,<span class="hljs-attr">maxPixelValue</span>:e.<span class="hljs-property">largestPixelValue</span>,<span class="hljs-attr">rowPixelSpacing</span>:r.<span class="hljs-property">rowPixelSpacing</span>,<span class="hljs-attr">rows</span>:e.<span class="hljs-property">rows</span>,<span class="hljs-attr">sizeInBytes</span>:e.<span class="hljs-property">pixelData</span>.<span class="hljs-property">length</span>,<span class="hljs-attr">slope</span>:n.<span class="hljs-property">rescaleSlope</span>?n.<span class="hljs-property">rescaleSlope</span>:<span class="hljs-number">1</span>,<span class="hljs-attr">width</span>:e.<span class="hljs-property">columns</span>,<span class="hljs-attr">windowCenter</span>:a.<span class="hljs-property">windowCenter</span>?a.<span class="hljs-property">windowCenter</span>[<span class="hljs-number">0</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">windowWidth</span>:a.<span class="hljs-property">windowWidth</span>?a.<span class="hljs-property">windowWidth</span>[<span class="hljs-number">0</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,<span class="hljs-attr">decodeTimeInMS</span>:e.<span class="hljs-property">decodeTimeInMS</span>,<span class="hljs-attr">floatPixelData</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>};<span class="hljs-keyword">if</span>(e.<span class="hljs-property">pixelData</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Float32Array</span>){<span class="hljs-keyword">var</span> f=e.<span class="hljs-property">pixelData</span>,d=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> t=<span class="hljs-title class_">Object</span>(z.<span class="hljs-property">a</span>)(e),r=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(t.<span class="hljs-property">max</span>-t.<span class="hljs-property">min</span>)/<span class="hljs-number">65535</span>,a=t.<span class="hljs-property">min</span>,n=e.<span class="hljs-property">length</span>,o=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint16Array</span>(n),i=<span class="hljs-number">65535</span>,l=<span class="hljs-number">0</span>,s=<span class="hljs-number">0</span>;s&lt;n;s++){<span class="hljs-keyword">var</span> u=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((e[s]-a)/r);o[s]=u,i=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(i,u),l=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(l,u)}<span class="hljs-keyword">return</span>{<span class="hljs-attr">min</span>:i,<span class="hljs-attr">max</span>:l,<span class="hljs-attr">intPixelData</span>:o,<span class="hljs-attr">slope</span>:r,<span class="hljs-attr">intercept</span>:a}}(f);c.<span class="hljs-property">minPixelValue</span>=d.<span class="hljs-property">min</span>,c.<span class="hljs-property">maxPixelValue</span>=d.<span class="hljs-property">max</span>,c.<span class="hljs-property">slope</span>=d.<span class="hljs-property">slope</span>,c.<span class="hljs-property">intercept</span>=d.<span class="hljs-property">intercept</span>,c.<span class="hljs-property">floatPixelData</span>=f,c.<span class="hljs-property">getPixelData</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> d.<span class="hljs-property">intPixelData</span>}}<span class="hljs-keyword">else</span> c.<span class="hljs-property">getPixelData</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> e.<span class="hljs-property">pixelData</span>};<span class="hljs-keyword">if</span>(c.<span class="hljs-property">color</span>&amp;&amp;(c.<span class="hljs-property">getCanvas</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> ne===v||(w.<span class="hljs-property">height</span>=c.<span class="hljs-property">rows</span>,w.<span class="hljs-property">width</span>=c.<span class="hljs-property">columns</span>,w.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">&quot;2d&quot;</span>).<span class="hljs-title function_">putImageData</span>(e.<span class="hljs-property">imageData</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>),ne=v),w}),n.<span class="hljs-property">modalityLUTSequence</span>&amp;&amp;<span class="hljs-number">0</span>&lt;n.<span class="hljs-property">modalityLUTSequence</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-string">&quot;1.2.840.10008.5.1.4.1.1.12.1&quot;</span>!==(u=o.<span class="hljs-property">sopClassUID</span>)&amp;&amp;<span class="hljs-string">&quot;1.2.840.10008.5.1.4.1.1.12.2.1&quot;</span>!==u&amp;&amp;(c.<span class="hljs-property">modalityLUT</span>=n.<span class="hljs-property">modalityLUTSequence</span>[<span class="hljs-number">0</span>]),a.<span class="hljs-property">voiLUTSequence</span>&amp;&amp;<span class="hljs-number">0</span>&lt;a.<span class="hljs-property">voiLUTSequence</span>.<span class="hljs-property">length</span>&amp;&amp;(c.<span class="hljs-property">voiLUT</span>=a.<span class="hljs-property">voiLUTSequence</span>[<span class="hljs-number">0</span>]),c.<span class="hljs-property">color</span>&amp;&amp;(c.<span class="hljs-property">windowWidth</span>=<span class="hljs-number">255</span>,c.<span class="hljs-property">windowCenter</span>=<span class="hljs-number">127</span>),<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===c.<span class="hljs-property">windowCenter</span>||<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===c.<span class="hljs-property">windowWidth</span>){<span class="hljs-keyword">var</span> p=c.<span class="hljs-property">maxPixelValue</span>*c.<span class="hljs-property">slope</span>+c.<span class="hljs-property">intercept</span>,m=c.<span class="hljs-property">minPixelValue</span>*c.<span class="hljs-property">slope</span>+c.<span class="hljs-property">intercept</span>;c.<span class="hljs-property">windowWidth</span>=p-m,c.<span class="hljs-property">windowCenter</span>=(p+m)/<span class="hljs-number">2</span>}<span class="hljs-title function_">g</span>(c)},e)})};<span class="hljs-keyword">var</span> ie=<span class="hljs-keyword">function</span>(<span class="hljs-params">o,i</span>){<span class="hljs-keyword">var</span> l=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>(),t=o.<span class="hljs-title function_">substring</span>(<span class="hljs-number">7</span>);<span class="hljs-keyword">return</span>{<span class="hljs-attr">promise</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a,n</span>){<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===y.<span class="hljs-title function_">get</span>(o)){<span class="hljs-keyword">var</span> e=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;no metadata for imageId &quot;</span>.<span class="hljs-title function_">concat</span>(o));<span class="hljs-keyword">return</span> <span class="hljs-title function_">n</span>(e)}<span class="hljs-title function_">S</span>(t,o,<span class="hljs-string">&#x27;multipart/related; type=&quot;application/octet-stream&quot;&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-string">&quot;1.2.840.10008.1.2&quot;</span>;<span class="hljs-keyword">if</span>(!e)<span class="hljs-keyword">return</span> t;<span class="hljs-keyword">var</span> r=e.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;;&quot;</span>),a={};r.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=e.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;=&quot;</span>);<span class="hljs-keyword">if</span>(<span class="hljs-number">2</span>===t.<span class="hljs-property">length</span>){<span class="hljs-keyword">var</span> r=t[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/&quot;/g</span>,<span class="hljs-string">&quot;&quot;</span>);a[t[<span class="hljs-number">0</span>].<span class="hljs-title function_">trim</span>()]=r}});<span class="hljs-keyword">var</span> n={<span class="hljs-string">&quot;image/jpeg&quot;</span>:<span class="hljs-string">&quot;1.2.840.10008.1.2.4.70&quot;</span>,<span class="hljs-string">&quot;image/x-dicom-rle&quot;</span>:<span class="hljs-string">&quot;1.2.840.10008.1.2.5&quot;</span>,<span class="hljs-string">&quot;image/x-jls&quot;</span>:<span class="hljs-string">&quot;1.2.840.10008.1.2.4.80&quot;</span>,<span class="hljs-string">&quot;image/jp2&quot;</span>:<span class="hljs-string">&quot;1.2.840.10008.1.2.4.90&quot;</span>,<span class="hljs-string">&quot;image/jpx&quot;</span>:<span class="hljs-string">&quot;1.2.840.10008.1.2.4.92&quot;</span>};<span class="hljs-keyword">return</span> a[<span class="hljs-string">&quot;transfer-syntax&quot;</span>]?a[<span class="hljs-string">&quot;transfer-syntax&quot;</span>]:e&amp;&amp;!<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(a).<span class="hljs-property">length</span>&amp;&amp;n[e]?n[e]:a.<span class="hljs-property">type</span>&amp;&amp;n[a.<span class="hljs-property">type</span>]?n[a.<span class="hljs-property">type</span>]:t}(e.<span class="hljs-property">contentType</span>),r=e.<span class="hljs-property">imageFrame</span>.<span class="hljs-property">pixelData</span>;<span class="hljs-title function_">oe</span>(o,r,t,i).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();e.<span class="hljs-property">loadTimeInMS</span>=t-l,<span class="hljs-title function_">a</span>(e)},n)},n).<span class="hljs-title function_">catch</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">n</span>(e)})}),<span class="hljs-attr">cancelFn</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}},le={<span class="hljs-attr">metaData</span>:{<span class="hljs-attr">getNumberString</span>:f,<span class="hljs-attr">getNumberValue</span>:p,<span class="hljs-attr">getNumberValues</span>:m,<span class="hljs-attr">getValue</span>:d,<span class="hljs-attr">metaDataProvider</span>:P},<span class="hljs-attr">findIndexOfString</span>:I,<span class="hljs-attr">getPixelData</span>:S,<span class="hljs-attr">loadImage</span>:ie,<span class="hljs-attr">metaDataManager</span>:y,<span class="hljs-attr">register</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){e.<span class="hljs-title function_">registerImageLoader</span>(<span class="hljs-string">&quot;wadors&quot;</span>,ie),e.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">addProvider</span>(P)}};<span class="hljs-keyword">var</span> se,ue,ce=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){le.<span class="hljs-title function_">register</span>(e),<span class="hljs-title class_">Le</span>.<span class="hljs-title function_">register</span>(e)},fe={<span class="hljs-keyword">set</span> <span class="hljs-title function_">cornerstone</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">ce</span>(se=e)},<span class="hljs-keyword">get</span> <span class="hljs-title function_">cornerstone</span>(){<span class="hljs-keyword">if</span>(!se){<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">window</span>||!<span class="hljs-variable language_">window</span>.<span class="hljs-property">cornerstone</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.&quot;</span>);se=<span class="hljs-variable language_">window</span>.<span class="hljs-property">cornerstone</span>,<span class="hljs-title function_">ce</span>(se)}<span class="hljs-keyword">return</span> se},<span class="hljs-keyword">set</span> <span class="hljs-title function_">dicomParser</span>(<span class="hljs-params">e</span>){ue=e},<span class="hljs-keyword">get</span> <span class="hljs-title function_">dicomParser</span>(){<span class="hljs-keyword">if</span>(!ue){<span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">window</span>||!<span class="hljs-variable language_">window</span>.<span class="hljs-property">dicomParser</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.&quot;</span>);ue=<span class="hljs-variable language_">window</span>.<span class="hljs-property">dicomParser</span>}<span class="hljs-keyword">return</span> ue}};<span class="hljs-keyword">var</span> de=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t,r=e.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;:&quot;</span>),a=e.<span class="hljs-title function_">substring</span>(r+<span class="hljs-number">1</span>),n=a.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&quot;frame=&quot;</span>);<span class="hljs-keyword">if</span>(-<span class="hljs-number">1</span>!==n){<span class="hljs-keyword">var</span> o=a.<span class="hljs-title function_">substr</span>(n+<span class="hljs-number">6</span>);t=<span class="hljs-built_in">parseInt</span>(o,<span class="hljs-number">10</span>),a=a.<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>,n-<span class="hljs-number">1</span>)}<span class="hljs-keyword">return</span>{<span class="hljs-attr">scheme</span>:e.<span class="hljs-title function_">substr</span>(<span class="hljs-number">0</span>,r),<span class="hljs-attr">url</span>:a,<span class="hljs-attr">frame</span>:t}},pe=<span class="hljs-number">0</span>,me={},ge={};<span class="hljs-keyword">function</span> <span class="hljs-title function_">ve</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span>{<span class="hljs-attr">cacheSizeInBytes</span>:pe,<span class="hljs-attr">numberOfDataSetsCached</span>:<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(me).<span class="hljs-property">length</span>}}<span class="hljs-keyword">var</span> xe={<span class="hljs-attr">isLoaded</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==me[e]},<span class="hljs-attr">load</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">o</span>){<span class="hljs-keyword">var</span> e=<span class="hljs-number">1</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]:A,t=<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,i=fe.<span class="hljs-property">cornerstone</span>,l=fe.<span class="hljs-property">dicomParser</span>;<span class="hljs-keyword">if</span>(me[o])<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){me[o].<span class="hljs-property">cacheCount</span>++,<span class="hljs-title function_">e</span>(me[o].<span class="hljs-property">dataSet</span>)});<span class="hljs-keyword">if</span>(ge[o])<span class="hljs-keyword">return</span> ge[o].<span class="hljs-property">cacheCount</span>++,ge[o];<span class="hljs-keyword">var</span> r=<span class="hljs-title function_">e</span>(o,t),s=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">a,n</span>){r.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t,r=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e);<span class="hljs-keyword">try</span>{t=l.<span class="hljs-title function_">parseDicom</span>(r)}<span class="hljs-keyword">catch</span>(e){<span class="hljs-keyword">return</span> <span class="hljs-title function_">n</span>(e)}me[o]={<span class="hljs-attr">dataSet</span>:t,<span class="hljs-attr">cacheCount</span>:s.<span class="hljs-property">cacheCount</span>},pe+=t.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>,<span class="hljs-title function_">a</span>(t),i.<span class="hljs-title function_">triggerEvent</span>(i.<span class="hljs-property">events</span>,<span class="hljs-string">&quot;datasetscachechanged&quot;</span>,{<span class="hljs-attr">uri</span>:o,<span class="hljs-attr">action</span>:<span class="hljs-string">&quot;loaded&quot;</span>,<span class="hljs-attr">cacheInfo</span>:<span class="hljs-title function_">ve</span>()})},n).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">delete</span> ge[o]},<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">delete</span> ge[o]})});<span class="hljs-keyword">return</span> s.<span class="hljs-property">cacheCount</span>=<span class="hljs-number">1</span>,ge[o]=s},<span class="hljs-attr">unload</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=fe.<span class="hljs-property">cornerstone</span>;me[e]&amp;&amp;(me[e].<span class="hljs-property">cacheCount</span>--,<span class="hljs-number">0</span>===me[e].<span class="hljs-property">cacheCount</span>&amp;&amp;(pe-=me[e].<span class="hljs-property">dataSet</span>.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>,<span class="hljs-keyword">delete</span> me[e],t.<span class="hljs-title function_">triggerEvent</span>(t.<span class="hljs-property">events</span>,<span class="hljs-string">&quot;datasetscachechanged&quot;</span>,{<span class="hljs-attr">uri</span>:e,<span class="hljs-attr">action</span>:<span class="hljs-string">&quot;unloaded&quot;</span>,<span class="hljs-attr">cacheInfo</span>:<span class="hljs-title function_">ve</span>()})))},<span class="hljs-attr">getInfo</span>:ve,<span class="hljs-attr">purge</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){me={},ge={}},<span class="hljs-attr">get</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">if</span>(me[e])<span class="hljs-keyword">return</span> me[e].<span class="hljs-property">dataSet</span>}};<span class="hljs-keyword">var</span> he=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r=fe.<span class="hljs-property">dicomParser</span>,a=<span class="hljs-title function_">de</span>(t),n=xe.<span class="hljs-title function_">get</span>(a.<span class="hljs-property">url</span>);<span class="hljs-keyword">if</span>(n){<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;generalSeriesModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">modality</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080060&quot;</span>),<span class="hljs-attr">seriesInstanceUID</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x0020000e&quot;</span>),<span class="hljs-attr">seriesNumber</span>:n.<span class="hljs-title function_">intString</span>(<span class="hljs-string">&quot;x00200011&quot;</span>),<span class="hljs-attr">studyInstanceUID</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x0020000d&quot;</span>),<span class="hljs-attr">seriesDate</span>:r.<span class="hljs-title function_">parseDA</span>(n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080021&quot;</span>)),<span class="hljs-attr">seriesTime</span>:r.<span class="hljs-title function_">parseTM</span>(n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080031&quot;</span>)||<span class="hljs-string">&quot;&quot;</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;patientStudyModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">patientAge</span>:n.<span class="hljs-title function_">intString</span>(<span class="hljs-string">&quot;x00101010&quot;</span>),<span class="hljs-attr">patientSize</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00101020&quot;</span>),<span class="hljs-attr">patientWeight</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00101030&quot;</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;imagePlaneModule&quot;</span>===e){<span class="hljs-keyword">var</span> o=<span class="hljs-title function_">w</span>(n,<span class="hljs-string">&quot;x00200037&quot;</span>,<span class="hljs-number">6</span>),i=<span class="hljs-title function_">w</span>(n,<span class="hljs-string">&quot;x00200032&quot;</span>,<span class="hljs-number">3</span>),l=<span class="hljs-title function_">w</span>(n,<span class="hljs-string">&quot;x00280030&quot;</span>,<span class="hljs-number">2</span>),s=<span class="hljs-literal">null</span>,u=<span class="hljs-literal">null</span>;l&amp;&amp;(u=l[<span class="hljs-number">0</span>],s=l[<span class="hljs-number">1</span>]);<span class="hljs-keyword">var</span> c=<span class="hljs-literal">null</span>,f=<span class="hljs-literal">null</span>;<span class="hljs-keyword">return</span> o&amp;&amp;(c=[<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">0</span>]),<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">1</span>]),<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">2</span>])],f=[<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">3</span>]),<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">4</span>]),<span class="hljs-built_in">parseFloat</span>(o[<span class="hljs-number">5</span>])]),{<span class="hljs-attr">frameOfReferenceUID</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00200052&quot;</span>),<span class="hljs-attr">rows</span>:n.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280010&quot;</span>),<span class="hljs-attr">columns</span>:n.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280011&quot;</span>),<span class="hljs-attr">imageOrientationPatient</span>:o,<span class="hljs-attr">rowCosines</span>:c,<span class="hljs-attr">columnCosines</span>:f,<span class="hljs-attr">imagePositionPatient</span>:i,<span class="hljs-attr">sliceThickness</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00180050&quot;</span>),<span class="hljs-attr">sliceLocation</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00201041&quot;</span>),<span class="hljs-attr">pixelSpacing</span>:l,<span class="hljs-attr">rowPixelSpacing</span>:u,<span class="hljs-attr">columnPixelSpacing</span>:s}}<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;imagePixelModule&quot;</span>===e)<span class="hljs-keyword">return</span> <span class="hljs-title function_">g</span>(n);<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;modalityLutModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">rescaleIntercept</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00281052&quot;</span>),<span class="hljs-attr">rescaleSlope</span>:n.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00281053&quot;</span>),<span class="hljs-attr">rescaleType</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00281054&quot;</span>),<span class="hljs-attr">modalityLUTSequence</span>:<span class="hljs-title function_">v</span>(n.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280103&quot;</span>),n.<span class="hljs-property">elements</span>.<span class="hljs-property">x00283000</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;voiLutModule&quot;</span>===e){<span class="hljs-keyword">var</span> d=<span class="hljs-title function_">h</span>(n);<span class="hljs-keyword">return</span>{<span class="hljs-attr">windowCenter</span>:<span class="hljs-title function_">w</span>(n,<span class="hljs-string">&quot;x00281050&quot;</span>,<span class="hljs-number">1</span>),<span class="hljs-attr">windowWidth</span>:<span class="hljs-title function_">w</span>(n,<span class="hljs-string">&quot;x00281051&quot;</span>,<span class="hljs-number">1</span>),<span class="hljs-attr">voiLUTSequence</span>:<span class="hljs-title function_">v</span>(d,n.<span class="hljs-property">elements</span>.<span class="hljs-property">x00283010</span>)}}<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;sopCommonModule&quot;</span>===e)<span class="hljs-keyword">return</span>{<span class="hljs-attr">sopClassUID</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080016&quot;</span>),<span class="hljs-attr">sopInstanceUID</span>:n.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00080018&quot;</span>)};<span class="hljs-keyword">if</span>(<span class="hljs-string">&quot;petIsotopeModule&quot;</span>===e){<span class="hljs-keyword">var</span> p=n.<span class="hljs-property">elements</span>.<span class="hljs-property">x00540016</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===p)<span class="hljs-keyword">return</span>;<span class="hljs-keyword">var</span> m=p.<span class="hljs-property">items</span>[<span class="hljs-number">0</span>].<span class="hljs-property">dataSet</span>;<span class="hljs-keyword">return</span>{<span class="hljs-attr">radiopharmaceuticalInfo</span>:{<span class="hljs-attr">radiopharmaceuticalStartTime</span>:r.<span class="hljs-title function_">parseTM</span>(m.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00181072&quot;</span>)||<span class="hljs-string">&quot;&quot;</span>),<span class="hljs-attr">radionuclideTotalDose</span>:m.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00181074&quot;</span>),<span class="hljs-attr">radionuclideHalfLife</span>:m.<span class="hljs-title function_">floatString</span>(<span class="hljs-string">&quot;x00181075&quot;</span>)}}}}},we=[];<span class="hljs-keyword">var</span> be={<span class="hljs-attr">add</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=we.<span class="hljs-title function_">push</span>(e);<span class="hljs-keyword">return</span><span class="hljs-string">&quot;dicomfile:&quot;</span>.<span class="hljs-title function_">concat</span>(t-<span class="hljs-number">1</span>)},<span class="hljs-attr">get</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span> we[e]},<span class="hljs-attr">remove</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){we[e]=<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>},<span class="hljs-attr">purge</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){we=[]}};<span class="hljs-keyword">function</span> <span class="hljs-title function_">ye</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r,a=fe.<span class="hljs-property">dicomParser</span>;<span class="hljs-keyword">if</span>(e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>&amp;&amp;e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>.<span class="hljs-property">basicOffsetTable</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">return</span> a.<span class="hljs-title function_">readEncapsulatedImageFrame</span>(e,e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>,t);<span class="hljs-keyword">if</span>((r=e).<span class="hljs-title function_">intString</span>(<span class="hljs-string">&quot;x00280008&quot;</span>)===r.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>.<span class="hljs-property">fragments</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">return</span> a.<span class="hljs-title function_">readEncapsulatedPixelDataFromFragments</span>(e,e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>,t);<span class="hljs-keyword">var</span> n=a.<span class="hljs-title function_">createJPEGBasicOffsetTable</span>(e,e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>);<span class="hljs-keyword">return</span> a.<span class="hljs-title function_">readEncapsulatedImageFrame</span>(e,e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>,t,n)}<span class="hljs-keyword">var</span> <span class="hljs-title class_">Pe</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t,r</span>){<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> a=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(r),n=<span class="hljs-number">0</span>;n&lt;r;n++){<span class="hljs-keyword">var</span> o=e[<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(n/<span class="hljs-number">8</span>)+t],i=n%<span class="hljs-number">8</span>;a[n]=o&amp;<span class="hljs-number">1</span>&lt;&lt;i?<span class="hljs-number">1</span>:<span class="hljs-number">0</span>}<span class="hljs-keyword">return</span> a};<span class="hljs-keyword">var</span> <span class="hljs-title class_">De</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e,t</span>){<span class="hljs-keyword">var</span> r,a=e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>||e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00008</span>,n=e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280100&quot;</span>),o=e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280010&quot;</span>),i=e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280011&quot;</span>),l=e.<span class="hljs-title function_">uint16</span>(<span class="hljs-string">&quot;x00280002&quot;</span>),s=a.<span class="hljs-property">dataOffset</span>,u=o*i*l;<span class="hljs-keyword">if</span>(<span class="hljs-number">8</span>===n){<span class="hljs-keyword">if</span>((r=s+t*u)&gt;=e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;frame exceeds size of pixelData&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">buffer</span>,r,u)}<span class="hljs-keyword">if</span>(<span class="hljs-number">16</span>===n){<span class="hljs-keyword">if</span>((r=s+t*u*<span class="hljs-number">2</span>)&gt;=e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;frame exceeds size of pixelData&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">buffer</span>,r,<span class="hljs-number">2</span>*u)}<span class="hljs-keyword">if</span>(<span class="hljs-number">1</span>===n){<span class="hljs-keyword">if</span>((r=s+t*u*<span class="hljs-number">.125</span>)&gt;=e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;frame exceeds size of pixelData&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-title class_">Pe</span>(e.<span class="hljs-property">byteArray</span>,r,u)}<span class="hljs-keyword">if</span>(<span class="hljs-number">32</span>!==n)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;unsupported pixel format&quot;</span>);<span class="hljs-keyword">if</span>((r=s+t*u*<span class="hljs-number">4</span>)&gt;=e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">length</span>)<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;frame exceeds size of pixelData&quot;</span>);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(e.<span class="hljs-property">byteArray</span>.<span class="hljs-property">buffer</span>,r,<span class="hljs-number">4</span>*u)};<span class="hljs-keyword">var</span> <span class="hljs-title class_">Ie</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-title function_">de</span>(e),r=<span class="hljs-built_in">parseInt</span>(t.<span class="hljs-property">url</span>,<span class="hljs-number">10</span>),a=be.<span class="hljs-title function_">get</span>(r);<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">r,e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>;t.<span class="hljs-property">onload</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=e.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>;<span class="hljs-title function_">r</span>(t)},t.<span class="hljs-property">onerror</span>=e,t.<span class="hljs-title function_">readAsArrayBuffer</span>(a)})};<span class="hljs-keyword">var</span> <span class="hljs-title class_">Te</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-number">1</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]:<span class="hljs-number">0</span>,r=e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00010</span>||e.<span class="hljs-property">elements</span>.<span class="hljs-property">x7fe00008</span>;<span class="hljs-keyword">return</span> r?r.<span class="hljs-property">encapsulatedPixelData</span>?<span class="hljs-title function_">ye</span>(e,t):<span class="hljs-title class_">De</span>(e,t):<span class="hljs-literal">null</span>};<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ce</span>(<span class="hljs-params">e,s</span>){<span class="hljs-keyword">var</span> u=<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:<span class="hljs-number">0</span>,c=<span class="hljs-number">3</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,f=<span class="hljs-number">4</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">4</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,d=<span class="hljs-number">5</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">5</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,p=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>(),m={<span class="hljs-attr">cancelFn</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>};<span class="hljs-keyword">return</span> m.<span class="hljs-property">promise</span>=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">i,l</span>){e.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">r</span>){<span class="hljs-keyword">var</span> t,e=<span class="hljs-title class_">Te</span>(r,u),a=r.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00020010&quot;</span>),n=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>(),o=<span class="hljs-title function_">oe</span>(s,e,a,f);t=s,m.<span class="hljs-property">decache</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">var</span> e=<span class="hljs-title function_">de</span>(t);xe.<span class="hljs-title function_">unload</span>(e.<span class="hljs-property">url</span>)},o.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){e.<span class="hljs-property">data</span>=r,e.<span class="hljs-property">sharedCacheKey</span>=c;<span class="hljs-keyword">var</span> t=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();e.<span class="hljs-property">loadTimeInMS</span>=n-p,e.<span class="hljs-property">totalTimeInMS</span>=t-p,<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==d&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==d.<span class="hljs-property">imageDoneCallback</span>&amp;&amp;d.<span class="hljs-title function_">imageDoneCallback</span>(e),<span class="hljs-title function_">i</span>(e)},<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">l</span>({<span class="hljs-attr">error</span>:e,<span class="hljs-attr">dataSet</span>:r})})},<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">l</span>({<span class="hljs-attr">error</span>:e})})}),m}<span class="hljs-keyword">function</span> <span class="hljs-title function_">ke</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">return</span><span class="hljs-string">&quot;dicomweb&quot;</span>===e||<span class="hljs-string">&quot;wadouri&quot;</span>===e?<span class="hljs-attr">A</span>:<span class="hljs-string">&quot;dicomfile&quot;</span>===e?<span class="hljs-title class_">Ie</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}<span class="hljs-keyword">function</span> <span class="hljs-title function_">Ae</span>(<span class="hljs-params">e</span>){<span class="hljs-keyword">var</span> t=<span class="hljs-number">1</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]:{},r=<span class="hljs-title function_">de</span>(e),a=(t=<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({},t)).<span class="hljs-property">loader</span>;<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>===a?a=<span class="hljs-title function_">ke</span>(r.<span class="hljs-property">scheme</span>):<span class="hljs-keyword">delete</span> t.<span class="hljs-property">loader</span>,xe.<span class="hljs-title function_">isLoaded</span>(r.<span class="hljs-property">url</span>)?<span class="hljs-keyword">function</span>(<span class="hljs-params">i,l</span>){<span class="hljs-keyword">var</span> s=<span class="hljs-number">2</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>&amp;&amp;<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>!==<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">2</span>]:<span class="hljs-number">0</span>,u=<span class="hljs-number">3</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">3</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,c=<span class="hljs-number">4</span>&lt;<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span>?<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">4</span>]:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>,f=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">return</span>{<span class="hljs-attr">promise</span>:<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">r,t</span>){<span class="hljs-keyword">var</span> e,a=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<span class="hljs-keyword">try</span>{<span class="hljs-keyword">var</span> n=<span class="hljs-title class_">Te</span>(i,s),o=i.<span class="hljs-title function_">string</span>(<span class="hljs-string">&quot;x00020010&quot;</span>);e=<span class="hljs-title function_">oe</span>(l,n,o,c)}<span class="hljs-keyword">catch</span>(e){<span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">t</span>({<span class="hljs-attr">error</span>:e,<span class="hljs-attr">dataSet</span>:i})}e.<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){e.<span class="hljs-property">data</span>=i,e.<span class="hljs-property">sharedCacheKey</span>=u;<span class="hljs-keyword">var</span> t=(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();e.<span class="hljs-property">loadTimeInMS</span>=a-f,e.<span class="hljs-property">totalTimeInMS</span>=t-f,<span class="hljs-title function_">r</span>(e)},t)}),<span class="hljs-attr">cancelFn</span>:<span class="hljs-keyword">void</span> <span class="hljs-number">0</span>}}(xe.<span class="hljs-title function_">get</span>(r.<span class="hljs-property">url</span>,a,e),e,r.<span class="hljs-property">frame</span>,r.<span class="hljs-property">url</span>,t):<span class="hljs-title class_">Ce</span>(xe.<span class="hljs-title function_">load</span>(r.<span class="hljs-property">url</span>,a,e),e,r.<span class="hljs-property">frame</span>,r.<span class="hljs-property">url</span>,t)}<span class="hljs-keyword">var</span> <span class="hljs-title class_">Le</span>={<span class="hljs-attr">metaData</span>:{<span class="hljs-attr">getImagePixelModule</span>:g,<span class="hljs-attr">getLUTs</span>:v,<span class="hljs-attr">getModalityLUTOutputPixelRepresentation</span>:h,<span class="hljs-attr">getNumberValues</span>:w,<span class="hljs-attr">metaDataProvider</span>:he},<span class="hljs-attr">dataSetCacheManager</span>:xe,<span class="hljs-attr">fileManager</span>:be,<span class="hljs-attr">getEncapsulatedImageFrame</span>:ye,<span class="hljs-attr">getUncompressedImageFrame</span>:<span class="hljs-title class_">De</span>,<span class="hljs-attr">loadFileRequest</span>:<span class="hljs-title class_">Ie</span>,<span class="hljs-attr">loadImageFromPromise</span>:<span class="hljs-title class_">Ce</span>,<span class="hljs-attr">getLoaderForScheme</span>:ke,<span class="hljs-attr">loadImage</span>:<span class="hljs-title class_">Ae</span>,<span class="hljs-attr">parseImageId</span>:de,<span class="hljs-attr">unpackBinaryFrame</span>:<span class="hljs-title class_">Pe</span>,<span class="hljs-attr">register</span>:<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){e.<span class="hljs-title function_">registerImageLoader</span>(<span class="hljs-string">&quot;dicomweb&quot;</span>,<span class="hljs-title class_">Ae</span>),e.<span class="hljs-title function_">registerImageLoader</span>(<span class="hljs-string">&quot;wadouri&quot;</span>,<span class="hljs-title class_">Ae</span>),e.<span class="hljs-title function_">registerImageLoader</span>(<span class="hljs-string">&quot;dicomfile&quot;</span>,<span class="hljs-title class_">Ae</span>),e.<span class="hljs-property">metaData</span>.<span class="hljs-title function_">addProvider</span>(he)}};<span class="hljs-keyword">var</span> <span class="hljs-title class_">Se</span>=<span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>){<span class="hljs-title function_">C</span>(e)},<span class="hljs-title class_">Ee</span>=<span class="hljs-title function_">r</span>(<span class="hljs-number">3</span>);r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertRGBColorByPixel&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> a}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertRGBColorByPlane&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> n}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertYBRFullByPixel&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> o}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertYBRFullByPlane&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> i}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertPALETTECOLOR&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> l}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;wadouri&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Le</span>}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;wadors&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> le}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;configure&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Se</span>}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;convertColorSpace&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> re}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;createImage&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> oe}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;decodeImageFrame&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> $}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;decodeJPEGBaseline8BitColor&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> Y}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;getImageFrame&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> O}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;getMinMax&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> z.<span class="hljs-property">a</span>}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;isColorImage&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> ee}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;isJPEGBaseline8BitColor&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> ae}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;webWorkerManager&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> J}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;version&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> <span class="hljs-title class_">Ee</span>.<span class="hljs-property">a</span>}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;internal&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> L}),r.<span class="hljs-title function_">d</span>(t,<span class="hljs-string">&quot;external&quot;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>){<span class="hljs-keyword">return</span> fe});<span class="hljs-keyword">var</span> <span class="hljs-title class_">Oe</span>={<span class="hljs-attr">convertRGBColorByPixel</span>:a,<span class="hljs-attr">convertRGBColorByPlane</span>:n,<span class="hljs-attr">convertYBRFullByPixel</span>:o,<span class="hljs-attr">convertYBRFullByPlane</span>:i,<span class="hljs-attr">convertPALETTECOLOR</span>:l,<span class="hljs-attr">wadouri</span>:<span class="hljs-title class_">Le</span>,<span class="hljs-attr">wadors</span>:le,<span class="hljs-attr">configure</span>:<span class="hljs-title class_">Se</span>,<span class="hljs-attr">convertColorSpace</span>:re,<span class="hljs-attr">createImage</span>:oe,<span class="hljs-attr">decodeImageFrame</span>:$,<span class="hljs-attr">decodeJPEGBaseline8BitColor</span>:Y,<span class="hljs-attr">getImageFrame</span>:O,<span class="hljs-attr">getMinMax</span>:z.<span class="hljs-property">a</span>,<span class="hljs-attr">isColorImage</span>:ee,<span class="hljs-attr">isJPEGBaseline8BitColor</span>:ae,<span class="hljs-attr">webWorkerManager</span>:J,<span class="hljs-attr">version</span>:<span class="hljs-title class_">Ee</span>.<span class="hljs-property">a</span>,<span class="hljs-attr">internal</span>:L,<span class="hljs-attr">external</span>:fe};t.<span class="hljs-property">default</span>=<span class="hljs-title class_">Oe</span>}])});
<span class="hljs-comment">//# sourceMappingURL=cornerstoneWADOImageLoader.min.js.map</span></div></div></div></main></body></html>